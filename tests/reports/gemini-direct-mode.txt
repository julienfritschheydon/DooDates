
[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/Julien Fritsch/Documents/GitHub/DooDates-bug[39m

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF
[22m[39mâ„¹ï¸ ğŸŒ âœ… Direct Gemini API initialisÃ©e (fetch direct) 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF
[22m[39mâ„¹ï¸ ğŸŒ ğŸ”µ Mode DIRECT GEMINI API activÃ© (bypass Edge Function) 
â„¹ï¸ ğŸŒ VITE_GEMINI_API_KEY configurÃ©e: AIzaSyAXlQ... 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF
[22m[39m
======================================================================
ğŸ§ª TESTS GEMINI - CATÃ‰GORIE ASSOCIATIF
======================================================================

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mRÃ©union parents-profs
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'af15395b-e163-4dac-ae41-594280cee968'[39m,
  userInputLength: [33m61[39m,
  userInputPreview: [32m'Cale la rÃ©union parents-profs entre mardi et jeudi'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=61, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'af15395b-e163-4dac-ae41-594280cee968'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=3, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'af15395b-e163-4dac-ae41-594280cee968'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m664[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'af15395b-e163-4dac-ae41-594280cee968'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Cale la rÃ©union parents-profs entre mardi et jeudi prochains."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m61[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mRÃ©union parents-profs
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m213[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mRÃ©union parents-profs
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'af15395b-e163-4dac-ae41-594280cee968'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mRÃ©union parents-profs
[22m[39m
ğŸ“ QUESTION: Cale la rÃ©union parents-profs entre mardi et jeudi prochains.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-09, 2025-12-10, 2025-12-11
   - CrÃ©neaux: aucun
   âœ… Attendu: â‰¥2 dates | Obtenu: [33m3[39m

 [32mâœ“[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mRÃ©union parents-profs[33m 1171[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mBureau associatif 30min
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'17c9997d-279f-48ba-9352-4ece2cb03c56'[39m,
  userInputLength: [33m71[39m,
  userInputPreview: [32m'Trouve un crÃ©neau de 30 minutes cette semaine pour'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=71, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'17c9997d-279f-48ba-9352-4ece2cb03c56'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=2, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'17c9997d-279f-48ba-9352-4ece2cb03c56'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m674[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'17c9997d-279f-48ba-9352-4ece2cb03c56'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Trouve un crÃ©neau de 30 minutes cette semaine pour le bureau de l'asso."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m71[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mBureau associatif 30min
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m850[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mBureau associatif 30min
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'17c9997d-279f-48ba-9352-4ece2cb03c56'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mBureau associatif 30min
[22m[39m
ğŸ“ QUESTION: Trouve un crÃ©neau de 30 minutes cette semaine pour le bureau de l'asso.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-06, 2025-12-09, 2025-12-10, 2025-12-11, 2025-12-12
   - CrÃ©neaux: 09:00-09:30, 14:00-14:30, 16:00-16:30
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m5[39m

 [32mâœ“[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mBureau associatif 30min[33m 3052[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mAtelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'bde7827f-c34e-4efc-930c-355614416222'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m"Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©v"[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=70, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'bde7827f-c34e-4efc-930c-355614416222'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=4, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'bde7827f-c34e-4efc-930c-355614416222'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'bde7827f-c34e-4efc-930c-355614416222'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©voles, semaine du 12."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mAtelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m316[39m }

stderr | src/test/gemini-tests/associatif.manual.ts > Gemini Tests - ASSOCIATIF > Atelier bÃ©nÃ©voles semaine du 12
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\associatif.manual.ts:41:28\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:21.041Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mAtelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'bde7827f-c34e-4efc-930c-355614416222'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mRÃ©pÃ©tition chorale week-end
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'75e508c8-c4ec-4928-adeb-d17e398798f9'[39m,
  userInputLength: [33m68[39m,
  userInputPreview: [32m'Planifie une rÃ©pÃ©tition chorale samedi matin ou di'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=68, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'75e508c8-c4ec-4928-adeb-d17e398798f9'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=5, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'75e508c8-c4ec-4928-adeb-d17e398798f9'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m671[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'75e508c8-c4ec-4928-adeb-d17e398798f9'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une rÃ©pÃ©tition chorale samedi matin ou dimanche aprÃ¨s-midi."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m68[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mAtelier bÃ©nÃ©voles semaine du 12[33m 1182[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mRÃ©pÃ©tition chorale week-end
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m360[39m }

stderr | src/test/gemini-tests/associatif.manual.ts > Gemini Tests - ASSOCIATIF > RÃ©pÃ©tition chorale week-end
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\associatif.manual.ts:41:28\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:22.643Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mRÃ©pÃ©tition chorale week-end
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'75e508c8-c4ec-4928-adeb-d17e398798f9'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mAide devoirs mercredi/vendredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'0f980454-2592-4129-9a1f-92de2915762f'[39m,
  userInputLength: [33m71[39m,
  userInputPreview: [32m'Cherche une disponibilitÃ© mercredi ou vendredi pou'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=71, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'0f980454-2592-4129-9a1f-92de2915762f'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=3, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'0f980454-2592-4129-9a1f-92de2915762f'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m674[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'0f980454-2592-4129-9a1f-92de2915762f'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Cherche une disponibilitÃ© mercredi ou vendredi pour l'aide aux devoirs."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m71[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mRÃ©pÃ©tition chorale week-end[33m 1595[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mAide devoirs mercredi/vendredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m127[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mAide devoirs mercredi/vendredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'0f980454-2592-4129-9a1f-92de2915762f'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mAide devoirs mercredi/vendredi
[22m[39m
ğŸ“ QUESTION: Cherche une disponibilitÃ© mercredi ou vendredi pour l'aide aux devoirs.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-10, 2025-12-12
   - CrÃ©neaux: aucun
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m2[39m

 [32mâœ“[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mAide devoirs mercredi/vendredi[33m 806[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mComitÃ© de quartier J+15
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'04359ceb-d31d-4e51-becb-9e3e836c5eae'[39m,
  userInputLength: [33m75[39m,
  userInputPreview: [32m'PrÃ©vois le comitÃ© de quartier dans quinze jours, p'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=75, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'04359ceb-d31d-4e51-becb-9e3e836c5eae'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=3, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'04359ceb-d31d-4e51-becb-9e3e836c5eae'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m678[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'04359ceb-d31d-4e51-becb-9e3e836c5eae'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "PrÃ©vois le comitÃ© de quartier dans quinze jours, plutÃ´t en dÃ©but de soirÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m75[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mComitÃ© de quartier J+15
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m239[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mComitÃ© de quartier J+15
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'04359ceb-d31d-4e51-becb-9e3e836c5eae'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mComitÃ© de quartier J+15
[22m[39m
ğŸ“ QUESTION: PrÃ©vois le comitÃ© de quartier dans quinze jours, plutÃ´t en dÃ©but de soirÃ©e.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-20
   - CrÃ©neaux: 18:00-20:00
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m1[39m

 [32mâœ“[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mComitÃ© de quartier J+15[33m 1290[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mPrÃ©pa kermesse samedi 10h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'a77e888a-5d0a-4399-bf7b-a63feae9b7be'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m'Propose un crÃ©neau samedi 10h pour la rÃ©union de p'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=70, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'a77e888a-5d0a-4399-bf7b-a63feae9b7be'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=3, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'a77e888a-5d0a-4399-bf7b-a63feae9b7be'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'a77e888a-5d0a-4399-bf7b-a63feae9b7be'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose un crÃ©neau samedi 10h pour la rÃ©union de prÃ©paration kermesse."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mPrÃ©pa kermesse samedi 10h
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m267[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mPrÃ©pa kermesse samedi 10h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'a77e888a-5d0a-4399-bf7b-a63feae9b7be'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mPrÃ©pa kermesse samedi 10h
[22m[39m
ğŸ“ QUESTION: Propose un crÃ©neau samedi 10h pour la rÃ©union de prÃ©paration kermesse.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-06
   - CrÃ©neaux: 10:00-11:00
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m1[39m

 [32mâœ“[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mPrÃ©pa kermesse samedi 10h[33m 1190[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mEquipe Ã©ducative avant vacances
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'188027f1-ea4c-4068-9362-fd6e0b2e8f41'[39m,
  userInputLength: [33m79[39m,
  userInputPreview: [32m"Planifie une rÃ©union d'Ã©quipe Ã©ducative avant les "[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=79, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'188027f1-ea4c-4068-9362-fd6e0b2e8f41'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=2, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'188027f1-ea4c-4068-9362-fd6e0b2e8f41'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m682[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'188027f1-ea4c-4068-9362-fd6e0b2e8f41'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Planifie une rÃ©union d'Ã©quipe Ã©ducative avant les vacances, matinÃ©e uniquement."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m79[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mEquipe Ã©ducative avant vacances
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m571[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mEquipe Ã©ducative avant vacances
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'188027f1-ea4c-4068-9362-fd6e0b2e8f41'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mEquipe Ã©ducative avant vacances
[22m[39m
ğŸ“ QUESTION: Planifie une rÃ©union d'Ã©quipe Ã©ducative avant les vacances, matinÃ©e uniquement.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-09, 2025-12-10, 2025-12-11, 2025-12-12
   - CrÃ©neaux: 09:00-12:00, 09:00-12:00, 09:00-12:00, 09:00-12:00
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m4[39m

 [32mâœ“[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mEquipe Ã©ducative avant vacances[33m 1859[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mVisio trÃ©sorerie
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'fabb920d-a0e8-4245-ba88-931373ce4420'[39m,
  userInputLength: [33m67[39m,
  userInputPreview: [32m'Trouve-nous un crÃ©neau en visio aprÃ¨s 18h pour le '[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=67, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'fabb920d-a0e8-4245-ba88-931373ce4420'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=1, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'fabb920d-a0e8-4245-ba88-931373ce4420'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m670[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'fabb920d-a0e8-4245-ba88-931373ce4420'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve-nous un crÃ©neau en visio aprÃ¨s 18h pour le point trÃ©sorerie."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m67[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mVisio trÃ©sorerie
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1205[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mVisio trÃ©sorerie
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'fabb920d-a0e8-4245-ba88-931373ce4420'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mVisio trÃ©sorerie
[22m[39m
ğŸ“ QUESTION: Trouve-nous un crÃ©neau en visio aprÃ¨s 18h pour le point trÃ©sorerie.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-05, 2025-12-06
   - CrÃ©neaux: 18:00-18:30, 18:30-19:00, 19:00-19:30, 19:30-20:00, 20:00-20:30, 20:30-21:00, 21:00-21:30, 21:30-22:00
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m2[39m

 [32mâœ“[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mVisio trÃ©sorerie[33m 3563[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mDistribution flyers fin avril
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'7ca82011-728e-4b52-b3a4-3ece21ed4943'[39m,
  userInputLength: [33m61[39m,
  userInputPreview: [32m'Planifie la distribution de flyers sur un week-end'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=61, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'7ca82011-728e-4b52-b3a4-3ece21ed4943'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=0, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'7ca82011-728e-4b52-b3a4-3ece21ed4943'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m664[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'7ca82011-728e-4b52-b3a4-3ece21ed4943'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie la distribution de flyers sur un week-end fin avril."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m61[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mDistribution flyers fin avril
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m201[39m }

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mDistribution flyers fin avril
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'7ca82011-728e-4b52-b3a4-3ece21ed4943'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/associatif.manual.ts[2m > [22m[2mGemini Tests - ASSOCIATIF[2m > [22m[2mDistribution flyers fin avril
[22m[39m
ğŸ“ QUESTION: Planifie la distribution de flyers sur un week-end fin avril.
ğŸ“… RÃ‰PONSE:
   - Dates: 2026-04-25, 2026-04-26
   - CrÃ©neaux: aucun
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m2[39m

 [32mâœ“[39m src/test/gemini-tests/associatif.manual.ts[2m > [22mGemini Tests - ASSOCIATIF[2m > [22mDistribution flyers fin avril[33m 782[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL
[22m[39mâ„¹ï¸ ğŸŒ âœ… Direct Gemini API initialisÃ©e (fetch direct) 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL
[22m[39mâ„¹ï¸ ğŸŒ ğŸ”µ Mode DIRECT GEMINI API activÃ© (bypass Edge Function) 
â„¹ï¸ ğŸŒ VITE_GEMINI_API_KEY configurÃ©e: AIzaSyAXlQ... 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL
[22m[39m
======================================================================
ğŸ§ª TESTS GEMINI - CATÃ‰GORIE PERSONNEL
======================================================================

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mBrunch week-end 23/24
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'aed8e2b5-18e5-4c75-8b44-7f7f265ca68a'[39m,
  userInputLength: [33m43[39m,
  userInputPreview: [32m'Calcule un brunch samedi 23 ou dimanche 24.'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=43, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'aed8e2b5-18e5-4c75-8b44-7f7f265ca68a'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=2, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'aed8e2b5-18e5-4c75-8b44-7f7f265ca68a'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m646[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'aed8e2b5-18e5-4c75-8b44-7f7f265ca68a'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Calcule un brunch samedi 23 ou dimanche 24."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m43[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mBrunch week-end 23/24
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m189[39m }

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mBrunch week-end 23/24
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'aed8e2b5-18e5-4c75-8b44-7f7f265ca68a'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mBrunch week-end 23/24
[22m[39m
ğŸ“ QUESTION: Calcule un brunch samedi 23 ou dimanche 24.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-23, 2025-12-24
   - CrÃ©neaux: aucun
   âœ… Attendu: â‰¥2 dates | Obtenu: [33m2[39m

 [32mâœ“[39m src/test/gemini-tests/personnel.manual.ts[2m > [22mGemini Tests - PERSONNEL[2m > [22mBrunch week-end 23/24[33m 929[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mEscape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'17042736-696a-49e8-8d6c-620fbe30d304'[39m,
  userInputLength: [33m51[39m,
  userInputPreview: [32m'Propose trois soirÃ©es pour un escape game fin mars'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=51, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'17042736-696a-49e8-8d6c-620fbe30d304'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=1, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'17042736-696a-49e8-8d6c-620fbe30d304'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m654[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'17042736-696a-49e8-8d6c-620fbe30d304'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose trois soirÃ©es pour un escape game fin mars."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m51[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mEscape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m577[39m }

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mEscape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'17042736-696a-49e8-8d6c-620fbe30d304'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mEscape game fin mars
[22m[39m
ğŸ“ QUESTION: Propose trois soirÃ©es pour un escape game fin mars.
ğŸ“… RÃ‰PONSE:
   - Dates: 2026-03-27, 2026-03-28, 2026-03-29
   - CrÃ©neaux: 20:00-22:00, 20:00-22:00, 20:00-22:00
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m3[39m

 [32mâœ“[39m src/test/gemini-tests/personnel.manual.ts[2m > [22mGemini Tests - PERSONNEL[2m > [22mEscape game fin mars[33m 1975[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mVisite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'c56c3376-3116-44ce-bb37-4c12a4866700'[39m,
  userInputLength: [33m72[39m,
  userInputPreview: [32m'Trouve un aprÃ¨s-midi libre la semaine prochaine po'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=72, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'c56c3376-3116-44ce-bb37-4c12a4866700'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=5, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'c56c3376-3116-44ce-bb37-4c12a4866700'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m675[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'c56c3376-3116-44ce-bb37-4c12a4866700'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un aprÃ¨s-midi libre la semaine prochaine pour la visite au musÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m72[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mVisite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m437[39m }

stderr | src/test/gemini-tests/personnel.manual.ts > Gemini Tests - PERSONNEL > Visite musÃ©e semaine prochaine
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\personnel.manual.ts:39:28\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:36.738Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mVisite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'c56c3376-3116-44ce-bb37-4c12a4866700'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mFooting vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'b1147dc1-d4c5-4c7c-8b33-9b69710c0c65'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m'Bloque un crÃ©neau vendredi soir ou samedi matin po'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=64, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'b1147dc1-d4c5-4c7c-8b33-9b69710c0c65'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=5, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'b1147dc1-d4c5-4c7c-8b33-9b69710c0c65'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'b1147dc1-d4c5-4c7c-8b33-9b69710c0c65'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Bloque un crÃ©neau vendredi soir ou samedi matin pour un footing."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/personnel.manual.ts[2m > [22mGemini Tests - PERSONNEL[2m > [22mVisite musÃ©e semaine prochaine[33m 1589[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mFooting vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m539[39m }

stderr | src/test/gemini-tests/personnel.manual.ts > Gemini Tests - PERSONNEL > Footing vendredi soir / samedi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\personnel.manual.ts:39:28\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:38.667Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mFooting vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'b1147dc1-d4c5-4c7c-8b33-9b69710c0c65'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mDÃ®ner cousins avril
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'dba8cc47-206a-4b78-9576-3a059eea099c'[39m,
  userInputLength: [33m69[39m,
  userInputPreview: [32m'Organise un dÃ®ner avec les cousins courant avril, '[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=69, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'dba8cc47-206a-4b78-9576-3a059eea099c'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=1, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'dba8cc47-206a-4b78-9576-3a059eea099c'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m672[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'dba8cc47-206a-4b78-9576-3a059eea099c'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise un dÃ®ner avec les cousins courant avril, plutÃ´t le week-end."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m69[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/personnel.manual.ts[2m > [22mGemini Tests - PERSONNEL[2m > [22mFooting vendredi soir / samedi matin[33m 1929[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mDÃ®ner cousins avril
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m427[39m }

stderr | src/test/gemini-tests/personnel.manual.ts > Gemini Tests - PERSONNEL > DÃ®ner cousins avril
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\personnel.manual.ts:39:28\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:40.198Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mDÃ®ner cousins avril
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'dba8cc47-206a-4b78-9576-3a059eea099c'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mAnniversaire LÃ©a 15 mai
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'd272b943-1450-4c99-abad-b630afd45847'[39m,
  userInputLength: [33m60[39m,
  userInputPreview: [32m"Trouve une date pour l'anniversaire de LÃ©a autour "[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=60, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'd272b943-1450-4c99-abad-b630afd45847'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=1, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'd272b943-1450-4c99-abad-b630afd45847'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m663[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'd272b943-1450-4c99-abad-b630afd45847'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Trouve une date pour l'anniversaire de LÃ©a autour du 15 mai."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m60[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/personnel.manual.ts[2m > [22mGemini Tests - PERSONNEL[2m > [22mDÃ®ner cousins avril[33m 1530[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mAnniversaire LÃ©a 15 mai
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m175[39m }

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mAnniversaire LÃ©a 15 mai
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'd272b943-1450-4c99-abad-b630afd45847'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mAnniversaire LÃ©a 15 mai
[22m[39m
ğŸ“ QUESTION: Trouve une date pour l'anniversaire de LÃ©a autour du 15 mai.
ğŸ“… RÃ‰PONSE:
   - Dates: 2026-05-15
   - CrÃ©neaux: aucun
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m1[39m

 [32mâœ“[39m src/test/gemini-tests/personnel.manual.ts[2m > [22mGemini Tests - PERSONNEL[2m > [22mAnniversaire LÃ©a 15 mai[33m 806[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mSÃ©ance photo familiale
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'b7c67916-62e6-4002-9c5c-e7b1dfb40ca4'[39m,
  userInputLength: [33m73[39m,
  userInputPreview: [32m'Planifie une sÃ©ance photo familiale un dimanche ma'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=73, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'b7c67916-62e6-4002-9c5c-e7b1dfb40ca4'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=2, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'b7c67916-62e6-4002-9c5c-e7b1dfb40ca4'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m676[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'b7c67916-62e6-4002-9c5c-e7b1dfb40ca4'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une sÃ©ance photo familiale un dimanche matin avant fin dÃ©cembre."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m73[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mSÃ©ance photo familiale
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m363[39m }

stderr | src/test/gemini-tests/personnel.manual.ts > Gemini Tests - PERSONNEL > SÃ©ance photo familiale
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\personnel.manual.ts:39:28\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:42.162Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mSÃ©ance photo familiale
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'b7c67916-62e6-4002-9c5c-e7b1dfb40ca4'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mApÃ©ro entre amis
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'b88c0b1d-4c2d-4ecb-9233-58869fa67bd5'[39m,
  userInputLength: [33m76[39m,
  userInputPreview: [32m'Cherche une soirÃ©e disponible entre amis pour un a'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=76, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'b88c0b1d-4c2d-4ecb-9233-58869fa67bd5'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=2, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'b88c0b1d-4c2d-4ecb-9233-58869fa67bd5'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m679[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'b88c0b1d-4c2d-4ecb-9233-58869fa67bd5'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Cherche une soirÃ©e disponible entre amis pour un apÃ©ro d'ici trois semaines."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m76[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/personnel.manual.ts[2m > [22mGemini Tests - PERSONNEL[2m > [22mSÃ©ance photo familiale[33m 1157[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mApÃ©ro entre amis
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m577[39m }

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mApÃ©ro entre amis
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'b88c0b1d-4c2d-4ecb-9233-58869fa67bd5'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/personnel.manual.ts[2m > [22m[2mGemini Tests - PERSONNEL[2m > [22m[2mApÃ©ro entre amis
[22m[39m
ğŸ“ QUESTION: Cherche une soirÃ©e disponible entre amis pour un apÃ©ro d'ici trois semaines.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-06, 2025-12-07, 2025-12-08, 2025-12-09, 2025-12-10, 2025-12-11, 2025-12-12, 2025-12-13, 2025-12-14, 2025-12-15, 2025-12-16, 2025-12-17, 2025-12-18, 2025-12-19, 2025-12-20, 2025-12-21, 2025-12-22, 2025-12-23, 2025-12-24, 2025-12-25, 2025-12-26
   - CrÃ©neaux: aucun
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m21[39m

 [32mâœ“[39m src/test/gemini-tests/personnel.manual.ts[2m > [22mGemini Tests - PERSONNEL[2m > [22mApÃ©ro entre amis[33m 2256[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL
[22m[39mâ„¹ï¸ ğŸŒ âœ… Direct Gemini API initialisÃ©e (fetch direct) 

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL
[22m[39mâ„¹ï¸ ğŸŒ ğŸ”µ Mode DIRECT GEMINI API activÃ© (bypass Edge Function) 
â„¹ï¸ ğŸŒ VITE_GEMINI_API_KEY configurÃ©e: AIzaSyAXlQ... 

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL
[22m[39m
======================================================================
ğŸ§ª TESTS GEMINI - CATÃ‰GORIE PROFESSIONNEL
======================================================================

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mDÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'1341a49a-b9ee-42c0-80ab-f842ce96dda7'[39m,
  userInputLength: [33m74[39m,
  userInputPreview: [32m'Propose-moi trois crÃ©neaux mardi ou mercredi proch'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=74, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'1341a49a-b9ee-42c0-80ab-f842ce96dda7'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=4, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'1341a49a-b9ee-42c0-80ab-f842ce96dda7'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m677[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'1341a49a-b9ee-42c0-80ab-f842ce96dda7'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose-moi trois crÃ©neaux mardi ou mercredi prochain pour la dÃ©mo client."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m74[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mDÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m389[39m }

stderr | src/test/gemini-tests/professionnel.manual.ts > Gemini Tests - PROFESSIONNEL > DÃ©mo client mardi/mercredi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\professionnel.manual.ts:36:28\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:45.819Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mDÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'1341a49a-b9ee-42c0-80ab-f842ce96dda7'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mPoint budget dans deux semaines
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'9bedb79e-8d3c-48c7-a05b-179e3eeaf1b9'[39m,
  userInputLength: [33m59[39m,
  userInputPreview: [32m'Planifie un point budget dans deux semaines autour'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=59, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'9bedb79e-8d3c-48c7-a05b-179e3eeaf1b9'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=1, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'9bedb79e-8d3c-48c7-a05b-179e3eeaf1b9'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m662[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'9bedb79e-8d3c-48c7-a05b-179e3eeaf1b9'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie un point budget dans deux semaines autour de 9h30."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m59[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/professionnel.manual.ts[2m > [22mGemini Tests - PROFESSIONNEL[2m > [22mDÃ©mo client mardi/mercredi[33m 1309[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mPoint budget dans deux semaines
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m164[39m }

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mPoint budget dans deux semaines
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'9bedb79e-8d3c-48c7-a05b-179e3eeaf1b9'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mPoint budget dans deux semaines
[22m[39m
ğŸ“ QUESTION: Planifie un point budget dans deux semaines autour de 9h30.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-19
   - CrÃ©neaux: 09:30-10:00
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m1[39m

 [32mâœ“[39m src/test/gemini-tests/professionnel.manual.ts[2m > [22mGemini Tests - PROFESSIONNEL[2m > [22mPoint budget dans deux semaines[33m 920[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mRÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'aa2b17b1-911e-4784-a847-53c4791f230f'[39m,
  userInputLength: [33m69[39m,
  userInputPreview: [32m'GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=69, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'aa2b17b1-911e-4784-a847-53c4791f230f'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=3, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'aa2b17b1-911e-4784-a847-53c4791f230f'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m672[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'aa2b17b1-911e-4784-a847-53c4791f230f'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t en fin de journÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m69[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mRÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m304[39m }

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mRÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'aa2b17b1-911e-4784-a847-53c4791f230f'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
stderr | src/test/gemini-tests/professionnel.manual.ts > Gemini Tests - PROFESSIONNEL > RÃ©union projet semaine du 18
ğŸš¨ DooDates Error: {
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\professionnel.manual.ts:36:28\n' +

    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:47.893Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mRevue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'53357a38-a7aa-4a27-8a94-d3e06725e235'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m'Trouve un crÃ©neau avant vendredi midi pour passer '[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=70, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'53357a38-a7aa-4a27-8a94-d3e06725e235'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=3, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'53357a38-a7aa-4a27-8a94-d3e06725e235'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'53357a38-a7aa-4a27-8a94-d3e06725e235'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un crÃ©neau avant vendredi midi pour passer en revue les slides."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/professionnel.manual.ts[2m > [22mGemini Tests - PROFESSIONNEL[2m > [22mRÃ©union projet semaine du 18[33m 1154[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mRevue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m250[39m }

stderr | src/test/gemini-tests/professionnel.manual.ts > Gemini Tests - PROFESSIONNEL > Revue slides avant vendredi midi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests\\professionnel.manual.ts:36:28\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:39:48.925Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mRevue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'53357a38-a7aa-4a27-8a94-d3e06725e235'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mStand-up express demain matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'1dc826ad-a212-4610-a954-b71ebf46f1f6'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m"Organise un stand-up express demain matin pour l'Ã©"[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=64, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'1dc826ad-a212-4610-a954-b71ebf46f1f6'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=2, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'1dc826ad-a212-4610-a954-b71ebf46f1f6'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'1dc826ad-a212-4610-a954-b71ebf46f1f6'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise un stand-up express demain matin pour l'Ã©quipe support."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests/professionnel.manual.ts[2m > [22mGemini Tests - PROFESSIONNEL[2m > [22mRevue slides avant vendredi midi[33m 1033[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mStand-up express demain matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m250[39m }

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mStand-up express demain matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'1dc826ad-a212-4610-a954-b71ebf46f1f6'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/professionnel.manual.ts[2m > [22m[2mGemini Tests - PROFESSIONNEL[2m > [22m[2mStand-up express demain matin
[22m[39m
ğŸ“ QUESTION: Organise un stand-up express demain matin pour l'Ã©quipe support.
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-06
   - CrÃ©neaux: 09:00-09:15
   âœ… Attendu: â‰¥1 dates | Obtenu: [33m1[39m

 [32mâœ“[39m src/test/gemini-tests/professionnel.manual.ts[2m > [22mGemini Tests - PROFESSIONNEL[2m > [22mStand-up express demain matin[33m 791[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG
[22m[39mâ„¹ï¸ ğŸŒ âœ… Direct Gemini API initialisÃ©e (fetch direct) 

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG
[22m[39mâ„¹ï¸ ğŸŒ ğŸ”µ Mode DIRECT GEMINI API activÃ© (bypass Edge Function) 
â„¹ï¸ ğŸŒ VITE_GEMINI_API_KEY configurÃ©e: AIzaSyAXlQ... 

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG
[22m[39m
======================================================================
ğŸ§ª TESTS GEMINI - CATÃ‰GORIE BUG
======================================================================

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG[2m > [22m[2m[CRITIQUE] DÃ©jeuner entre midi et deux â†’ 1 crÃ©neau
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'febbabaa-a886-4499-89e8-383672a66387'[39m,
  userInputLength: [33m85[39m,
  userInputPreview: [32m'fais-moi un sondage pour rÃ©server un dÃ©jeuner la s'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=85, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'febbabaa-a886-4499-89e8-383672a66387'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'febbabaa-a886-4499-89e8-383672a66387'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m688[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'febbabaa-a886-4499-89e8-383672a66387'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "fais-moi un sondage pour rÃ©server un dÃ©jeuner la semaine prochaine entre midi et deux"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m85[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG[2m > [22m[2m[CRITIQUE] DÃ©jeuner entre midi et deux â†’ 1 crÃ©neau
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m493[39m }

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG[2m > [22m[2m[CRITIQUE] DÃ©jeuner entre midi et deux â†’ 1 crÃ©neau
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'febbabaa-a886-4499-89e8-383672a66387'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG[2m > [22m[2m[CRITIQUE] DÃ©jeuner entre midi et deux â†’ 1 crÃ©neau
[22m[39m
ğŸ“ QUESTION: fais-moi un sondage pour rÃ©server un dÃ©jeuner la semaine prochaine entre midi et deux
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-08, 2025-12-09, 2025-12-10, 2025-12-11, 2025-12-12
   - CrÃ©neaux: 12:00-14:00
   âœ… Attendu: 1 crÃ©neau | Obtenu: [33m1[39m

 [32mâœ“[39m src/test/gemini-tests/bug.manual.ts[2m > [22mGemini Tests - BUG[2m > [22m[CRITIQUE] DÃ©jeuner entre midi et deux â†’ 1 crÃ©neau[33m 1613[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG[2m > [22m[2m[HAUTE] Brunch samedi ou dimanche â†’ 2 dates
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'3a180c88-b097-4c3d-9bc1-0102bc00ff36'[39m,
  userInputLength: [33m36[39m,
  userInputPreview: [32m'prÃ©vois un brunch samedi ou dimanche'[39m
}
â„¹ï¸ ğŸŒ Markdown detection: title=false, sections=false, questions=false, checkboxes=false, length=36, result=false 
â„¹ï¸ ğŸŒ ğŸ“‹ DÃ©tection automatique du type {
  requestId: [32m'3a180c88-b097-4c3d-9bc1-0102bc00ff36'[39m,
  isMarkdown: [33mfalse[39m
}
â„¹ï¸ ğŸŒ Poll type detection: strongFormScore=0, formScore=0, totalFormScore=0, dateScore=2, hasSondage=false 
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'3a180c88-b097-4c3d-9bc1-0102bc00ff36'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m639[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'3a180c88-b097-4c3d-9bc1-0102bc00ff36'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "prÃ©vois un brunch samedi ou dimanche"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m36[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG[2m > [22m[2m[HAUTE] Brunch samedi ou dimanche â†’ 2 dates
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m94[39m }

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG[2m > [22m[2m[HAUTE] Brunch samedi ou dimanche â†’ 2 dates
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'3a180c88-b097-4c3d-9bc1-0102bc00ff36'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests/bug.manual.ts[2m > [22m[2mGemini Tests - BUG[2m > [22m[2m[HAUTE] Brunch samedi ou dimanche â†’ 2 dates
[22m[39m
ğŸ“ QUESTION: prÃ©vois un brunch samedi ou dimanche
ğŸ“… RÃ‰PONSE:
   - Dates: 2025-12-07, 2025-12-08
   - CrÃ©neaux: aucun
   âœ… Attendu: â‰¥2 dates | Obtenu: [33m2[39m

 [32mâœ“[39m src/test/gemini-tests/bug.manual.ts[2m > [22mGemini Tests - BUG[2m > [22m[HAUTE] Brunch samedi ou dimanche â†’ 2 dates[33m 730[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests
[22m[39mâ„¹ï¸ ğŸŒ âœ… Direct Gemini API initialisÃ©e (fetch direct) 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests
[22m[39mâ„¹ï¸ ğŸŒ ğŸ”µ Mode DIRECT GEMINI API activÃ© (bypass Edge Function) 
â„¹ï¸ ğŸŒ VITE_GEMINI_API_KEY configurÃ©e: AIzaSyAXlQ... 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests
[22m[39m
======================================================================
ğŸ§ª TESTS GEMINI - FORM POLLS
======================================================================
   Total prompts: 10
   Prompts filtrÃ©s: 10

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Simples: Satisfaction client
[22m[39m
ğŸ§ª Test: form-1
   Prompt: "CrÃ©e un questionnaire de satisfaction client avec au moins 3 questions : une question Ã  choix unique, une Ã  choix multiples, et une question de rÃ©ponse libre"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'7cc4b96f-367d-48e9-851a-e9a53775afd5'[39m,
  userInputLength: [33m157[39m,
  userInputPreview: [32m'CrÃ©e un questionnaire de satisfaction client avec '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'7cc4b96f-367d-48e9-851a-e9a53775afd5'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'7cc4b96f-367d-48e9-851a-e9a53775afd5'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2183[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'7cc4b96f-367d-48e9-851a-e9a53775afd5'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©e un questionnaire de satisfaction client avec au moins 3 questions : une question Ã  choix unique, une Ã  choix multiples, et une question de rÃ©ponse libre"\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m157[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Simples: Satisfaction client
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1328[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Simples: Satisfaction client
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'7cc4b96f-367d-48e9-851a-e9a53775afd5'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 4 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Simples: Satisfaction client
[22m[39m   â±ï¸ DurÃ©e: 2995ms
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=1.0, Validations=1.0

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[HAUTE] Form Polls - Simples: Satisfaction client[33m 2998[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Simples: Sondage d'opinion
[22m[39m
ğŸ§ª Test: form-2
   Prompt: "Fais un sondage d'opinion sur notre nouveau produit"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'90073714-f010-4389-a409-dbab3d7656c3'[39m,
  userInputLength: [33m51[39m,
  userInputPreview: [32m"Fais un sondage d'opinion sur notre nouveau produi"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'90073714-f010-4389-a409-dbab3d7656c3'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'90073714-f010-4389-a409-dbab3d7656c3'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2077[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'90073714-f010-4389-a409-dbab3d7656c3'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m`Demande: "Fais un sondage d'opinion sur notre nouveau produit"\n`[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m51[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Simples: Sondage d'opinion
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m2006[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Simples: Sondage d'opinion
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'90073714-f010-4389-a409-dbab3d7656c3'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 7 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Simples: Sondage d'opinion
[22m[39m   â±ï¸ DurÃ©e: 4599ms
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=1.0, Validations=1.0

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[MOYENNE] Form Polls - Simples: Sondage d'opinion[33m 4600[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Rating: Ã‰valuation service
[22m[39m
ğŸ§ª Test: form-3
   Prompt: "CrÃ©e un questionnaire avec des notes de 1 Ã  5 pour Ã©valuer notre service"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'edc95824-7e8c-4d7e-950b-ad911ca5a579'[39m,
  userInputLength: [33m72[39m,
  userInputPreview: [32m'CrÃ©e un questionnaire avec des notes de 1 Ã  5 pour'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'edc95824-7e8c-4d7e-950b-ad911ca5a579'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'edc95824-7e8c-4d7e-950b-ad911ca5a579'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2098[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'edc95824-7e8c-4d7e-950b-ad911ca5a579'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©e un questionnaire avec des notes de 1 Ã  5 pour Ã©valuer notre service"\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m72[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Rating: Ã‰valuation service
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1364[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Rating: Ã‰valuation service
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'edc95824-7e8c-4d7e-950b-ad911ca5a579'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 6 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Rating: Ã‰valuation service
[22m[39m   â±ï¸ DurÃ©e: 2575ms
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=1.0, Validations=1.0

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[HAUTE] Form Polls - Rating: Ã‰valuation service[33m 2576[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - NPS: Net Promoter Score
[22m[39m
ğŸ§ª Test: form-4
   Prompt: "CrÃ©e un questionnaire avec une question de type NPS (Net Promoter Score) demandant la probabilitÃ© de recommandation de notre service sur une Ã©chelle de 0 Ã  10"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'a76a2c62-dbff-443d-8364-8419614a355a'[39m,
  userInputLength: [33m158[39m,
  userInputPreview: [32m'CrÃ©e un questionnaire avec une question de type NP'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'a76a2c62-dbff-443d-8364-8419614a355a'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'a76a2c62-dbff-443d-8364-8419614a355a'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2184[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'a76a2c62-dbff-443d-8364-8419614a355a'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©e un questionnaire avec une question de type NPS (Net Promoter Score) demandant la probabilitÃ© de recommandation de notre service sur une Ã©chelle de 0 Ã  10"\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m158[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - NPS: Net Promoter Score
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1409[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - NPS: Net Promoter Score
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'a76a2c62-dbff-443d-8364-8419614a355a'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 5 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - NPS: Net Promoter Score
[22m[39m   â±ï¸ DurÃ©e: 3437ms
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=1.0, Validations=1.0
   âš ï¸ Violations: Mots-clÃ©s manquants: recommandation

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[HAUTE] Form Polls - NPS: Net Promoter Score[33m 3437[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Matrix: Matrice d'Ã©valuation
[22m[39m
ğŸ§ª Test: form-5
   Prompt: "CrÃ©e une matrice d'Ã©valuation pour noter la qualitÃ©, le prix et le service"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'80309b12-d3f6-4c0e-bcd1-db27e46b1ca6'[39m,
  userInputLength: [33m74[39m,
  userInputPreview: [32m"CrÃ©e une matrice d'Ã©valuation pour noter la qualit"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'80309b12-d3f6-4c0e-bcd1-db27e46b1ca6'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'80309b12-d3f6-4c0e-bcd1-db27e46b1ca6'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2100[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'80309b12-d3f6-4c0e-bcd1-db27e46b1ca6'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m`Demande: "CrÃ©e une matrice d'Ã©valuation pour noter la qualitÃ©, le prix et le service"\n`[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m74[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Matrix: Matrice d'Ã©valuation
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1754[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Matrix: Matrice d'Ã©valuation
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'80309b12-d3f6-4c0e-bcd1-db27e46b1ca6'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 5 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Matrix: Matrice d'Ã©valuation
[22m[39m   â±ï¸ DurÃ©e: 3728ms
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=1.0, Validations=1.0

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[HAUTE] Form Polls - Matrix: Matrice d'Ã©valuation[33m 3728[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Validation: Formulaire de contact
[22m[39m
ğŸ§ª Test: form-6
   Prompt: "CrÃ©e un formulaire de contact avec validation email et tÃ©lÃ©phone"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'a4400d11-82ab-4a60-8058-5c68169ec4d9'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m'CrÃ©e un formulaire de contact avec validation emai'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'a4400d11-82ab-4a60-8058-5c68169ec4d9'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'a4400d11-82ab-4a60-8058-5c68169ec4d9'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2090[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'a4400d11-82ab-4a60-8058-5c68169ec4d9'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©e un formulaire de contact avec validation email et tÃ©lÃ©phone"\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Validation: Formulaire de contact
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1096[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Validation: Formulaire de contact
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'a4400d11-82ab-4a60-8058-5c68169ec4d9'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 5 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Validation: Formulaire de contact
[22m[39m   â±ï¸ DurÃ©e: 2319ms
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=1.0, Validations=1.0

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[HAUTE] Form Polls - Validation: Formulaire de contact[33m 2319[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Mix Types: Questionnaire complet
[22m[39m
ğŸ§ª Test: form-7
   Prompt: "CrÃ©e un questionnaire complet avec choix unique, choix multiples et rÃ©ponse libre"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'77f5f351-0b0f-43cf-80e6-db9b31f3b5d7'[39m,
  userInputLength: [33m81[39m,
  userInputPreview: [32m'CrÃ©e un questionnaire complet avec choix unique, c'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'77f5f351-0b0f-43cf-80e6-db9b31f3b5d7'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'77f5f351-0b0f-43cf-80e6-db9b31f3b5d7'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2107[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'77f5f351-0b0f-43cf-80e6-db9b31f3b5d7'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©e un questionnaire complet avec choix unique, choix multiples et rÃ©ponse libre"\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m81[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Mix Types: Questionnaire complet
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1380[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Mix Types: Questionnaire complet
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'77f5f351-0b0f-43cf-80e6-db9b31f3b5d7'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 5 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Mix Types: Questionnaire complet
[22m[39m   â±ï¸ DurÃ©e: 3063ms
   âœ… Score: 3.7/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=0.7, Validations=1.0
   âš ï¸ Violations: Types de questions manquants: text

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[MOYENNE] Form Polls - Mix Types: Questionnaire complet[33m 3063[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Event: PrÃ©fÃ©rences participants
[22m[39m
ğŸ§ª Test: form-8
   Prompt: "CrÃ©e un questionnaire pour recueillir les prÃ©fÃ©rences des participants : type de nourriture prÃ©fÃ©rÃ©, horaire prÃ©fÃ©rÃ©, et allergies alimentaires"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'dc93b337-7670-4e14-8089-220a3e6f56ec'[39m,
  userInputLength: [33m143[39m,
  userInputPreview: [32m'CrÃ©e un questionnaire pour recueillir les prÃ©fÃ©ren'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'dc93b337-7670-4e14-8089-220a3e6f56ec'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'dc93b337-7670-4e14-8089-220a3e6f56ec'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2169[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'dc93b337-7670-4e14-8089-220a3e6f56ec'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©e un questionnaire pour recueillir les prÃ©fÃ©rences des participants : type de nourriture prÃ©fÃ©rÃ©, horaire prÃ©fÃ©rÃ©, et allergies alimentaires"\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m143[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Event: PrÃ©fÃ©rences participants
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1441[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Event: PrÃ©fÃ©rences participants
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'dc93b337-7670-4e14-8089-220a3e6f56ec'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 4 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Event: PrÃ©fÃ©rences participants
[22m[39m   â±ï¸ DurÃ©e: 3312ms
   âœ… Score: 3.7/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=0.7, Validations=1.0
   âš ï¸ Violations: Types de questions manquants: text

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[MOYENNE] Form Polls - Event: PrÃ©fÃ©rences participants[33m 3313[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Feedback: Formulaire de feedback
[22m[39m
ğŸ§ª Test: form-9
   Prompt: "CrÃ©e un formulaire de feedback avec Ã©valuation par Ã©toiles et commentaires"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'92d3155c-1e0a-435d-bed7-189ccc2f4eb7'[39m,
  userInputLength: [33m74[39m,
  userInputPreview: [32m'CrÃ©e un formulaire de feedback avec Ã©valuation par'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'92d3155c-1e0a-435d-bed7-189ccc2f4eb7'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'92d3155c-1e0a-435d-bed7-189ccc2f4eb7'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2100[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'92d3155c-1e0a-435d-bed7-189ccc2f4eb7'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©e un formulaire de feedback avec Ã©valuation par Ã©toiles et commentaires"\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m74[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Feedback: Formulaire de feedback
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1180[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Feedback: Formulaire de feedback
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'92d3155c-1e0a-435d-bed7-189ccc2f4eb7'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 5 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[MOYENNE] Form Polls - Feedback: Formulaire de feedback
[22m[39m   â±ï¸ DurÃ©e: 2705ms
   âœ… Score: 3.5/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=0.5, Validations=1.0
   âš ï¸ Violations: Types de questions manquants: text; Mots-clÃ©s manquants: feedback

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[MOYENNE] Form Polls - Feedback: Formulaire de feedback[33m 2706[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Complex: EnquÃªte client
[22m[39m
ğŸ§ª Test: form-10
   Prompt: "CrÃ©e un questionnaire d'enquÃªte client avec : une matrice d'Ã©valuation pour noter plusieurs aspects, des questions de choix multiples avec maximum 3 rÃ©ponses, et une question email avec validation"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'81ad788c-3216-41fa-ac4e-cc9598f1f227'[39m,
  userInputLength: [33m196[39m,
  userInputPreview: [32m"CrÃ©e un questionnaire d'enquÃªte client avec : une "[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'81ad788c-3216-41fa-ac4e-cc9598f1f227'[39m, pollType: [32m'form'[39m }
â„¹ï¸ ğŸŒ Generating Form Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ Form Poll mode: GENERATE (demande simple) 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'81ad788c-3216-41fa-ac4e-cc9598f1f227'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m2222[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'81ad788c-3216-41fa-ac4e-cc9598f1f227'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en crÃ©ation de questionnaires et formulaires.\n"[39m +
    [32m'\n'[39m +
    [32m'OBJECTIF: CrÃ©er un questionnaire pertinent Ã  partir de la demande utilisateur.\n'[39m +
    [32m'\n'[39m +
    [32m`Demande: "CrÃ©e un questionnaire d'enquÃªte client avec : une matrice d'Ã©valuation pour noter plusieurs aspects, des questions de choix multiples avec maximum 3 rÃ©ponses, et une question email avec validation"\n`[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES DE GÃ‰NÃ‰RATION (MODE CRÃ‰ATIF):\n'[39m +
    [32m'1. **TITRE** - Clair et descriptif (max 100 caractÃ¨res)\n'[39m +
    [32m'2. **QUESTIONS** - 3 Ã  10 questions pertinentes et logiques\n'[39m +
    [32m'3. **TYPES DE QUESTIONS**:\n'[39m +
    [32m' - "single" : Choix unique (radio buttons) - pour sÃ©lectionner UNE option\n'[39m +
    [32m' - "multiple" : Choix multiple (checkboxes) - pour sÃ©lectionner PLUSIEURS options\n'[39m +
    [32m' - "text" : RÃ©ponse libre courte (une ligne)\n'[39m +
    [32m' - "long-text" : RÃ©ponse libre longue (paragraphe)\n'[39m +
    [32m' - "rating" : Note sur 5 ou 10 Ã©toiles/chiffres\n'[39m +
    [32m' - "nps" : Net Promoter Score (0-10)\n'[39m +
    [32m` - "matrix" : Grille d'Ã©valuation (plusieurs aspects sur une mÃªme Ã©chelle)\n`[39m +
    [32m' - "date" : SÃ©lection de date/heure (si pertinent)\n'[39m +
    [32m'\n'[39m +
    [32m'4. **OPTIONS** - Pour single/multiple/matrix, fournir des options claires et distinctes.\n'[39m +
    [32m'5. **LOGIQUE** - Ordre logique des questions (du gÃ©nÃ©ral au particulier).\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON REQUIS:\n'[39m +
    [32m'{\n'[39m +
    [32m'"title": "Titre du questionnaire",\n'[39m +
    [32m'"description": "Description optionnelle (1-2 phrases)",\n'[39m +
    [32m'"questions": [\n'[39m +
    [32m'  {\n'[39m +
    [32m'    "title": "Texte de la question",\n'[39m +
    [32m'    "type": "single" | "multiple" | "text" | "rating" | "nps" | "matrix" | "date",\n'[39m +
    [32m'    "required": true | false,\n'[39m +
    [32m'    "options": ["Option 1", "Option 2", "..."], // SEULEMENT pour single/multiple\n'[39m +
    [32m'    "maxChoices": 3, // SEULEMENT pour multiple (optionnel)\n'[39m +
    [32m`    "placeholder": "Texte d'aide", // SEULEMENT pour text (optionnel)\n`[39m +
    [32m'    "maxLength": 500, // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "validationType": "email" | "phone" | "url" | "number" | "date", // SEULEMENT pour text (optionnel)\n'[39m +
    [32m'    "ratingScale": 5, // SEULEMENT pour rating (5 ou 10)\n'[39m +
    [32m'    "ratingStyle": "stars", // SEULEMENT pour rating (stars/numbers/emojis)\n'[39m +
    [32m'    "matrixRows": [{"id": "r1", "label": "Aspect 1"}], // SEULEMENT pour matrix\n'[39m +
    [32m'    "matrixColumns": [{"id": "c1", "label": "Mauvais"}, {"id": "c2", "label": "Bon"}] // SEULEMENT pour matrix\n'[39m +
    [32m'  }\n'[39m +
    [32m'],\n'[39m +
    [32m'"type": "form"\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m"RÃ©ponds UNIQUEMENT avec le JSON, rien d'autre."[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m196[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Complex: EnquÃªte client
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m2168[39m }

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Complex: EnquÃªte client
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'81ad788c-3216-41fa-ac4e-cc9598f1f227'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Form Poll parsed: 6 questions 
â„¹ï¸ ğŸŒ Form Poll successfully generated 

[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests[2m > [22m[2m[HAUTE] Form Polls - Complex: EnquÃªte client
[22m[39m   â±ï¸ DurÃ©e: 4142ms
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Questions=1.0, Types=1.0, Validations=1.0

 [32mâœ“[39m src/test/gemini-form-polls.test.ts[2m > [22mGemini Form Polls Tests[2m > [22m[HAUTE] Form Polls - Complex: EnquÃªte client[33m 4143[2mms[22m[39m
[90mstdout[2m | src/test/gemini-form-polls.test.ts[2m > [22m[2mGemini Form Polls Tests
[22m[39m
ğŸ“Š Rapport gÃ©nÃ©rÃ©: C:\Users\Julien Fritsch\Documents\GitHub\DooDates-bug\tests\reports\gemini-form-polls-report.md

======================================================================
ğŸ“Š RÃ‰SUMÃ‰ DES TESTS
======================================================================
   âœ… RÃ©ussis: 10/10
   âŒ Ã‰chouÃ©s: 0/10
   ğŸ“ˆ Score: 38.83/40 (97.1%)
======================================================================

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s
[22m[39mâ„¹ï¸ ğŸŒ âœ… Direct Gemini API initialisÃ©e (fetch direct) 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s
[22m[39mâ„¹ï¸ ğŸŒ ğŸ”µ Mode DIRECT GEMINI API activÃ© (bypass Edge Function) 
â„¹ï¸ ğŸŒ VITE_GEMINI_API_KEY configurÃ©e: AIzaSyAXlQ... 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s
[22m[39m
============================================================
ğŸ“‹ CONFIGURATION DES TESTS
============================================================
   Total prompts disponibles: 60
   Prompts sÃ©lectionnÃ©s: 60
============================================================

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39m
ğŸ”„ Test: demo-client-mardi-mercredi (tentative 1/3)
   Prompt: "Propose-moi trois crÃ©neaux horaires mardi ou mercredi prochain pour la dÃ©mo client."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'f21c8959-fed4-415a-92a1-ad0dc7cff64c'[39m,
  userInputLength: [33m83[39m,
  userInputPreview: [32m'Propose-moi trois crÃ©neaux horaires mardi ou mercr'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'f21c8959-fed4-415a-92a1-ad0dc7cff64c'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'f21c8959-fed4-415a-92a1-ad0dc7cff64c'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m686[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'f21c8959-fed4-415a-92a1-ad0dc7cff64c'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose-moi trois crÃ©neaux horaires mardi ou mercredi prochain pour la dÃ©mo client."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m83[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m462[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] DÃ©mo client mardi/mercredi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:26.943Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'f21c8959-fed4-415a-92a1-ad0dc7cff64c'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39m   â±ï¸ DurÃ©e: 1622ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] DÃ©mo client mardi/mercredi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39m
ğŸ”„ Test: demo-client-mardi-mercredi (tentative 2/3)
   Prompt: "Propose-moi trois crÃ©neaux horaires mardi ou mercredi prochain pour la dÃ©mo client."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'e4a7e8a9-faaa-45d3-8f43-d547ea0ffe09'[39m,
  userInputLength: [33m83[39m,
  userInputPreview: [32m'Propose-moi trois crÃ©neaux horaires mardi ou mercr'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'e4a7e8a9-faaa-45d3-8f43-d547ea0ffe09'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'e4a7e8a9-faaa-45d3-8f43-d547ea0ffe09'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m686[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'e4a7e8a9-faaa-45d3-8f43-d547ea0ffe09'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose-moi trois crÃ©neaux horaires mardi ou mercredi prochain pour la dÃ©mo client."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m83[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m505[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'e4a7e8a9-faaa-45d3-8f43-d547ea0ffe09'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] DÃ©mo client mardi/mercredi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:30.363Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39m   â±ï¸ DurÃ©e: 1414ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] DÃ©mo client mardi/mercredi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39m
ğŸ”„ Test: demo-client-mardi-mercredi (tentative 3/3)
   Prompt: "Propose-moi trois crÃ©neaux horaires mardi ou mercredi prochain pour la dÃ©mo client."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'c6f71846-eba4-4d48-bdd1-c850f8fed4ce'[39m,
  userInputLength: [33m83[39m,
  userInputPreview: [32m'Propose-moi trois crÃ©neaux horaires mardi ou mercr'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'c6f71846-eba4-4d48-bdd1-c850f8fed4ce'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'c6f71846-eba4-4d48-bdd1-c850f8fed4ce'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m686[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'c6f71846-eba4-4d48-bdd1-c850f8fed4ce'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose-moi trois crÃ©neaux horaires mardi ou mercredi prochain pour la dÃ©mo client."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m83[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m468[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'c6f71846-eba4-4d48-bdd1-c850f8fed4ce'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] DÃ©mo client mardi/mercredi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:33.836Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ©mo client mardi/mercredi
[22m[39m   â±ï¸ DurÃ©e: 1462ms

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] DÃ©mo client mardi/mercredi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point budget dans deux semaines
[22m[39m
ğŸ”„ Test: point-budget-deux-semaines (tentative 1/3)
   Prompt: "Planifie un point budget dans deux semaines autour de 9h30."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'437aab3f-72ae-48f1-9021-a09917bb1723'[39m,
  userInputLength: [33m59[39m,
  userInputPreview: [32m'Planifie un point budget dans deux semaines autour'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'437aab3f-72ae-48f1-9021-a09917bb1723'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'437aab3f-72ae-48f1-9021-a09917bb1723'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m662[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'437aab3f-72ae-48f1-9021-a09917bb1723'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie un point budget dans deux semaines autour de 9h30."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m59[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] DÃ©mo client mardi/mercredi[33m 8517[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point budget dans deux semaines
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m164[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point budget dans deux semaines
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'437aab3f-72ae-48f1-9021-a09917bb1723'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point budget dans deux semaines
[22m[39m   â±ï¸ DurÃ©e: 914ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Point budget"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 1 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] Point budget dans deux semaines[33m 915[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39m
ğŸ”„ Test: reunion-projet-semaine-18 (tentative 1/3)
   Prompt: "GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t en fin de journÃ©e."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'700ef58c-d44d-455b-a92e-261cf63e8559'[39m,
  userInputLength: [33m69[39m,
  userInputPreview: [32m'GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'700ef58c-d44d-455b-a92e-261cf63e8559'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'700ef58c-d44d-455b-a92e-261cf63e8559'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m672[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'700ef58c-d44d-455b-a92e-261cf63e8559'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t en fin de journÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m69[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m294[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union projet semaine du 18
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'700ef58c-d44d-455b-a92e-261cf63e8559'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:35.871Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39m   â±ï¸ DurÃ©e: 1119ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union projet semaine du 18
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39m
ğŸ”„ Test: reunion-projet-semaine-18 (tentative 2/3)
   Prompt: "GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t en fin de journÃ©e."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'7149f9e2-5f5a-4c2c-9a71-d7d0bd1f64d4'[39m,
  userInputLength: [33m69[39m,
  userInputPreview: [32m'GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'7149f9e2-5f5a-4c2c-9a71-d7d0bd1f64d4'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'7149f9e2-5f5a-4c2c-9a71-d7d0bd1f64d4'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m672[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'7149f9e2-5f5a-4c2c-9a71-d7d0bd1f64d4'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t en fin de journÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m69[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m303[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'7149f9e2-5f5a-4c2c-9a71-d7d0bd1f64d4'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union projet semaine du 18
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:39.113Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39m   â±ï¸ DurÃ©e: 1229ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union projet semaine du 18
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39m
ğŸ”„ Test: reunion-projet-semaine-18 (tentative 3/3)
   Prompt: "GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t en fin de journÃ©e."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'20590822-6c74-410d-9805-5e680eeb8b3d'[39m,
  userInputLength: [33m69[39m,
  userInputPreview: [32m'GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'20590822-6c74-410d-9805-5e680eeb8b3d'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'20590822-6c74-410d-9805-5e680eeb8b3d'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m672[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'20590822-6c74-410d-9805-5e680eeb8b3d'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "GÃ©nÃ¨re une rÃ©union projet la semaine du 18, plutÃ´t en fin de journÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m69[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m386[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'20590822-6c74-410d-9805-5e680eeb8b3d'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union projet semaine du 18
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:42.618Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union projet semaine du 18
[22m[39m   â±ï¸ DurÃ©e: 1496ms

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union projet semaine du 18
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39m
ğŸ”„ Test: revue-slides-vendredi (tentative 1/3)
   Prompt: "Trouve un crÃ©neau avant vendredi midi pour passer en revue les slides."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'e9fcb168-99d1-474b-83c1-d4704c013811'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m'Trouve un crÃ©neau avant vendredi midi pour passer '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'e9fcb168-99d1-474b-83c1-d4704c013811'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'e9fcb168-99d1-474b-83c1-d4704c013811'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'e9fcb168-99d1-474b-83c1-d4704c013811'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un crÃ©neau avant vendredi midi pour passer en revue les slides."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] RÃ©union projet semaine du 18[33m 7867[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m265[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Revue slides avant vendredi midi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:43.600Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'e9fcb168-99d1-474b-83c1-d4704c013811'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39m   â±ï¸ DurÃ©e: 982ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Revue slides avant vendredi midi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39m
ğŸ”„ Test: revue-slides-vendredi (tentative 2/3)
   Prompt: "Trouve un crÃ©neau avant vendredi midi pour passer en revue les slides."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'1a86052a-5502-4988-92fe-65c66f00b0bd'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m'Trouve un crÃ©neau avant vendredi midi pour passer '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'1a86052a-5502-4988-92fe-65c66f00b0bd'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'1a86052a-5502-4988-92fe-65c66f00b0bd'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'1a86052a-5502-4988-92fe-65c66f00b0bd'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un crÃ©neau avant vendredi midi pour passer en revue les slides."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m250[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'1a86052a-5502-4988-92fe-65c66f00b0bd'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Revue slides avant vendredi midi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:46.491Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39m   â±ï¸ DurÃ©e: 882ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Revue slides avant vendredi midi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39m
ğŸ”„ Test: revue-slides-vendredi (tentative 3/3)
   Prompt: "Trouve un crÃ©neau avant vendredi midi pour passer en revue les slides."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'8b1333a1-bd13-45fe-9455-ec2c90fe9cf1'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m'Trouve un crÃ©neau avant vendredi midi pour passer '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'8b1333a1-bd13-45fe-9455-ec2c90fe9cf1'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'8b1333a1-bd13-45fe-9455-ec2c90fe9cf1'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'8b1333a1-bd13-45fe-9455-ec2c90fe9cf1'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un crÃ©neau avant vendredi midi pour passer en revue les slides."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m237[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'8b1333a1-bd13-45fe-9455-ec2c90fe9cf1'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Revue slides avant vendredi midi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:49.608Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Revue slides avant vendredi midi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Revue slides avant vendredi midi
[22m[39m   â±ï¸ DurÃ©e: 1102ms

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Stand-up express demain matin
[22m[39m
ğŸ”„ Test: standup-demain-matin (tentative 1/3)
   Prompt: "Organise un stand-up express demain matin pour l'Ã©quipe support."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'1a0560a5-cb67-4246-b6e8-cb392a475740'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m"Organise un stand-up express demain matin pour l'Ã©"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'1a0560a5-cb67-4246-b6e8-cb392a475740'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'1a0560a5-cb67-4246-b6e8-cb392a475740'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'1a0560a5-cb67-4246-b6e8-cb392a475740'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise un stand-up express demain matin pour l'Ã©quipe support."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] Revue slides avant vendredi midi[33m 6990[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Stand-up express demain matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m239[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Stand-up express demain matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'1a0560a5-cb67-4246-b6e8-cb392a475740'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Stand-up express demain matin
[22m[39m   â±ï¸ DurÃ©e: 808ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Stand-up express Ã©quipe support"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Stand-up rapide de l'Ã©quipe support"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 1 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] Stand-up express demain matin[33m 808[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39m
ğŸ”„ Test: reunion-lancement-mardi-jeudi (tentative 1/3)
   Prompt: "Planifie la rÃ©union de lancement la semaine prochaine, idÃ©alement mardi 14h ou jeudi 10h."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'624ea986-8986-469b-bd03-4bfd048438a1'[39m,
  userInputLength: [33m89[39m,
  userInputPreview: [32m'Planifie la rÃ©union de lancement la semaine procha'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'624ea986-8986-469b-bd03-4bfd048438a1'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'624ea986-8986-469b-bd03-4bfd048438a1'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m692[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'624ea986-8986-469b-bd03-4bfd048438a1'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie la rÃ©union de lancement la semaine prochaine, idÃ©alement mardi 14h ou jeudi 10h."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m89[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m332[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:51.598Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'624ea986-8986-469b-bd03-4bfd048438a1'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39m   â±ï¸ DurÃ©e: 1181ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39m
ğŸ”„ Test: reunion-lancement-mardi-jeudi (tentative 2/3)
   Prompt: "Planifie la rÃ©union de lancement la semaine prochaine, idÃ©alement mardi 14h ou jeudi 10h."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'f5cc2af1-d8d1-4ee0-a107-93882db8a220'[39m,
  userInputLength: [33m89[39m,
  userInputPreview: [32m'Planifie la rÃ©union de lancement la semaine procha'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'f5cc2af1-d8d1-4ee0-a107-93882db8a220'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'f5cc2af1-d8d1-4ee0-a107-93882db8a220'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m692[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'f5cc2af1-d8d1-4ee0-a107-93882db8a220'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie la rÃ©union de lancement la semaine prochaine, idÃ©alement mardi 14h ou jeudi 10h."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m89[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m353[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'f5cc2af1-d8d1-4ee0-a107-93882db8a220'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:55.024Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39m   â±ï¸ DurÃ©e: 1419ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39m
ğŸ”„ Test: reunion-lancement-mardi-jeudi (tentative 3/3)
   Prompt: "Planifie la rÃ©union de lancement la semaine prochaine, idÃ©alement mardi 14h ou jeudi 10h."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'73c73071-9adf-4c05-a29d-68aa823315fd'[39m,
  userInputLength: [33m89[39m,
  userInputPreview: [32m'Planifie la rÃ©union de lancement la semaine procha'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'73c73071-9adf-4c05-a29d-68aa823315fd'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'73c73071-9adf-4c05-a29d-68aa823315fd'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m692[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'73c73071-9adf-4c05-a29d-68aa823315fd'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie la rÃ©union de lancement la semaine prochaine, idÃ©alement mardi 14h ou jeudi 10h."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m89[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m385[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'73c73071-9adf-4c05-a29d-68aa823315fd'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:40:58.494Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h
[22m[39m   â±ï¸ DurÃ©e: 1464ms

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] CrÃ©neau client canadien (fuseau -5h)
[22m[39m
ğŸ”„ Test: client-canadien-fuseau (tentative 1/3)
   Prompt: "PrÃ©vois un crÃ©neau avec le client canadien en fin d'aprÃ¨s-midi (fuseau -5h)."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'001f7dfa-bbda-40ab-94fc-4a1bffd55ee3'[39m,
  userInputLength: [33m76[39m,
  userInputPreview: [32m'PrÃ©vois un crÃ©neau avec le client canadien en fin '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'001f7dfa-bbda-40ab-94fc-4a1bffd55ee3'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'001f7dfa-bbda-40ab-94fc-4a1bffd55ee3'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m679[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'001f7dfa-bbda-40ab-94fc-4a1bffd55ee3'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "PrÃ©vois un crÃ©neau avec le client canadien en fin d'aprÃ¨s-midi (fuseau -5h)."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m76[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] RÃ©union de lancement mardi 14h / jeudi 10h[33m 8078[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] CrÃ©neau client canadien (fuseau -5h)
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m471[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] CrÃ©neau client canadien (fuseau -5h)
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'001f7dfa-bbda-40ab-94fc-4a1bffd55ee3'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] CrÃ©neau client canadien (fuseau -5h)
[22m[39m   â±ï¸ DurÃ©e: 1478ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "CrÃ©neau client canadien"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "CrÃ©neau proposÃ© pour le client canadien (fuseau -5h)"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 4 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] CrÃ©neau client canadien (fuseau -5h)[33m 1478[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39m
ğŸ”„ Test: point-prod-lundi-mardi (tentative 1/3)
   Prompt: "Bloque 45 minutes lundi ou mardi matin pour faire le point prod."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'44b7cfcd-a89c-4565-bf27-1129301c4d75'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m'Bloque 45 minutes lundi ou mardi matin pour faire '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'44b7cfcd-a89c-4565-bf27-1129301c4d75'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'44b7cfcd-a89c-4565-bf27-1129301c4d75'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'44b7cfcd-a89c-4565-bf27-1129301c4d75'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Bloque 45 minutes lundi ou mardi matin pour faire le point prod."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m817[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Point prod lundi/mardi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:02.588Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'44b7cfcd-a89c-4565-bf27-1129301c4d75'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39m   â±ï¸ DurÃ©e: 2614ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Point prod lundi/mardi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39m
ğŸ”„ Test: point-prod-lundi-mardi (tentative 2/3)
   Prompt: "Bloque 45 minutes lundi ou mardi matin pour faire le point prod."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'd122c41e-56ec-49e1-867b-b0a4286b92a0'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m'Bloque 45 minutes lundi ou mardi matin pour faire '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'd122c41e-56ec-49e1-867b-b0a4286b92a0'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'd122c41e-56ec-49e1-867b-b0a4286b92a0'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'd122c41e-56ec-49e1-867b-b0a4286b92a0'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Bloque 45 minutes lundi ou mardi matin pour faire le point prod."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1184[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'd122c41e-56ec-49e1-867b-b0a4286b92a0'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Point prod lundi/mardi matin
ğŸš¨ DooDates Error: {
  message: 'All dates were in the past, suggestion rejected',
  name: 'DooDatesError',
  stack: 'DooDatesError: All dates were in the past, suggestion rejected\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.parseGeminiResponse (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:1160:44)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:479:82)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39m   â±ï¸ DurÃ©e: 3969ms
   â³ Attente 2000ms avant retry...

    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:08.558Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Toutes les dates proposÃ©es sont dans le passÃ©'
}
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:08.559Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Point prod lundi/mardi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39m
ğŸ”„ Test: point-prod-lundi-mardi (tentative 3/3)
   Prompt: "Bloque 45 minutes lundi ou mardi matin pour faire le point prod."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'347c677a-57d1-4186-b766-dfa827656ef0'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m'Bloque 45 minutes lundi ou mardi matin pour faire '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'347c677a-57d1-4186-b766-dfa827656ef0'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'347c677a-57d1-4186-b766-dfa827656ef0'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'347c677a-57d1-4186-b766-dfa827656ef0'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Bloque 45 minutes lundi ou mardi matin pour faire le point prod."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1155[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'347c677a-57d1-4186-b766-dfa827656ef0'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] Point prod lundi/mardi matin
[22m[39m   â±ï¸ DurÃ©e: 3578ms

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Point prod lundi/mardi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:14.141Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PROFESSIONNEL (10 tests) > [MOYENNE] Point prod lundi/mardi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[HAUTE] DÃ©jeuner partenariats mercredi 11h-13h
[22m[39m
ğŸ”„ Test: dejeuner-partenariats-mercredi (tentative 1/3)
   Prompt: "Cherche un crÃ©neau entre 11h et 13h mercredi pour un dÃ©jeuner partenariats."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'7c29a4db-74c5-4ea7-b3a6-fbca5f85609d'[39m,
  userInputLength: [33m75[39m,
  userInputPreview: [32m'Cherche un crÃ©neau entre 11h et 13h mercredi pour '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'7c29a4db-74c5-4ea7-b3a6-fbca5f85609d'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'7c29a4db-74c5-4ea7-b3a6-fbca5f85609d'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m678[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'7c29a4db-74c5-4ea7-b3a6-fbca5f85609d'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Cherche un crÃ©neau entre 11h et 13h mercredi pour un dÃ©jeuner partenariats."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m75[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] Point prod lundi/mardi matin[33m 14168[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[HAUTE] DÃ©jeuner partenariats mercredi 11h-13h
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m236[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[HAUTE] DÃ©jeuner partenariats mercredi 11h-13h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'7c29a4db-74c5-4ea7-b3a6-fbca5f85609d'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[HAUTE] DÃ©jeuner partenariats mercredi 11h-13h
[22m[39m   â±ï¸ DurÃ©e: 1139ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "DÃ©jeuner partenariats"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "CrÃ©neau pour dÃ©jeuner partenariats"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 1 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[HAUTE] DÃ©jeuner partenariats mercredi 11h-13h[33m 1138[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©pÃ©tition prÃ©sentation dans quinze jours
[22m[39m
ğŸ”„ Test: repetition-presentation (tentative 1/3)
   Prompt: "Propose deux dates dans quinze jours pour rÃ©pÃ©ter la prÃ©sentation."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'e4f8b14b-a609-44c0-a333-a050236c2778'[39m,
  userInputLength: [33m66[39m,
  userInputPreview: [32m'Propose deux dates dans quinze jours pour rÃ©pÃ©ter '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'e4f8b14b-a609-44c0-a333-a050236c2778'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'e4f8b14b-a609-44c0-a333-a050236c2778'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m669[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'e4f8b14b-a609-44c0-a333-a050236c2778'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose deux dates dans quinze jours pour rÃ©pÃ©ter la prÃ©sentation."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m66[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©pÃ©tition prÃ©sentation dans quinze jours
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m200[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©pÃ©tition prÃ©sentation dans quinze jours
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'e4f8b14b-a609-44c0-a333-a050236c2778'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPROFESSIONNEL (10 tests)[2m > [22m[2m[MOYENNE] RÃ©pÃ©tition prÃ©sentation dans quinze jours
[22m[39m   â±ï¸ DurÃ©e: 1072ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©pÃ©tition prÃ©sentation"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Deux dates possibles pour rÃ©pÃ©ter la prÃ©sentation dans quinze jours."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPROFESSIONNEL (10 tests)[2m > [22m[MOYENNE] RÃ©pÃ©tition prÃ©sentation dans quinze jours[33m 1073[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Brunch week-end 23/24
[22m[39m
ğŸ”„ Test: brunch-samedi-23-dimanche-24 (tentative 1/3)
   Prompt: "Calcule un brunch samedi 23 ou dimanche 24."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'5f0c7daa-d51b-43a9-a8b3-8466c7be5698'[39m,
  userInputLength: [33m43[39m,
  userInputPreview: [32m'Calcule un brunch samedi 23 ou dimanche 24.'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'5f0c7daa-d51b-43a9-a8b3-8466c7be5698'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'5f0c7daa-d51b-43a9-a8b3-8466c7be5698'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m646[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'5f0c7daa-d51b-43a9-a8b3-8466c7be5698'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Calcule un brunch samedi 23 ou dimanche 24."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m43[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Brunch week-end 23/24
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m409[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Brunch week-end 23/24
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'5f0c7daa-d51b-43a9-a8b3-8466c7be5698'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Brunch week-end 23/24
[22m[39m   â±ï¸ DurÃ©e: 1485ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Brunch Samedi/Dimanche"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Brunch le samedi 23 ou dimanche 24."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 2 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[HAUTE] Brunch week-end 23/24[33m 1486[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39m
ğŸ”„ Test: escape-game-fin-mars (tentative 1/3)
   Prompt: "Propose trois soirÃ©es pour un escape game fin mars."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'71861256-232f-4d9b-acc3-1b96626a74b8'[39m,
  userInputLength: [33m51[39m,
  userInputPreview: [32m'Propose trois soirÃ©es pour un escape game fin mars'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'71861256-232f-4d9b-acc3-1b96626a74b8'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'71861256-232f-4d9b-acc3-1b96626a74b8'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m654[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'71861256-232f-4d9b-acc3-1b96626a74b8'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose trois soirÃ©es pour un escape game fin mars."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m51[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m429[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Escape game fin mars
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:19.321Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'71861256-232f-4d9b-acc3-1b96626a74b8'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39m   â±ï¸ DurÃ©e: 1482ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Escape game fin mars
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39m
ğŸ”„ Test: escape-game-fin-mars (tentative 2/3)
   Prompt: "Propose trois soirÃ©es pour un escape game fin mars."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'5804d0df-cac7-42c1-95d3-fdc09554d5e1'[39m,
  userInputLength: [33m51[39m,
  userInputPreview: [32m'Propose trois soirÃ©es pour un escape game fin mars'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'5804d0df-cac7-42c1-95d3-fdc09554d5e1'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'5804d0df-cac7-42c1-95d3-fdc09554d5e1'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m654[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'5804d0df-cac7-42c1-95d3-fdc09554d5e1'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose trois soirÃ©es pour un escape game fin mars."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m51[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m437[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'5804d0df-cac7-42c1-95d3-fdc09554d5e1'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Escape game fin mars
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:23.009Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39m   â±ï¸ DurÃ©e: 1682ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Escape game fin mars
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39m
ğŸ”„ Test: escape-game-fin-mars (tentative 3/3)
   Prompt: "Propose trois soirÃ©es pour un escape game fin mars."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'11e54fb9-db25-49ef-8950-d66a6e9b7abc'[39m,
  userInputLength: [33m51[39m,
  userInputPreview: [32m'Propose trois soirÃ©es pour un escape game fin mars'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'11e54fb9-db25-49ef-8950-d66a6e9b7abc'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'11e54fb9-db25-49ef-8950-d66a6e9b7abc'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m654[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'11e54fb9-db25-49ef-8950-d66a6e9b7abc'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose trois soirÃ©es pour un escape game fin mars."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m51[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m439[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'11e54fb9-db25-49ef-8950-d66a6e9b7abc'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Escape game fin mars
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:26.652Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Escape game fin mars
[22m[39m   â±ï¸ DurÃ©e: 1633ms

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Escape game fin mars
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39m
ğŸ”„ Test: visite-musee-semaine-prochaine (tentative 1/3)
   Prompt: "Trouve un aprÃ¨s-midi libre la semaine prochaine pour la visite au musÃ©e."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'340ba06e-878c-426f-8f30-9325c4fe2f89'[39m,
  userInputLength: [33m72[39m,
  userInputPreview: [32m'Trouve un aprÃ¨s-midi libre la semaine prochaine po'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'340ba06e-878c-426f-8f30-9325c4fe2f89'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'340ba06e-878c-426f-8f30-9325c4fe2f89'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m675[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'340ba06e-878c-426f-8f30-9325c4fe2f89'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un aprÃ¨s-midi libre la semaine prochaine pour la visite au musÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m72[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[MOYENNE] Escape game fin mars[33m 8813[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m319[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Visite musÃ©e semaine prochaine
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:27.900Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'340ba06e-878c-426f-8f30-9325c4fe2f89'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39m   â±ï¸ DurÃ©e: 1248ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Visite musÃ©e semaine prochaine
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39m
ğŸ”„ Test: visite-musee-semaine-prochaine (tentative 2/3)
   Prompt: "Trouve un aprÃ¨s-midi libre la semaine prochaine pour la visite au musÃ©e."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'73527d80-7616-40dd-aa5e-b3114118a311'[39m,
  userInputLength: [33m72[39m,
  userInputPreview: [32m'Trouve un aprÃ¨s-midi libre la semaine prochaine po'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'73527d80-7616-40dd-aa5e-b3114118a311'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'73527d80-7616-40dd-aa5e-b3114118a311'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m675[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'73527d80-7616-40dd-aa5e-b3114118a311'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un aprÃ¨s-midi libre la semaine prochaine pour la visite au musÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m72[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m313[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'73527d80-7616-40dd-aa5e-b3114118a311'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Visite musÃ©e semaine prochaine
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:31.216Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39m   â±ï¸ DurÃ©e: 1310ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Visite musÃ©e semaine prochaine
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39m
ğŸ”„ Test: visite-musee-semaine-prochaine (tentative 3/3)
   Prompt: "Trouve un aprÃ¨s-midi libre la semaine prochaine pour la visite au musÃ©e."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'ac83b157-e787-4c42-8853-f784bff11919'[39m,
  userInputLength: [33m72[39m,
  userInputPreview: [32m'Trouve un aprÃ¨s-midi libre la semaine prochaine po'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'ac83b157-e787-4c42-8853-f784bff11919'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'ac83b157-e787-4c42-8853-f784bff11919'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m675[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'ac83b157-e787-4c42-8853-f784bff11919'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un aprÃ¨s-midi libre la semaine prochaine pour la visite au musÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m72[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m597[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Visite musÃ©e semaine prochaine
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:35.039Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'ac83b157-e787-4c42-8853-f784bff11919'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] Visite musÃ©e semaine prochaine
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande


[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Visite musÃ©e semaine prochaine
[22m[39m   â±ï¸ DurÃ©e: 1816ms

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39m
ğŸ”„ Test: footing-vendredi-samedi (tentative 1/3)
   Prompt: "Bloque un crÃ©neau vendredi soir ou samedi matin pour un footing."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'42b97899-b41d-43ea-8555-ca14e7ec3f68'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m'Bloque un crÃ©neau vendredi soir ou samedi matin po'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'42b97899-b41d-43ea-8555-ca14e7ec3f68'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'42b97899-b41d-43ea-8555-ca14e7ec3f68'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'42b97899-b41d-43ea-8555-ca14e7ec3f68'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Bloque un crÃ©neau vendredi soir ou samedi matin pour un footing."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[MOYENNE] Visite musÃ©e semaine prochaine[33m 8387[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m297[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] Footing vendredi soir / samedi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:36.050Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'42b97899-b41d-43ea-8555-ca14e7ec3f68'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39m   â±ï¸ DurÃ©e: 1011ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] Footing vendredi soir / samedi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39m
ğŸ”„ Test: footing-vendredi-samedi (tentative 2/3)
   Prompt: "Bloque un crÃ©neau vendredi soir ou samedi matin pour un footing."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'ceac9ee2-c382-4e7c-9a8d-86ce6f9d034e'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m'Bloque un crÃ©neau vendredi soir ou samedi matin po'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'ceac9ee2-c382-4e7c-9a8d-86ce6f9d034e'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'ceac9ee2-c382-4e7c-9a8d-86ce6f9d034e'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'ceac9ee2-c382-4e7c-9a8d-86ce6f9d034e'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Bloque un crÃ©neau vendredi soir ou samedi matin pour un footing."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m329[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'ceac9ee2-c382-4e7c-9a8d-86ce6f9d034e'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] Footing vendredi soir / samedi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:39.200Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39m   â±ï¸ DurÃ©e: 1140ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] Footing vendredi soir / samedi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39m
ğŸ”„ Test: footing-vendredi-samedi (tentative 3/3)
   Prompt: "Bloque un crÃ©neau vendredi soir ou samedi matin pour un footing."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'844bc45b-fb34-40b1-8950-bbee2adc0650'[39m,
  userInputLength: [33m64[39m,
  userInputPreview: [32m'Bloque un crÃ©neau vendredi soir ou samedi matin po'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'844bc45b-fb34-40b1-8950-bbee2adc0650'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'844bc45b-fb34-40b1-8950-bbee2adc0650'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m667[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'844bc45b-fb34-40b1-8950-bbee2adc0650'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Bloque un crÃ©neau vendredi soir ou samedi matin pour un footing."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m64[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m297[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'844bc45b-fb34-40b1-8950-bbee2adc0650'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] Footing vendredi soir / samedi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:42.359Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] Footing vendredi soir / samedi matin
[22m[39m   â±ï¸ DurÃ©e: 1158ms
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}


stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] Footing vendredi soir / samedi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ®ner cousins avril
[22m[39m
ğŸ”„ Test: diner-cousins-avril (tentative 1/3)
   Prompt: "Organise un dÃ®ner avec les cousins courant avril, plutÃ´t le week-end."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'1039882a-ba1e-4b62-b69b-f4928a2eef67'[39m,
  userInputLength: [33m69[39m,
  userInputPreview: [32m'Organise un dÃ®ner avec les cousins courant avril, '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'1039882a-ba1e-4b62-b69b-f4928a2eef67'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'1039882a-ba1e-4b62-b69b-f4928a2eef67'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m672[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'1039882a-ba1e-4b62-b69b-f4928a2eef67'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise un dÃ®ner avec les cousins courant avril, plutÃ´t le week-end."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m69[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[HAUTE] Footing vendredi soir / samedi matin[33m 7319[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ®ner cousins avril
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m880[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] DÃ®ner cousins avril
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:44.856Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ®ner cousins avril
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'1039882a-ba1e-4b62-b69b-f4928a2eef67'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ®ner cousins avril
[22m[39m   â±ï¸ DurÃ©e: 2497ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [MOYENNE] DÃ®ner cousins avril
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ®ner cousins avril
[22m[39m
ğŸ”„ Test: diner-cousins-avril (tentative 2/3)
   Prompt: "Organise un dÃ®ner avec les cousins courant avril, plutÃ´t le week-end."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'e01cfdef-8ae7-4d21-bec5-41ecd6a24243'[39m,
  userInputLength: [33m69[39m,
  userInputPreview: [32m'Organise un dÃ®ner avec les cousins courant avril, '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'e01cfdef-8ae7-4d21-bec5-41ecd6a24243'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'e01cfdef-8ae7-4d21-bec5-41ecd6a24243'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m672[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'e01cfdef-8ae7-4d21-bec5-41ecd6a24243'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise un dÃ®ner avec les cousins courant avril, plutÃ´t le week-end."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m69[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ®ner cousins avril
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m625[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ®ner cousins avril
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'e01cfdef-8ae7-4d21-bec5-41ecd6a24243'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] DÃ®ner cousins avril
[22m[39m   â±ï¸ DurÃ©e: 1979ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "DÃ®ner avec les cousins en avril"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Proposition de dates pour un dÃ®ner avec les cousins en avril, idÃ©alement un week-end."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 8 dates, 8 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[MOYENNE] DÃ®ner cousins avril[33m 6485[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Anniversaire LÃ©a - DATE uniquement
[22m[39m
ğŸ”„ Test: anniversaire-lea-15-mai (tentative 1/3)
   Prompt: "Trouve une date pour l'anniversaire de LÃ©a autour du 15 mai un samedi."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'c724ff9a-a0f9-4c02-9808-c3f9a2ca1dd8'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m"Trouve une date pour l'anniversaire de LÃ©a autour "[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'c724ff9a-a0f9-4c02-9808-c3f9a2ca1dd8'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'c724ff9a-a0f9-4c02-9808-c3f9a2ca1dd8'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'c724ff9a-a0f9-4c02-9808-c3f9a2ca1dd8'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Trouve une date pour l'anniversaire de LÃ©a autour du 15 mai un samedi."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Anniversaire LÃ©a - DATE uniquement
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m174[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Anniversaire LÃ©a - DATE uniquement
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'c724ff9a-a0f9-4c02-9808-c3f9a2ca1dd8'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Anniversaire LÃ©a - DATE uniquement
[22m[39m   â±ï¸ DurÃ©e: 1009ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Anniversaire de LÃ©a"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Date pour l'anniversaire de LÃ©a autour du 15 mai, un samedi."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[MOYENNE] Anniversaire LÃ©a - DATE uniquement[33m 1009[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Week-end escapade juin
[22m[39m
ğŸ”„ Test: weekend-escapade-juin (tentative 1/3)
   Prompt: "RepÃ¨re un week-end oÃ¹ partir deux jours en juin."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'6f7c1805-53dd-4176-ad7a-588ad90f08a8'[39m,
  userInputLength: [33m48[39m,
  userInputPreview: [32m'RepÃ¨re un week-end oÃ¹ partir deux jours en juin.'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'6f7c1805-53dd-4176-ad7a-588ad90f08a8'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'6f7c1805-53dd-4176-ad7a-588ad90f08a8'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m651[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'6f7c1805-53dd-4176-ad7a-588ad90f08a8'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "RepÃ¨re un week-end oÃ¹ partir deux jours en juin."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m48[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Week-end escapade juin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m340[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Week-end escapade juin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'6f7c1805-53dd-4176-ad7a-588ad90f08a8'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Week-end escapade juin
[22m[39m   â±ï¸ DurÃ©e: 1535ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Week-ends de juin 2026"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Propositions de week-ends (samedi et dimanche) en juin 2026 pour un voyage de deux jours."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 8 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[MOYENNE] Week-end escapade juin[33m 1536[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39m
ğŸ”„ Test: seance-photo-decembre (tentative 1/3)
   Prompt: "Planifie une sÃ©ance photo familiale un dimanche matin en dÃ©cembre (avant fin dÃ©cembre)."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'ebef5fd3-39a7-4785-925c-c3f35aaf1307'[39m,
  userInputLength: [33m87[39m,
  userInputPreview: [32m'Planifie une sÃ©ance photo familiale un dimanche ma'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'ebef5fd3-39a7-4785-925c-c3f35aaf1307'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'ebef5fd3-39a7-4785-925c-c3f35aaf1307'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m690[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'ebef5fd3-39a7-4785-925c-c3f35aaf1307'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une sÃ©ance photo familiale un dimanche matin en dÃ©cembre (avant fin dÃ©cembre)."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m87[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m564[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] SÃ©ance photo familiale dimanche matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:53.027Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'ebef5fd3-39a7-4785-925c-c3f35aaf1307'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39m   â±ï¸ DurÃ©e: 1637ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] SÃ©ance photo familiale dimanche matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39m
ğŸ”„ Test: seance-photo-decembre (tentative 2/3)
   Prompt: "Planifie une sÃ©ance photo familiale un dimanche matin en dÃ©cembre (avant fin dÃ©cembre)."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'2d61a4cb-c2a9-4428-ba1c-3fca29976683'[39m,
  userInputLength: [33m87[39m,
  userInputPreview: [32m'Planifie une sÃ©ance photo familiale un dimanche ma'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'2d61a4cb-c2a9-4428-ba1c-3fca29976683'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'2d61a4cb-c2a9-4428-ba1c-3fca29976683'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m690[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'2d61a4cb-c2a9-4428-ba1c-3fca29976683'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une sÃ©ance photo familiale un dimanche matin en dÃ©cembre (avant fin dÃ©cembre)."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m87[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m611[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'2d61a4cb-c2a9-4428-ba1c-3fca29976683'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] SÃ©ance photo familiale dimanche matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:41:57.081Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39m   â±ï¸ DurÃ©e: 2050ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > PERSONNEL (10 tests) > [HAUTE] SÃ©ance photo familiale dimanche matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39m
ğŸ”„ Test: seance-photo-decembre (tentative 3/3)
   Prompt: "Planifie une sÃ©ance photo familiale un dimanche matin en dÃ©cembre (avant fin dÃ©cembre)."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'ea81c30f-8e37-4a0f-bb37-858904471d11'[39m,
  userInputLength: [33m87[39m,
  userInputPreview: [32m'Planifie une sÃ©ance photo familiale un dimanche ma'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'ea81c30f-8e37-4a0f-bb37-858904471d11'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'ea81c30f-8e37-4a0f-bb37-858904471d11'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m690[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'ea81c30f-8e37-4a0f-bb37-858904471d11'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une sÃ©ance photo familiale un dimanche matin en dÃ©cembre (avant fin dÃ©cembre)."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m87[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m440[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'ea81c30f-8e37-4a0f-bb37-858904471d11'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[HAUTE] SÃ©ance photo familiale dimanche matin
[22m[39m   â±ï¸ DurÃ©e: 1695ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "SÃ©ance photo familiale en dÃ©cembre"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "SÃ©ance photo un dimanche matin avant la fin dÃ©cembre 2025"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 4 dates, 4 crÃ©neaux
   âœ… Score: 3.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=0.0, Mots=1.0
   âš ï¸ Violations: CrÃ©neaux: 1 crÃ©neaux obtenus (attendu: 2-6)

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[HAUTE] SÃ©ance photo familiale dimanche matin[33m 9402[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] ApÃ©ro entre amis
[22m[39m
ğŸ”„ Test: apero-amis-trois-semaines (tentative 1/3)
   Prompt: "Cherche une soirÃ©e disponible entre amis pour un apÃ©ro d'ici trois semaines."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'd0105668-5d43-45c9-9cc9-2cbdb6d608d2'[39m,
  userInputLength: [33m76[39m,
  userInputPreview: [32m'Cherche une soirÃ©e disponible entre amis pour un a'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'd0105668-5d43-45c9-9cc9-2cbdb6d608d2'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'd0105668-5d43-45c9-9cc9-2cbdb6d608d2'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m679[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'd0105668-5d43-45c9-9cc9-2cbdb6d608d2'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Cherche une soirÃ©e disponible entre amis pour un apÃ©ro d'ici trois semaines."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m76[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] ApÃ©ro entre amis
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m760[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] ApÃ©ro entre amis
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'd0105668-5d43-45c9-9cc9-2cbdb6d608d2'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] ApÃ©ro entre amis
[22m[39m   â±ï¸ DurÃ©e: 3116ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "ApÃ©ro entre amis"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Proposition de dates pour un apÃ©ro convivial."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 21 dates, 6 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[MOYENNE] ApÃ©ro entre amis[33m 3116[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Call visio parents
[22m[39m
ğŸ”„ Test: call-visio-parents (tentative 1/3)
   Prompt: "Programme un crÃ©neau dans dix jours pour un call visio avec les parents."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'0dc14c08-a167-444a-a199-713ee04e86f1'[39m,
  userInputLength: [33m72[39m,
  userInputPreview: [32m'Programme un crÃ©neau dans dix jours pour un call v'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'0dc14c08-a167-444a-a199-713ee04e86f1'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'0dc14c08-a167-444a-a199-713ee04e86f1'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m675[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'0dc14c08-a167-444a-a199-713ee04e86f1'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Programme un crÃ©neau dans dix jours pour un call visio avec les parents."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m72[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Call visio parents
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m176[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Call visio parents
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'0dc14c08-a167-444a-a199-713ee04e86f1'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mPERSONNEL (10 tests)[2m > [22m[2m[MOYENNE] Call visio parents
[22m[39m   â±ï¸ DurÃ©e: 877ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Call visio parents"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "CrÃ©neau pour un appel visio avec les parents"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 0 crÃ©neaux
   âœ… Score: 3.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=0.0, Mots=1.0
   âš ï¸ Violations: CrÃ©neaux: aucun crÃ©neau gÃ©nÃ©rÃ© malgrÃ© l'attente

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] RÃ©union parents-profs
[22m[39m
ğŸ”„ Test: reunion-parents-profs (tentative 1/3)
   Prompt: "Cale la rÃ©union parents-profs entre mardi et jeudi prochains."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'e50297f6-b6eb-42bf-9559-5cf99d4e0389'[39m,
  userInputLength: [33m61[39m,
  userInputPreview: [32m'Cale la rÃ©union parents-profs entre mardi et jeudi'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'e50297f6-b6eb-42bf-9559-5cf99d4e0389'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'e50297f6-b6eb-42bf-9559-5cf99d4e0389'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m664[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'e50297f6-b6eb-42bf-9559-5cf99d4e0389'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Cale la rÃ©union parents-profs entre mardi et jeudi prochains."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m61[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mPERSONNEL (10 tests)[2m > [22m[MOYENNE] Call visio parents[33m 879[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] RÃ©union parents-profs
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m212[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] RÃ©union parents-profs
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'e50297f6-b6eb-42bf-9559-5cf99d4e0389'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] RÃ©union parents-profs
[22m[39m   â±ï¸ DurÃ©e: 944ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©union parents-profs"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "RÃ©union parents-profs entre mardi et jeudi prochains"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 3 dates, 0 crÃ©neaux
   âœ… Score: 3.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=0.0, Mots=1.0
   âš ï¸ Violations: CrÃ©neaux: aucun crÃ©neau gÃ©nÃ©rÃ© malgrÃ© l'attente

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39m
ğŸ”„ Test: bureau-asso-30min (tentative 1/3)
   Prompt: "Trouve un crÃ©neau de 90 minutes en fin de semaine prochaine pour le bureau de l'asso."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'c6cd78c3-98d7-4d35-b120-4657ef5dee1a'[39m,
  userInputLength: [33m85[39m,
  userInputPreview: [32m'Trouve un crÃ©neau de 90 minutes en fin de semaine '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'c6cd78c3-98d7-4d35-b120-4657ef5dee1a'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'c6cd78c3-98d7-4d35-b120-4657ef5dee1a'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m688[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'c6cd78c3-98d7-4d35-b120-4657ef5dee1a'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Trouve un crÃ©neau de 90 minutes en fin de semaine prochaine pour le bureau de l'asso."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m85[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[MOYENNE] RÃ©union parents-profs[33m 945[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m922[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Bureau associatif 90min fin de semaine
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:08.744Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'c6cd78c3-98d7-4d35-b120-4657ef5dee1a'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39m   â±ï¸ DurÃ©e: 3012ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Bureau associatif 90min fin de semaine
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39m
ğŸ”„ Test: bureau-asso-30min (tentative 2/3)
   Prompt: "Trouve un crÃ©neau de 90 minutes en fin de semaine prochaine pour le bureau de l'asso."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'31730c33-ea09-44b4-80f7-441b10265097'[39m,
  userInputLength: [33m85[39m,
  userInputPreview: [32m'Trouve un crÃ©neau de 90 minutes en fin de semaine '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'31730c33-ea09-44b4-80f7-441b10265097'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'31730c33-ea09-44b4-80f7-441b10265097'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m688[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'31730c33-ea09-44b4-80f7-441b10265097'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Trouve un crÃ©neau de 90 minutes en fin de semaine prochaine pour le bureau de l'asso."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m85[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m484[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'31730c33-ea09-44b4-80f7-441b10265097'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Bureau associatif 90min fin de semaine
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:12.360Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39m   â±ï¸ DurÃ©e: 1611ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Bureau associatif 90min fin de semaine
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39m
ğŸ”„ Test: bureau-asso-30min (tentative 3/3)
   Prompt: "Trouve un crÃ©neau de 90 minutes en fin de semaine prochaine pour le bureau de l'asso."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'8748685c-3eac-40c2-b0de-d0e187a07148'[39m,
  userInputLength: [33m85[39m,
  userInputPreview: [32m'Trouve un crÃ©neau de 90 minutes en fin de semaine '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'8748685c-3eac-40c2-b0de-d0e187a07148'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'8748685c-3eac-40c2-b0de-d0e187a07148'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m688[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'8748685c-3eac-40c2-b0de-d0e187a07148'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Trouve un crÃ©neau de 90 minutes en fin de semaine prochaine pour le bureau de l'asso."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m85[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m732[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'8748685c-3eac-40c2-b0de-d0e187a07148'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Bureau associatif 90min fin de semaine
ğŸš¨ DooDates Error: {
  message: 'All dates were in the past, suggestion rejected',
  name: 'DooDatesError',
  stack: 'DooDatesError: All dates were in the past, suggestion rejected\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.parseGeminiResponse (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:1160:44)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:479:82)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:16.389Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Toutes les dates proposÃ©es sont dans le passÃ©'
}
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:16.389Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Bureau associatif 90min fin de semaine
[22m[39m   â±ï¸ DurÃ©e: 2020ms

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Bureau associatif 90min fin de semaine
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39m
ğŸ”„ Test: atelier-benevoles-semaine-12 (tentative 1/3)
   Prompt: "Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©voles, semaine du 12."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'fed7ecbf-51f2-4d9f-b9a8-193310ea13b3'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m"Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©v"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'fed7ecbf-51f2-4d9f-b9a8-193310ea13b3'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'fed7ecbf-51f2-4d9f-b9a8-193310ea13b3'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'fed7ecbf-51f2-4d9f-b9a8-193310ea13b3'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©voles, semaine du 12."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[MOYENNE] Bureau associatif 90min fin de semaine[33m 10656[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m390[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:17.943Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'fed7ecbf-51f2-4d9f-b9a8-193310ea13b3'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39m   â±ï¸ DurÃ©e: 1553ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39m
ğŸ”„ Test: atelier-benevoles-semaine-12 (tentative 2/3)
   Prompt: "Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©voles, semaine du 12."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'84bede9a-0c78-4802-94f8-7ac445fd2a43'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m"Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©v"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'84bede9a-0c78-4802-94f8-7ac445fd2a43'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'84bede9a-0c78-4802-94f8-7ac445fd2a43'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'84bede9a-0c78-4802-94f8-7ac445fd2a43'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©voles, semaine du 12."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m317[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'84bede9a-0c78-4802-94f8-7ac445fd2a43'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
ğŸš¨ DooDates Error: {
  message: 'All dates were in the past, suggestion rejected',
  name: 'DooDatesError',
  stack: 'DooDatesError: All dates were in the past, suggestion rejected\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.parseGeminiResponse (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:1160:44)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:479:82)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:21.117Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Toutes les dates proposÃ©es sont dans le passÃ©'
}
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:21.117Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39m   â±ï¸ DurÃ©e: 1163ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39m
ğŸ”„ Test: atelier-benevoles-semaine-12 (tentative 3/3)
   Prompt: "Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©voles, semaine du 12."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'dd08fd0c-4535-4f45-af13-49a4f423145b'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m"Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©v"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'dd08fd0c-4535-4f45-af13-49a4f423145b'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'dd08fd0c-4535-4f45-af13-49a4f423145b'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'dd08fd0c-4535-4f45-af13-49a4f423145b'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise deux dates en soirÃ©e pour l'atelier bÃ©nÃ©voles, semaine du 12."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m336[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'dd08fd0c-4535-4f45-af13-49a4f423145b'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:24.299Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
[22m[39m   â±ï¸ DurÃ©e: 1174ms

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > ASSOCIATIF (9 tests) > [MOYENNE] Atelier bÃ©nÃ©voles semaine du 12
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] RÃ©pÃ©tition chorale week-end
[22m[39m
ğŸ”„ Test: repetition-chorale (tentative 1/3)
   Prompt: "Planifie une rÃ©pÃ©tition chorale samedi matin ou dimanche aprÃ¨s-midi."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'd5b42eeb-1c52-44eb-a709-88322229acfc'[39m,
  userInputLength: [33m68[39m,
  userInputPreview: [32m'Planifie une rÃ©pÃ©tition chorale samedi matin ou di'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'd5b42eeb-1c52-44eb-a709-88322229acfc'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'd5b42eeb-1c52-44eb-a709-88322229acfc'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m671[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'd5b42eeb-1c52-44eb-a709-88322229acfc'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une rÃ©pÃ©tition chorale samedi matin ou dimanche aprÃ¨s-midi."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m68[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[MOYENNE] Atelier bÃ©nÃ©voles semaine du 12[33m 7910[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] RÃ©pÃ©tition chorale week-end
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m431[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] RÃ©pÃ©tition chorale week-end
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'd5b42eeb-1c52-44eb-a709-88322229acfc'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] RÃ©pÃ©tition chorale week-end
[22m[39m   â±ï¸ DurÃ©e: 1703ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©pÃ©tition chorale"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "RÃ©pÃ©tition chorale le samedi matin ou le dimanche aprÃ¨s-midi."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 2 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[MOYENNE] RÃ©pÃ©tition chorale week-end[33m 1704[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Aide devoirs mercredi/vendredi
[22m[39m
ğŸ”„ Test: aide-devoirs-mercredi-vendredi (tentative 1/3)
   Prompt: "Cherche une disponibilitÃ© mercredi ou vendredi pour l'aide aux devoirs."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'b03b1925-3284-4d3b-91d2-b58d5032fba1'[39m,
  userInputLength: [33m71[39m,
  userInputPreview: [32m'Cherche une disponibilitÃ© mercredi ou vendredi pou'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'b03b1925-3284-4d3b-91d2-b58d5032fba1'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'b03b1925-3284-4d3b-91d2-b58d5032fba1'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m674[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'b03b1925-3284-4d3b-91d2-b58d5032fba1'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Cherche une disponibilitÃ© mercredi ou vendredi pour l'aide aux devoirs."\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m71[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Aide devoirs mercredi/vendredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m175[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Aide devoirs mercredi/vendredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'b03b1925-3284-4d3b-91d2-b58d5032fba1'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Aide devoirs mercredi/vendredi
[22m[39m   â±ï¸ DurÃ©e: 979ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Aide aux devoirs"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "DisponibilitÃ©s pour l'aide aux devoirs"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 0 crÃ©neaux
   âœ… Score: 3.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=0.0, Mots=1.0
   âš ï¸ Violations: CrÃ©neaux: aucun crÃ©neau gÃ©nÃ©rÃ© malgrÃ© l'attente

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] ComitÃ© de quartier J+15 - 2h
[22m[39m
ğŸ”„ Test: comite-quartier-quinze-jours (tentative 1/3)
   Prompt: "PrÃ©vois la rÃ©union du comitÃ© de quartier dans quinze jours, sur 2 heures, plutÃ´t en dÃ©but de soirÃ©e."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'bdedac2a-e6be-4538-b23f-624bcc5451e0'[39m,
  userInputLength: [33m100[39m,
  userInputPreview: [32m'PrÃ©vois la rÃ©union du comitÃ© de quartier dans quin'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'bdedac2a-e6be-4538-b23f-624bcc5451e0'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'bdedac2a-e6be-4538-b23f-624bcc5451e0'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m703[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'bdedac2a-e6be-4538-b23f-624bcc5451e0'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "PrÃ©vois la rÃ©union du comitÃ© de quartier dans quinze jours, sur 2 heures, plutÃ´t en dÃ©but de soirÃ©e."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m100[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[MOYENNE] Aide devoirs mercredi/vendredi[33m 980[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] ComitÃ© de quartier J+15 - 2h
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m291[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] ComitÃ© de quartier J+15 - 2h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'bdedac2a-e6be-4538-b23f-624bcc5451e0'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] ComitÃ© de quartier J+15 - 2h
[22m[39m   â±ï¸ DurÃ©e: 996ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©union du comitÃ© de quartier"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "RÃ©union du comitÃ© de quartier dans quinze jours, sur 2 heures, plutÃ´t en dÃ©but de soirÃ©e."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 1 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[MOYENNE] ComitÃ© de quartier J+15 - 2h[33m 997[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[HAUTE] PrÃ©pa kermesse samedi 10h
[22m[39m
ğŸ”„ Test: kermesse-samedi-10h (tentative 1/3)
   Prompt: "Propose un crÃ©neau samedi 10h pour la rÃ©union de prÃ©paration kermesse."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'12b23850-4b35-4200-8edd-f1eadf888cf2'[39m,
  userInputLength: [33m70[39m,
  userInputPreview: [32m'Propose un crÃ©neau samedi 10h pour la rÃ©union de p'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'12b23850-4b35-4200-8edd-f1eadf888cf2'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'12b23850-4b35-4200-8edd-f1eadf888cf2'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m673[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'12b23850-4b35-4200-8edd-f1eadf888cf2'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Propose un crÃ©neau samedi 10h pour la rÃ©union de prÃ©paration kermesse."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m70[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[HAUTE] PrÃ©pa kermesse samedi 10h
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m270[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[HAUTE] PrÃ©pa kermesse samedi 10h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'12b23850-4b35-4200-8edd-f1eadf888cf2'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[HAUTE] PrÃ©pa kermesse samedi 10h
[22m[39m   â±ï¸ DurÃ©e: 1080ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©union prÃ©paration kermesse"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Proposition de crÃ©neau pour la rÃ©union de prÃ©paration de la kermesse."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 1 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[HAUTE] PrÃ©pa kermesse samedi 10h[33m 1080[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Visio trÃ©sorerie aprÃ¨s 18h
[22m[39m
ğŸ”„ Test: visio-tresorerie-apres-18h (tentative 1/3)
   Prompt: "Trouve-nous un crÃ©neau en visio aprÃ¨s 18h pour le point trÃ©sorerie."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'afc314c9-d3f0-45a0-a744-958200e4eb48'[39m,
  userInputLength: [33m67[39m,
  userInputPreview: [32m'Trouve-nous un crÃ©neau en visio aprÃ¨s 18h pour le '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'afc314c9-d3f0-45a0-a744-958200e4eb48'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'afc314c9-d3f0-45a0-a744-958200e4eb48'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m670[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'afc314c9-d3f0-45a0-a744-958200e4eb48'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve-nous un crÃ©neau en visio aprÃ¨s 18h pour le point trÃ©sorerie."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m67[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Visio trÃ©sorerie aprÃ¨s 18h
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1897[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Visio trÃ©sorerie aprÃ¨s 18h
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'afc314c9-d3f0-45a0-a744-958200e4eb48'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Visio trÃ©sorerie aprÃ¨s 18h
[22m[39m   â±ï¸ DurÃ©e: 5356ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Point trÃ©sorerie (visio)"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "CrÃ©neau en visio aprÃ¨s 18h pour le point trÃ©sorerie"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 16 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[MOYENNE] Visio trÃ©sorerie aprÃ¨s 18h[33m 5357[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Distribution flyers fin avril
[22m[39m
ğŸ”„ Test: distribution-flyers-fin-avril (tentative 1/3)
   Prompt: "Planifie la distribution de flyers sur un week-end fin avril."
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'24bc2664-ba8e-43d8-99b2-979ca32c9eba'[39m,
  userInputLength: [33m61[39m,
  userInputPreview: [32m'Planifie la distribution de flyers sur un week-end'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'24bc2664-ba8e-43d8-99b2-979ca32c9eba'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'24bc2664-ba8e-43d8-99b2-979ca32c9eba'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m664[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'24bc2664-ba8e-43d8-99b2-979ca32c9eba'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie la distribution de flyers sur un week-end fin avril."\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m61[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Distribution flyers fin avril
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m201[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Distribution flyers fin avril
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'24bc2664-ba8e-43d8-99b2-979ca32c9eba'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mASSOCIATIF (9 tests)[2m > [22m[2m[MOYENNE] Distribution flyers fin avril
[22m[39m   â±ï¸ DurÃ©e: 780ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Distribution de flyers - Week-end fin avril"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Distribution de flyers sur un week-end fin avril."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 0 crÃ©neaux
   âœ… Score: 3.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=0.0, Mots=1.0
   âš ï¸ Violations: CrÃ©neaux: aucun crÃ©neau gÃ©nÃ©rÃ© malgrÃ© l'attente

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: DÃ©jeuner entre midi et deux
[22m[39m
ğŸ”„ Test: bug-dejeuner-midi-deux (tentative 1/3)
   Prompt: "fais-moi un sondage pour rÃ©server un dÃ©jeuner la semaine prochaine entre midi et deux"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'a0a0a866-d0d5-441a-91f3-fe915a9589db'[39m,
  userInputLength: [33m85[39m,
  userInputPreview: [32m'fais-moi un sondage pour rÃ©server un dÃ©jeuner la s'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'a0a0a866-d0d5-441a-91f3-fe915a9589db'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'a0a0a866-d0d5-441a-91f3-fe915a9589db'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m688[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'a0a0a866-d0d5-441a-91f3-fe915a9589db'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "fais-moi un sondage pour rÃ©server un dÃ©jeuner la semaine prochaine entre midi et deux"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m85[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mASSOCIATIF (9 tests)[2m > [22m[MOYENNE] Distribution flyers fin avril[33m 782[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: DÃ©jeuner entre midi et deux
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m475[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: DÃ©jeuner entre midi et deux
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'a0a0a866-d0d5-441a-91f3-fe915a9589db'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: DÃ©jeuner entre midi et deux
[22m[39m   â±ï¸ DurÃ©e: 1547ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "DÃ©jeuner la semaine prochaine entre midi et deux"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Sondage pour trouver le meilleur moment pour un dÃ©jeuner la semaine prochaine."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 4 dates, 4 crÃ©neaux
   âœ… Score: 3.5/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=0.5, CrÃ©neaux=1.0, Mots=1.0
   âš ï¸ Violations: Dates: 4 dates obtenues (attendu: 5-7)

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mBUG (6 tests)[2m > [22m[CRITIQUE] Bug #1: DÃ©jeuner entre midi et deux[33m 1547[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[HAUTE] Bug: Brunch week-end
[22m[39m
ğŸ”„ Test: bug-brunch-samedi-ou-dimanche (tentative 1/3)
   Prompt: "prÃ©vois un brunch samedi ou dimanche"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'1906dc32-b9ee-477b-ba45-a4488758ed08'[39m,
  userInputLength: [33m36[39m,
  userInputPreview: [32m'prÃ©vois un brunch samedi ou dimanche'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'1906dc32-b9ee-477b-ba45-a4488758ed08'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'1906dc32-b9ee-477b-ba45-a4488758ed08'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m639[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'1906dc32-b9ee-477b-ba45-a4488758ed08'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "prÃ©vois un brunch samedi ou dimanche"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m36[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[HAUTE] Bug: Brunch week-end
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m94[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[HAUTE] Bug: Brunch week-end
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'1906dc32-b9ee-477b-ba45-a4488758ed08'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[HAUTE] Bug: Brunch week-end
[22m[39m   â±ï¸ DurÃ©e: 632ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Brunch"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 0 crÃ©neaux
   âœ… Score: 3.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=0.0, Mots=1.0
   âš ï¸ Violations: CrÃ©neaux: aucun crÃ©neau gÃ©nÃ©rÃ© malgrÃ© l'attente

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - Mars
[22m[39m
ğŸ”„ Test: bug1-1 (tentative 1/3)
   Prompt: "fais-moi un sondage de date pour un week-end de ski en mars"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'b46eaf81-70be-46ba-b266-98b9cef7034d'[39m,
  userInputLength: [33m59[39m,
  userInputPreview: [32m'fais-moi un sondage de date pour un week-end de sk'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'b46eaf81-70be-46ba-b266-98b9cef7034d'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'b46eaf81-70be-46ba-b266-98b9cef7034d'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m662[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'b46eaf81-70be-46ba-b266-98b9cef7034d'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "fais-moi un sondage de date pour un week-end de ski en mars"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m59[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mBUG (6 tests)[2m > [22m[HAUTE] Bug: Brunch week-end[33m 632[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - Mars
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m417[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - Mars
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'b46eaf81-70be-46ba-b266-98b9cef7034d'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - Mars
[22m[39m   â±ï¸ DurÃ©e: 1953ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Week-end de ski en mars"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Sondage pour organiser un week-end de ski en mars 2026. Veuillez indiquer vos disponibilitÃ©s."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 12 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mBUG (6 tests)[2m > [22m[CRITIQUE] Bug #1: Mois Explicite - Mars[33m 1953[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - Avril
[22m[39m
ğŸ”„ Test: bug1-2 (tentative 1/3)
   Prompt: "organise un Ã©vÃ©nement en avril prochain"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'48b75e54-827a-42e9-a451-c452a985a549'[39m,
  userInputLength: [33m39[39m,
  userInputPreview: [32m'organise un Ã©vÃ©nement en avril prochain'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'48b75e54-827a-42e9-a451-c452a985a549'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'48b75e54-827a-42e9-a451-c452a985a549'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m642[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'48b75e54-827a-42e9-a451-c452a985a549'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "organise un Ã©vÃ©nement en avril prochain"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m39[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - Avril
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m677[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - Avril
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'48b75e54-827a-42e9-a451-c452a985a549'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - Avril
[22m[39m   â±ï¸ DurÃ©e: 3088ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Ã‰vÃ©nement en avril"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Ã‰vÃ©nement planifiÃ© pour avril 2026"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 30 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mBUG (6 tests)[2m > [22m[CRITIQUE] Bug #1: Mois Explicite - Avril[33m 3088[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - DÃ©cembre
[22m[39m
ğŸ”„ Test: bug1-3 (tentative 1/3)
   Prompt: "planifie une rÃ©union en dÃ©cembre"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'6b4d317b-89bf-4df4-9045-ddc1d543522b'[39m,
  userInputLength: [33m32[39m,
  userInputPreview: [32m'planifie une rÃ©union en dÃ©cembre'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'6b4d317b-89bf-4df4-9045-ddc1d543522b'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'6b4d317b-89bf-4df4-9045-ddc1d543522b'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m635[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'6b4d317b-89bf-4df4-9045-ddc1d543522b'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "planifie une rÃ©union en dÃ©cembre"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m32[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - DÃ©cembre
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m551[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - DÃ©cembre
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'6b4d317b-89bf-4df4-9045-ddc1d543522b'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[CRITIQUE] Bug #1: Mois Explicite - DÃ©cembre
[22m[39m   â±ï¸ DurÃ©e: 2297ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©union en dÃ©cembre"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 26 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mBUG (6 tests)[2m > [22m[CRITIQUE] Bug #1: Mois Explicite - DÃ©cembre[33m 2297[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[HAUTE] Bug #1: Week-end Multi-mois
[22m[39m
ğŸ”„ Test: bug1-6 (tentative 1/3)
   Prompt: "organise un week-end de jeux fin mars dÃ©but avril 2026"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'0cf9250e-271f-4298-9068-ed1056688291'[39m,
  userInputLength: [33m54[39m,
  userInputPreview: [32m'organise un week-end de jeux fin mars dÃ©but avril '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'0cf9250e-271f-4298-9068-ed1056688291'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'0cf9250e-271f-4298-9068-ed1056688291'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m657[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'0cf9250e-271f-4298-9068-ed1056688291'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "organise un week-end de jeux fin mars dÃ©but avril 2026"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m54[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[HAUTE] Bug #1: Week-end Multi-mois
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m351[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[HAUTE] Bug #1: Week-end Multi-mois
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'0cf9250e-271f-4298-9068-ed1056688291'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mBUG (6 tests)[2m > [22m[2m[HAUTE] Bug #1: Week-end Multi-mois
[22m[39m   â±ï¸ DurÃ©e: 1556ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Week-end de jeux"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Organisation d'un week-end de jeux entre fin mars et dÃ©but avril 2026."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 10 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mBUG (6 tests)[2m > [22m[HAUTE] Bug #1: Week-end Multi-mois[33m 1557[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Demain matin
[22m[39m
ğŸ”„ Test: temporal-1 (tentative 1/3)
   Prompt: "Planifie une rÃ©union demain matin"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'b62a852b-7bb6-4a21-9d6e-fe14999bc36b'[39m,
  userInputLength: [33m33[39m,
  userInputPreview: [32m'Planifie une rÃ©union demain matin'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'b62a852b-7bb6-4a21-9d6e-fe14999bc36b'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'b62a852b-7bb6-4a21-9d6e-fe14999bc36b'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m636[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'b62a852b-7bb6-4a21-9d6e-fe14999bc36b'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une rÃ©union demain matin"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m33[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Demain matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m172[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Demain matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'b62a852b-7bb6-4a21-9d6e-fe14999bc36b'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Demain matin
[22m[39m   â±ï¸ DurÃ©e: 820ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©union demain matin"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 1 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mTEMPOREL (8 tests)[2m > [22m[MOYENNE] Temporal: Demain matin[33m 821[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: AprÃ¨s-demain
[22m[39m
ğŸ”„ Test: temporal-2 (tentative 1/3)
   Prompt: "Organise un Ã©vÃ©nement aprÃ¨s-demain"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'fbba819d-8f6d-41aa-a0e7-a4fcc3dabcf0'[39m,
  userInputLength: [33m34[39m,
  userInputPreview: [32m'Organise un Ã©vÃ©nement aprÃ¨s-demain'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'fbba819d-8f6d-41aa-a0e7-a4fcc3dabcf0'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'fbba819d-8f6d-41aa-a0e7-a4fcc3dabcf0'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m637[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'fbba819d-8f6d-41aa-a0e7-a4fcc3dabcf0'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise un Ã©vÃ©nement aprÃ¨s-demain"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m34[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: AprÃ¨s-demain
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m154[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: AprÃ¨s-demain
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'fbba819d-8f6d-41aa-a0e7-a4fcc3dabcf0'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: AprÃ¨s-demain
[22m[39m   â±ï¸ DurÃ©e: 889ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Ã‰vÃ©nement aprÃ¨s-demain"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Ã‰vÃ©nement planifiÃ© pour aprÃ¨s-demain"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mTEMPOREL (8 tests)[2m > [22m[MOYENNE] Temporal: AprÃ¨s-demain[33m 890[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Semaine prochaine
[22m[39m
ğŸ”„ Test: temporal-3 (tentative 1/3)
   Prompt: "Trouve un crÃ©neau la semaine prochaine"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'fc1fe7e1-45eb-44bc-b55e-45988f53fa0f'[39m,
  userInputLength: [33m38[39m,
  userInputPreview: [32m'Trouve un crÃ©neau la semaine prochaine'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'fc1fe7e1-45eb-44bc-b55e-45988f53fa0f'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'fc1fe7e1-45eb-44bc-b55e-45988f53fa0f'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m641[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'fc1fe7e1-45eb-44bc-b55e-45988f53fa0f'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un crÃ©neau la semaine prochaine"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m38[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m182[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'fc1fe7e1-45eb-44bc-b55e-45988f53fa0f'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Semaine prochaine
[22m[39m   â±ï¸ DurÃ©e: 1097ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "CrÃ©neau la semaine prochaine"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 5 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mTEMPOREL (8 tests)[2m > [22m[MOYENNE] Temporal: Semaine prochaine[33m 1096[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Dans deux semaines
[22m[39m
ğŸ”„ Test: temporal-4 (tentative 1/3)
   Prompt: "Planifie une rÃ©union dans deux semaines"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'0107c06b-d2ee-4ced-8e02-c4c9a899cc59'[39m,
  userInputLength: [33m39[39m,
  userInputPreview: [32m'Planifie une rÃ©union dans deux semaines'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'0107c06b-d2ee-4ced-8e02-c4c9a899cc59'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'0107c06b-d2ee-4ced-8e02-c4c9a899cc59'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m642[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'0107c06b-d2ee-4ced-8e02-c4c9a899cc59'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une rÃ©union dans deux semaines"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m39[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Dans deux semaines
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m123[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Dans deux semaines
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'0107c06b-d2ee-4ced-8e02-c4c9a899cc59'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Dans deux semaines
[22m[39m   â±ï¸ DurÃ©e: 619ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©union dans deux semaines"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mTEMPOREL (8 tests)[2m > [22m[MOYENNE] Temporal: Dans deux semaines[33m 619[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Mois prochain
[22m[39m
ğŸ”„ Test: temporal-5 (tentative 1/3)
   Prompt: "Organise un Ã©vÃ©nement le mois prochain"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'e1c69dcb-8cf4-457e-ba91-b3d7177c3a9e'[39m,
  userInputLength: [33m38[39m,
  userInputPreview: [32m'Organise un Ã©vÃ©nement le mois prochain'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'e1c69dcb-8cf4-457e-ba91-b3d7177c3a9e'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'e1c69dcb-8cf4-457e-ba91-b3d7177c3a9e'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m641[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'e1c69dcb-8cf4-457e-ba91-b3d7177c3a9e'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise un Ã©vÃ©nement le mois prochain"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m38[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Mois prochain
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m707[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Mois prochain
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'e1c69dcb-8cf4-457e-ba91-b3d7177c3a9e'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Mois prochain
[22m[39m   â±ï¸ DurÃ©e: 3038ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Ã‰vÃ©nement le mois prochain"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Ã‰vÃ©nement Ã  planifier en janvier 2026."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 31 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mTEMPOREL (8 tests)[2m > [22m[MOYENNE] Temporal: Mois prochain[33m 3038[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Ce week-end
[22m[39m
ğŸ”„ Test: temporal-6 (tentative 1/3)
   Prompt: "Trouve un crÃ©neau ce week-end"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'ccbd9c27-4ce4-406a-a9fb-2270e107d608'[39m,
  userInputLength: [33m29[39m,
  userInputPreview: [32m'Trouve un crÃ©neau ce week-end'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'ccbd9c27-4ce4-406a-a9fb-2270e107d608'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'ccbd9c27-4ce4-406a-a9fb-2270e107d608'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m632[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'ccbd9c27-4ce4-406a-a9fb-2270e107d608'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un crÃ©neau ce week-end"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m29[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Ce week-end
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m119[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Ce week-end
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'ccbd9c27-4ce4-406a-a9fb-2270e107d608'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Ce week-end
[22m[39m   â±ï¸ DurÃ©e: 772ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "CrÃ©neau ce week-end"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mTEMPOREL (8 tests)[2m > [22m[MOYENNE] Temporal: Ce week-end[33m 772[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Fin de semaine
[22m[39m
ğŸ”„ Test: temporal-7 (tentative 1/3)
   Prompt: "Trouve un crÃ©neau fin de semaine"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'b050ac44-e516-4d2b-b100-e6f27f2ab5e6'[39m,
  userInputLength: [33m32[39m,
  userInputPreview: [32m'Trouve un crÃ©neau fin de semaine'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'b050ac44-e516-4d2b-b100-e6f27f2ab5e6'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'b050ac44-e516-4d2b-b100-e6f27f2ab5e6'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m635[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'b050ac44-e516-4d2b-b100-e6f27f2ab5e6'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un crÃ©neau fin de semaine"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m32[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Fin de semaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m111[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Fin de semaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'b050ac44-e516-4d2b-b100-e6f27f2ab5e6'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: Fin de semaine
[22m[39m   â±ï¸ DurÃ©e: 571ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "CrÃ©neau fin de semaine"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mTEMPOREL (8 tests)[2m > [22m[MOYENNE] Temporal: Fin de semaine[33m 571[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: DÃ©but de semaine prochaine
[22m[39m
ğŸ”„ Test: temporal-8 (tentative 1/3)
   Prompt: "Planifie une rÃ©union dÃ©but de semaine prochaine"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'f800cdb6-1a8c-4806-a044-aaff2b20bf25'[39m,
  userInputLength: [33m47[39m,
  userInputPreview: [32m'Planifie une rÃ©union dÃ©but de semaine prochaine'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'f800cdb6-1a8c-4806-a044-aaff2b20bf25'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'f800cdb6-1a8c-4806-a044-aaff2b20bf25'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m650[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'f800cdb6-1a8c-4806-a044-aaff2b20bf25'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une rÃ©union dÃ©but de semaine prochaine"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m47[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: DÃ©but de semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m123[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: DÃ©but de semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'f800cdb6-1a8c-4806-a044-aaff2b20bf25'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mTEMPOREL (8 tests)[2m > [22m[2m[MOYENNE] Temporal: DÃ©but de semaine prochaine
[22m[39m   â±ï¸ DurÃ©e: 972ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©union dÃ©but de semaine prochaine"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mTEMPOREL (8 tests)[2m > [22m[MOYENNE] Temporal: DÃ©but de semaine prochaine[33m 972[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEDGE (2 tests)[2m > [22m[2m[MOYENNE] Input vide
[22m[39m
ğŸ”„ Test: edge-input-vide (tentative 1/3)
   Prompt: ""
   âš ï¸ Input vide - test ignorÃ©

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEDGE (2 tests)[2m > [22m[2m[MOYENNE] CaractÃ¨res spÃ©ciaux
[22m[39m
ğŸ”„ Test: edge-caracteres-speciaux (tentative 1/3)
   Prompt: "rÃ©union @work #urgent"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'013ef46c-7366-439d-8a5a-08222f439e62'[39m,
  userInputLength: [33m21[39m,
  userInputPreview: [32m'rÃ©union @work #urgent'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'013ef46c-7366-439d-8a5a-08222f439e62'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'013ef46c-7366-439d-8a5a-08222f439e62'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m624[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'013ef46c-7366-439d-8a5a-08222f439e62'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "rÃ©union @work #urgent"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m21[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mEDGE (2 tests)[2m > [22m[MOYENNE] Input vide[32m 0[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEDGE (2 tests)[2m > [22m[2m[MOYENNE] CaractÃ¨res spÃ©ciaux
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m147[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEDGE (2 tests)[2m > [22m[2m[MOYENNE] CaractÃ¨res spÃ©ciaux
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'013ef46c-7366-439d-8a5a-08222f439e62'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEDGE (2 tests)[2m > [22m[2m[MOYENNE] CaractÃ¨res spÃ©ciaux
[22m[39m   â±ï¸ DurÃ©e: 828ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "RÃ©union urgente au travail"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "RÃ©union urgente au travail"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mEDGE (2 tests)[2m > [22m[MOYENNE] CaractÃ¨res spÃ©ciaux[33m 829[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39m
ğŸ”„ Test: date-reunion-1 (tentative 1/3)
   Prompt: "Organise une rÃ©union d'Ã©quipe lundi matin la semaine prochaine"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'6243c457-0da9-4172-b6bc-001cd233dcdf'[39m,
  userInputLength: [33m62[39m,
  userInputPreview: [32m"Organise une rÃ©union d'Ã©quipe lundi matin la semai"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'6243c457-0da9-4172-b6bc-001cd233dcdf'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'6243c457-0da9-4172-b6bc-001cd233dcdf'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m665[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'6243c457-0da9-4172-b6bc-001cd233dcdf'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise une rÃ©union d'Ã©quipe lundi matin la semaine prochaine"\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m62[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m413[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union d'Ã©quipe lundi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:42:57.547Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'6243c457-0da9-4172-b6bc-001cd233dcdf'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39m   â±ï¸ DurÃ©e: 1663ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union d'Ã©quipe lundi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39m
ğŸ”„ Test: date-reunion-1 (tentative 2/3)
   Prompt: "Organise une rÃ©union d'Ã©quipe lundi matin la semaine prochaine"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'4463a89e-4fe8-4258-9af3-ab975a1dadec'[39m,
  userInputLength: [33m62[39m,
  userInputPreview: [32m"Organise une rÃ©union d'Ã©quipe lundi matin la semai"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'4463a89e-4fe8-4258-9af3-ab975a1dadec'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'4463a89e-4fe8-4258-9af3-ab975a1dadec'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m665[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'4463a89e-4fe8-4258-9af3-ab975a1dadec'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise une rÃ©union d'Ã©quipe lundi matin la semaine prochaine"\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m62[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m413[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'4463a89e-4fe8-4258-9af3-ab975a1dadec'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union d'Ã©quipe lundi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:01.258Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39m   â±ï¸ DurÃ©e: 1705ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union d'Ã©quipe lundi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39m
ğŸ”„ Test: date-reunion-1 (tentative 3/3)
   Prompt: "Organise une rÃ©union d'Ã©quipe lundi matin la semaine prochaine"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'a7ac89f8-59e8-4b1b-9876-05d99a135287'[39m,
  userInputLength: [33m62[39m,
  userInputPreview: [32m"Organise une rÃ©union d'Ã©quipe lundi matin la semai"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'a7ac89f8-59e8-4b1b-9876-05d99a135287'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'a7ac89f8-59e8-4b1b-9876-05d99a135287'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m665[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'a7ac89f8-59e8-4b1b-9876-05d99a135287'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Organise une rÃ©union d'Ã©quipe lundi matin la semaine prochaine"\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m62[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m462[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'a7ac89f8-59e8-4b1b-9876-05d99a135287'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union d'Ã©quipe lundi matin
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:05.095Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union d'Ã©quipe lundi matin
[22m[39m   â±ï¸ DurÃ©e: 1830ms

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union d'Ã©quipe lundi matin
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39m
ğŸ”„ Test: date-reunion-2 (tentative 1/3)
   Prompt: "CrÃ©Ã© un sondage pour un point mensuel mardi ou mercredi aprÃ¨s-midi"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'015a168f-1d5f-486a-a61b-2b26059d7beb'[39m,
  userInputLength: [33m66[39m,
  userInputPreview: [32m'CrÃ©Ã© un sondage pour un point mensuel mardi ou mer'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'015a168f-1d5f-486a-a61b-2b26059d7beb'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'015a168f-1d5f-486a-a61b-2b26059d7beb'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m669[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'015a168f-1d5f-486a-a61b-2b26059d7beb'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©Ã© un sondage pour un point mensuel mardi ou mercredi aprÃ¨s-midi"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m66[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mREUNIONS (5 tests)[2m > [22m[MOYENNE] RÃ©union d'Ã©quipe lundi matin[33m 9213[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1241[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] Point mensuel mardi/mercredi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:08.925Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'015a168f-1d5f-486a-a61b-2b26059d7beb'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39m   â±ï¸ DurÃ©e: 3829ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] Point mensuel mardi/mercredi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39m
ğŸ”„ Test: date-reunion-2 (tentative 2/3)
   Prompt: "CrÃ©Ã© un sondage pour un point mensuel mardi ou mercredi aprÃ¨s-midi"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'd3706faf-c427-418b-bda2-4579de094cc3'[39m,
  userInputLength: [33m66[39m,
  userInputPreview: [32m'CrÃ©Ã© un sondage pour un point mensuel mardi ou mer'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'd3706faf-c427-418b-bda2-4579de094cc3'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'd3706faf-c427-418b-bda2-4579de094cc3'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m669[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'd3706faf-c427-418b-bda2-4579de094cc3'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©Ã© un sondage pour un point mensuel mardi ou mercredi aprÃ¨s-midi"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m66[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1585[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'd3706faf-c427-418b-bda2-4579de094cc3'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] Point mensuel mardi/mercredi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39m   â±ï¸ DurÃ©e: 5961ms
   â³ Attente 2000ms avant retry...

    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:16.886Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] Point mensuel mardi/mercredi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39m
ğŸ”„ Test: date-reunion-2 (tentative 3/3)
   Prompt: "CrÃ©Ã© un sondage pour un point mensuel mardi ou mercredi aprÃ¨s-midi"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'e225e2a7-448b-492f-867a-f4c1ee30fbf2'[39m,
  userInputLength: [33m66[39m,
  userInputPreview: [32m'CrÃ©Ã© un sondage pour un point mensuel mardi ou mer'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'e225e2a7-448b-492f-867a-f4c1ee30fbf2'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'e225e2a7-448b-492f-867a-f4c1ee30fbf2'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m669[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'e225e2a7-448b-492f-867a-f4c1ee30fbf2'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©Ã© un sondage pour un point mensuel mardi ou mercredi aprÃ¨s-midi"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m66[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1670[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'e225e2a7-448b-492f-867a-f4c1ee30fbf2'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Point mensuel mardi/mercredi
[22m[39m   â±ï¸ DurÃ©e: 5943ms
stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] Point mensuel mardi/mercredi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +

    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:24.841Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] Point mensuel mardi/mercredi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Entretien client vendredi
[22m[39m
ğŸ”„ Test: date-reunion-3 (tentative 1/3)
   Prompt: "Planifie un entretien client vendredi entre 14h et 17h"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'9a9fee3d-2516-4796-bbe8-1461d30307ce'[39m,
  userInputLength: [33m54[39m,
  userInputPreview: [32m'Planifie un entretien client vendredi entre 14h et'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'9a9fee3d-2516-4796-bbe8-1461d30307ce'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'9a9fee3d-2516-4796-bbe8-1461d30307ce'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m657[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'9a9fee3d-2516-4796-bbe8-1461d30307ce'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie un entretien client vendredi entre 14h et 17h"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m54[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mREUNIONS (5 tests)[2m > [22m[MOYENNE] Point mensuel mardi/mercredi[33m 19744[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Entretien client vendredi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m306[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Entretien client vendredi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'9a9fee3d-2516-4796-bbe8-1461d30307ce'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] Entretien client vendredi
[22m[39m   â±ï¸ DurÃ©e: 1363ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Entretien client"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "N/A"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 3 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mREUNIONS (5 tests)[2m > [22m[MOYENNE] Entretien client vendredi[33m 1363[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] VisioconfÃ©rence partenaires
[22m[39m
ğŸ”„ Test: date-reunion-4 (tentative 1/3)
   Prompt: "Trouve un crÃ©neau pour une visioconfÃ©rence avec les partenaires cette semaine"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'7761b174-10ab-42ae-83f7-257aa75838e9'[39m,
  userInputLength: [33m77[39m,
  userInputPreview: [32m'Trouve un crÃ©neau pour une visioconfÃ©rence avec le'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'7761b174-10ab-42ae-83f7-257aa75838e9'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'7761b174-10ab-42ae-83f7-257aa75838e9'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m680[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'7761b174-10ab-42ae-83f7-257aa75838e9'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Trouve un crÃ©neau pour une visioconfÃ©rence avec les partenaires cette semaine"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m77[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] VisioconfÃ©rence partenaires
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m335[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] VisioconfÃ©rence partenaires
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'7761b174-10ab-42ae-83f7-257aa75838e9'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] VisioconfÃ©rence partenaires
[22m[39m   â±ï¸ DurÃ©e: 1403ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "VisioconfÃ©rence partenaires"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Trouver un crÃ©neau pour la visioconfÃ©rence avec les partenaires cette semaine."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 7 dates, 0 crÃ©neaux
   âœ… Score: 3.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=0.0, Mots=1.0
   âš ï¸ Violations: CrÃ©neaux: aucun crÃ©neau gÃ©nÃ©rÃ© malgrÃ© l'attente

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39m
ğŸ”„ Test: date-reunion-5 (tentative 1/3)
   Prompt: "Organise une rÃ©union de suivi projet tous les jeudis matin"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'1ee830d1-a63e-4706-aab2-44d7ae7c27a8'[39m,
  userInputLength: [33m58[39m,
  userInputPreview: [32m'Organise une rÃ©union de suivi projet tous les jeud'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'1ee830d1-a63e-4706-aab2-44d7ae7c27a8'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'1ee830d1-a63e-4706-aab2-44d7ae7c27a8'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m661[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'1ee830d1-a63e-4706-aab2-44d7ae7c27a8'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise une rÃ©union de suivi projet tous les jeudis matin"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m58[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mREUNIONS (5 tests)[2m > [22m[MOYENNE] VisioconfÃ©rence partenaires[33m 1403[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m528[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union suivi projet jeudis
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:29.617Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'1ee830d1-a63e-4706-aab2-44d7ae7c27a8'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39m   â±ï¸ DurÃ©e: 2009ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union suivi projet jeudis
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39m
ğŸ”„ Test: date-reunion-5 (tentative 2/3)
   Prompt: "Organise une rÃ©union de suivi projet tous les jeudis matin"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'9805cc33-0ed2-4237-b3ed-5874eea23a78'[39m,
  userInputLength: [33m58[39m,
  userInputPreview: [32m'Organise une rÃ©union de suivi projet tous les jeud'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'9805cc33-0ed2-4237-b3ed-5874eea23a78'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'9805cc33-0ed2-4237-b3ed-5874eea23a78'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m661[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'9805cc33-0ed2-4237-b3ed-5874eea23a78'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise une rÃ©union de suivi projet tous les jeudis matin"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m58[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1398[39m }
stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union suivi projet jeudis
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:36.520Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}


[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'9805cc33-0ed2-4237-b3ed-5874eea23a78'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39m   â±ï¸ DurÃ©e: 4890ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union suivi projet jeudis
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39m
ğŸ”„ Test: date-reunion-5 (tentative 3/3)
   Prompt: "Organise une rÃ©union de suivi projet tous les jeudis matin"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'325618cf-5ce4-496d-9ae3-87f446d6f038'[39m,
  userInputLength: [33m58[39m,
  userInputPreview: [32m'Organise une rÃ©union de suivi projet tous les jeud'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'325618cf-5ce4-496d-9ae3-87f446d6f038'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'325618cf-5ce4-496d-9ae3-87f446d6f038'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m661[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'325618cf-5ce4-496d-9ae3-87f446d6f038'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise une rÃ©union de suivi projet tous les jeudis matin"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m58[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m1366[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union suivi projet jeudis
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:43.716Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'325618cf-5ce4-496d-9ae3-87f446d6f038'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mREUNIONS (5 tests)[2m > [22m[2m[MOYENNE] RÃ©union suivi projet jeudis
[22m[39m   â±ï¸ DurÃ©e: 5190ms

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > REUNIONS (5 tests) > [MOYENNE] RÃ©union suivi projet jeudis
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 3): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] DÃ©jeuner d'Ã©quipe weekend
[22m[39m
ğŸ”„ Test: date-event-1 (tentative 1/3)
   Prompt: "CrÃ©Ã© un sondage pour un dÃ©jeuner d'Ã©quipe ce weekend"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'bb0cbf49-9ddf-4048-a002-7857a76fc42f'[39m,
  userInputLength: [33m52[39m,
  userInputPreview: [32m"CrÃ©Ã© un sondage pour un dÃ©jeuner d'Ã©quipe ce weeke"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'bb0cbf49-9ddf-4048-a002-7857a76fc42f'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'bb0cbf49-9ddf-4048-a002-7857a76fc42f'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m655[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'bb0cbf49-9ddf-4048-a002-7857a76fc42f'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "CrÃ©Ã© un sondage pour un dÃ©jeuner d'Ã©quipe ce weekend"\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m52[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

 [31mÃ—[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mREUNIONS (5 tests)[2m > [22m[MOYENNE] RÃ©union suivi projet jeudis[33m 16108[2mms[22m[39m
[31m   â†’ expected 0 to be greater than or equal to 2.8[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] DÃ©jeuner d'Ã©quipe weekend
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m455[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] DÃ©jeuner d'Ã©quipe weekend
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'bb0cbf49-9ddf-4048-a002-7857a76fc42f'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] DÃ©jeuner d'Ã©quipe weekend
[22m[39m   â±ï¸ DurÃ©e: 1669ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "DÃ©jeuner d'Ã©quipe ce weekend"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Sondage pour dÃ©terminer la date et l'heure du dÃ©jeuner d'Ã©quipe ce weekend."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 2 dates, 2 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mEVENEMENTS (5 tests)[2m > [22m[MOYENNE] DÃ©jeuner d'Ã©quipe weekend[33m 1669[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] SoirÃ©e entre amis samedi
[22m[39m
ğŸ”„ Test: date-event-2 (tentative 1/3)
   Prompt: "Planifie une soirÃ©e entre amis samedi soir"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'6d52d7ef-51e6-4483-a025-b986175ee0d4'[39m,
  userInputLength: [33m42[39m,
  userInputPreview: [32m'Planifie une soirÃ©e entre amis samedi soir'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'6d52d7ef-51e6-4483-a025-b986175ee0d4'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'6d52d7ef-51e6-4483-a025-b986175ee0d4'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m645[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'6d52d7ef-51e6-4483-a025-b986175ee0d4'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Planifie une soirÃ©e entre amis samedi soir"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m42[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] SoirÃ©e entre amis samedi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m231[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] SoirÃ©e entre amis samedi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'6d52d7ef-51e6-4483-a025-b986175ee0d4'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] SoirÃ©e entre amis samedi
[22m[39m   â±ï¸ DurÃ©e: 1027ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "SoirÃ©e entre amis"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Planifions une soirÃ©e sympa samedi soir !"
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 1 dates, 1 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mEVENEMENTS (5 tests)[2m > [22m[MOYENNE] SoirÃ©e entre amis samedi[33m 1027[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Team building semaine prochaine
[22m[39m
ğŸ”„ Test: date-event-3 (tentative 1/3)
   Prompt: "Organise un Ã©vÃ©nement de team building la semaine prochaine"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'17a5a833-fa29-4acf-9813-82835cc35e6a'[39m,
  userInputLength: [33m59[39m,
  userInputPreview: [32m'Organise un Ã©vÃ©nement de team building la semaine '[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'17a5a833-fa29-4acf-9813-82835cc35e6a'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'17a5a833-fa29-4acf-9813-82835cc35e6a'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m662[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'17a5a833-fa29-4acf-9813-82835cc35e6a'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "Organise un Ã©vÃ©nement de team building la semaine prochaine"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m59[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Team building semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m264[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Team building semaine prochaine
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'17a5a833-fa29-4acf-9813-82835cc35e6a'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Team building semaine prochaine
[22m[39m   â±ï¸ DurÃ©e: 1089ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Ã‰vÃ©nement Team Building"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Organisation d'un Ã©vÃ©nement de team building la semaine prochaine."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 5 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mEVENEMENTS (5 tests)[2m > [22m[MOYENNE] Team building semaine prochaine[33m 1090[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Anniversaire Marie dÃ©cembre
[22m[39m
ğŸ”„ Test: date-event-4 (tentative 1/3)
   Prompt: "Trouve une date pour cÃ©lÃ©brer l'anniversaire de Marie en dÃ©cembre"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'4da8eee5-c207-4037-8e9f-846b62142e32'[39m,
  userInputLength: [33m65[39m,
  userInputPreview: [32m"Trouve une date pour cÃ©lÃ©brer l'anniversaire de Ma"[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'4da8eee5-c207-4037-8e9f-846b62142e32'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'4da8eee5-c207-4037-8e9f-846b62142e32'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m668[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'4da8eee5-c207-4037-8e9f-846b62142e32'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m`Demande: "Trouve une date pour cÃ©lÃ©brer l'anniversaire de Marie en dÃ©cembre"\n`[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m65[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Anniversaire Marie dÃ©cembre
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m657[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Anniversaire Marie dÃ©cembre
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'4da8eee5-c207-4037-8e9f-846b62142e32'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 
â„¹ï¸ ğŸŒ Date Poll successfully generated 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Anniversaire Marie dÃ©cembre
[22m[39m   â±ï¸ DurÃ©e: 3016ms
   ğŸ“ Titre gÃ©nÃ©rÃ©: "Anniversaire de Marie en dÃ©cembre"
   ğŸ“ Description gÃ©nÃ©rÃ©e: "Proposition de dates pour cÃ©lÃ©brer l'anniversaire de Marie en dÃ©cembre."
   âœ… RÃ©ponse reÃ§ue
   ğŸ“Š 26 dates, 0 crÃ©neaux
   âœ… Score: 4.0/4.0
   ğŸ“Š Breakdown: Type=1.0, Dates=1.0, CrÃ©neaux=1.0, Mots=1.0

 [32mâœ“[39m src/test/gemini-tests.manual.ts[2m > [22mGemini Tests ConsolidÃ©s[2m > [22mEVENEMENTS (5 tests)[2m > [22m[MOYENNE] Anniversaire Marie dÃ©cembre[33m 3016[2mms[22m[39m
[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Barbecue dimanche aprÃ¨s-midi
[22m[39m
ğŸ”„ Test: date-event-5 (tentative 1/3)
   Prompt: "CrÃ©Ã© un sondage pour un barbecue dimanche aprÃ¨s-midi"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'47d54ba2-51cf-4e1f-bc79-509262561ef0'[39m,
  userInputLength: [33m52[39m,
  userInputPreview: [32m'CrÃ©Ã© un sondage pour un barbecue dimanche aprÃ¨s-mi'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'47d54ba2-51cf-4e1f-bc79-509262561ef0'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'47d54ba2-51cf-4e1f-bc79-509262561ef0'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m655[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'47d54ba2-51cf-4e1f-bc79-509262561ef0'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©Ã© un sondage pour un barbecue dimanche aprÃ¨s-midi"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m52[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Barbecue dimanche aprÃ¨s-midi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m378[39m }

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > EVENEMENTS (5 tests) > [MOYENNE] Barbecue dimanche aprÃ¨s-midi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:51.918Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Barbecue dimanche aprÃ¨s-midi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'47d54ba2-51cf-4e1f-bc79-509262561ef0'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Barbecue dimanche aprÃ¨s-midi
[22m[39m   â±ï¸ DurÃ©e: 1399ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > EVENEMENTS (5 tests) > [MOYENNE] Barbecue dimanche aprÃ¨s-midi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 1): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Barbecue dimanche aprÃ¨s-midi
[22m[39m
ğŸ”„ Test: date-event-5 (tentative 2/3)
   Prompt: "CrÃ©Ã© un sondage pour un barbecue dimanche aprÃ¨s-midi"
â„¹ï¸ ğŸŒ ğŸŸ¡ GeminiService.generatePollFromText appelÃ© {
  requestId: [32m'c8c0fc92-2d41-48bf-9889-1ab7927d9bde'[39m,
  userInputLength: [33m52[39m,
  userInputPreview: [32m'CrÃ©Ã© un sondage pour un barbecue dimanche aprÃ¨s-mi'[39m
}
â„¹ï¸ ğŸŒ ğŸ“‹ Type imposÃ© depuis l'UI { requestId: [32m'c8c0fc92-2d41-48bf-9889-1ab7927d9bde'[39m, pollType: [32m'date'[39m }
â„¹ï¸ ğŸŒ Generating Date Poll from user input 
â„¹ï¸ ğŸŒ ğŸ”´ MODE DIRECT ACTIVÃ‰ - Bypass du prÃ©-processing temporel 
â„¹ï¸ ğŸŒ ğŸ”µ Appel geminiBackend.generateContent {
  requestId: [32m'c8c0fc92-2d41-48bf-9889-1ab7927d9bde'[39m,
  mode: [32m'DIRECT'[39m,
  hasUserInput: [33mtrue[39m,
  hasPrompt: [33mtrue[39m,
  promptLength: [33m655[39m
}
ğŸ› ğŸŒ ğŸ“ Prompt complet envoyÃ© Ã  Gemini {
  requestId: [32m'c8c0fc92-2d41-48bf-9889-1ab7927d9bde'[39m,
  prompt: [32m"Tu es l'IA DooDates, expert en planification temporelle.\n"[39m +
    [32m'\n'[39m +
    [32m'Demande: "CrÃ©Ã© un sondage pour un barbecue dimanche aprÃ¨s-midi"\n'[39m +
    [32m'\n'[39m +
    [32m"Aujourd'hui: 2025-12-05 (vendredi)\n"[39m +
    [32m'Demain: 2025-12-06\n'[39m +
    [32m'\n'[39m +
    [32m'RÃˆGLES:\n'[39m +
    [32m'1. Dates FUTURES uniquement (>= 2025-12-05)\n'[39m +
    [32m'2. Si durÃ©e mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots de cette durÃ©e\n'[39m +
    [32m'3. Si "crÃ©neau" mentionnÃ© â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'4. Si heure/plage horaire mentionnÃ©e â†’ gÃ©nÃ©rer des timeSlots\n'[39m +
    [32m'\n'[39m +
    [32m'FORMAT JSON:\n'[39m +
    [32m'{\n'[39m +
    [32m'  "title": "Titre court",\n'[39m +
    [32m'  "description": "Description optionnelle",\n'[39m +
    [32m'  "type": "date",\n'[39m +
    [32m'  "dates": ["YYYY-MM-DD"],\n'[39m +
    [32m'  "timeSlots": [{"start": "HH:MM", "end": "HH:MM", "dates": ["YYYY-MM-DD"]}]\n'[39m +
    [32m'}\n'[39m +
    [32m'\n'[39m +
    [32m'RÃ©pondre UNIQUEMENT avec le JSON valide.\n'[39m
}
â„¹ï¸ ğŸŒ ğŸ”µ Appel DIRECT Ã  Gemini API (fetch) { inputLength: [33m52[39m, hasPrompt: [33mtrue[39m, config: [90mundefined[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Barbecue dimanche aprÃ¨s-midi
[22m[39mâ„¹ï¸ ğŸŒ âœ… RÃ©ponse Gemini reÃ§ue (fetch direct) { responseLength: [33m467[39m }

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Barbecue dimanche aprÃ¨s-midi
[22m[39mâ„¹ï¸ ğŸŒ ğŸŸ¢ RÃ©ponse geminiBackend reÃ§ue {
  requestId: [32m'c8c0fc92-2d41-48bf-9889-1ab7927d9bde'[39m,
  success: [33mtrue[39m,
  hasData: [33mtrue[39m,
  error: [90mundefined[39m
}
â„¹ï¸ ğŸŒ Raw Gemini response received 

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > EVENEMENTS (5 tests) > [MOYENNE] Barbecue dimanche aprÃ¨s-midi
ğŸš¨ DooDates Error: {
  message: 'Failed to parse Gemini response',
  name: 'DooDatesError',
  stack: 'DooDatesError: Failed to parse Gemini response\n' +
    '    at Object.validation (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\error-handling.ts:144:5)\n' +
    '    at GeminiService.generatePollFromText (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\lib\\ai\\gemini.ts:551:41)\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at runPromptTest (C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1122:24)\n' +
    '    at C:\\Users\\Julien Fritsch\\Documents\\GitHub\\DooDates-bug\\src\\test\\gemini-tests.manual.ts:1355:26\n' +
    '    at file:///C:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-bug/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20',
  timestamp: '2025-12-05T18:43:55.344Z',
  context: { component: 'GeminiService', operation: 'parseGeminiResponse' },
  severity: 'medium',
  category: 'validation',
  userMessage: 'Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande'
}

[90mstdout[2m | src/test/gemini-tests.manual.ts[2m > [22m[2mGemini Tests ConsolidÃ©s[2m > [22m[2mEVENEMENTS (5 tests)[2m > [22m[2m[MOYENNE] Barbecue dimanche aprÃ¨s-midi
[22m[39m   â±ï¸ DurÃ©e: 1420ms
   â³ Attente 2000ms avant retry...

stderr | src/test/gemini-tests.manual.ts > Gemini Tests ConsolidÃ©s > EVENEMENTS (5 tests) > [MOYENNE] Barbecue dimanche aprÃ¨s-midi
   âŒ Ã‰chec gÃ©nÃ©ration (tentative 2): Impossible de gÃ©nÃ©rer le sondage Ã  partir de votre demande

