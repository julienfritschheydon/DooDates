{
  "error_patterns": {
    "Cannot find package '@playwright/test'": {
      "solution": "Utiliser `npm install` au lieu de `npm ci` dans les workflows CI/CD",
      "priority": "high",
      "category": "dependencies",
      "examples": [
        "production-smoke-tests.yml",
        "pr-validation.yml"
      ]
    },
    "Cannot read properties of undefined": {
      "solution": "Ajouter vérification null/undefined avant accès aux propriétés. Utiliser optional chaining (?.) ou vérifications explicites",
      "priority": "medium",
      "category": "runtime",
      "examples": [
        "useAutoSave.ts",
        "Supabase sync operations"
      ]
    },
    "Module not found": {
      "solution": "Vérifier les imports et l'existence des fichiers. Corriger les chemins relatifs ou ajouter les fichiers manquants",
      "priority": "high",
      "category": "build",
      "examples": [
        "calendarConflictDetection import",
        "TypeScript compilation errors"
      ]
    },
    "Timeout": {
      "solution": "Augmenter le timeout ou optimiser les opérations asynchrones. Vérifier les attentes Playwright",
      "priority": "medium",
      "category": "performance",
      "examples": [
        "E2E tests Playwright",
        "Supabase operations"
      ]
    },
    "Supabase": {
      "solution": "Vérifier la configuration Supabase et les variables d'environnement. Tester la connectivité",
      "priority": "high",
      "category": "database",
      "examples": [
        "VITE_SUPABASE_URL",
        "VITE_SUPABASE_ANON_KEY"
      ]
    },
    "TypeScript": {
      "solution": "Corriger les erreurs de types TypeScript. Vérifier les interfaces et les imports",
      "priority": "high",
      "category": "build",
      "examples": [
        "Type compilation errors",
        "Interface mismatches"
      ]
    },
    "ESLint": {
      "solution": "Corriger les erreurs ESLint selon les règles définies",
      "priority": "low",
      "category": "code_quality",
      "examples": [
        "Linting errors",
        "Code style violations"
      ]
    },
    "Vitest": {
      "solution": "Corriger les tests unitaires défaillants ou les configurations de test",
      "priority": "medium",
      "category": "testing",
      "examples": [
        "Unit tests failures",
        "Test configuration issues"
      ]
    },
    "Playwright": {
      "solution": "Corriger les tests E2E ou la configuration Playwright",
      "priority": "high",
      "category": "testing",
      "examples": [
        "E2E test failures",
        "Browser automation issues"
      ]
    }
  },
  "workflow_patterns": {
    "production-smoke": {
      "critical": true,
      "description": "Tests de production - bloque le déploiement en production",
      "impact": "Application non déployable"
    },
    "tests-e2e": {
      "critical": true,
      "description": "Tests end-to-end - qualité utilisateur et fonctionnalités",
      "impact": "Risque de bugs en production"
    },
    "tests-unit": {
      "critical": false,
      "description": "Tests unitaires - logique métier et composants",
      "impact": "Risque de régressions fonctionnelles"
    },
    "build-validation": {
      "critical": true,
      "description": "Validation du build - compilation et assets",
      "impact": "Application non déployable"
    },
    "pr-validation": {
      "critical": true,
      "description": "Validation des PR - qualité du code",
      "impact": "Code non fusionnable"
    }
  },
  "solution_templates": {
    "npm_ci_to_install": {
      "title": "Migration npm ci → npm install",
      "description": "Remplacer npm ci par npm install dans les workflows pour installer les devDependencies",
      "files_to_modify": [
        ".github/workflows/*.yml"
      ],
      "code_changes": {
        "from": "run: npm ci",
        "to": "run: |\n          rm -rf node_modules package-lock.json\n          npm install\n          npm install @rollup/rollup-linux-x64-gnu || true"
      }
    },
    "add_null_check": {
      "title": "Ajout de vérification null/undefined",
      "description": "Ajouter des vérifications avant accès aux propriétés potentiellement undefined",
      "code_changes": {
        "from": "object.property",
        "to": "object?.property || defaultValue"
      }
    },
    "fix_import_path": {
      "title": "Correction des chemins d'import",
      "description": "Vérifier et corriger les chemins relatifs des imports",
      "actions": [
        "Vérifier l'existence du fichier importé",
        "Corriger le chemin relatif si nécessaire",
        "Ajouter l'extension .ts/.js si manquante"
      ]
    }
  }
}
