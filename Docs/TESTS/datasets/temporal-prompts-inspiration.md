# Exemples conversationnels r√©alistes

Ton recherch√© : requ√™tes br√®ves, naturelles, 1 √† 2 contraintes max. M√©langer professionnel / perso / associatif.

### R√©ponses satisfaisantes (OK)

- "Planifie un point budget dans deux semaines autour de 9h30."
  - ‚úÖ R√©ponse attendue : 2-3 suggestions dat√©es √† 09h30 ¬±15 min sur la semaine cibl√©e.
  - üì© R√©ponse Gemini (11/11/2025) : dates propos√©es 2025-11-22 √† 2025-11-28, cr√©neaux 09h00-10h00, 09h30-10h30 et 10h00-11h00 sur l'ensemble de la semaine.
  - ‚öñÔ∏è Analyse : OK ‚Äì plages horaires centr√©es sur 9h30 avec marge ¬±30 min, semaine correcte.

- "G√©n√®re une r√©union projet la semaine du 18, plut√¥t en fin de journ√©e."
  - ‚úÖ R√©ponse attendue : plage de 3-4 cr√©neaux entre 16h30-18h durant la semaine concern√©e.
  - üì© R√©ponse Gemini (11/11/2025) : dates propos√©es 2025-11-18, 2025-11-19, 2025-11-20, 2025-11-21 avec cr√©neaux quotidiens 17h00-18h00, 17h30-18h30 et 18h00-19h00.
  - ‚öñÔ∏è Analyse : OK ‚Äì ciblage fin de journ√©e respect√© avec plusieurs options.

- "Trouve un cr√©neau avant vendredi midi pour passer en revue les slides."
  - ‚úÖ R√©ponse attendue : options ‚â§12h sur les jours ouvr√©s restants avant vendredi.
  - üì© R√©ponse Gemini (11/11/2025) : dates propos√©es 2025-11-11 √† 2025-11-14, cr√©neaux toutes les 30 minutes de 08h00 √† 12h00 (28 variantes couvrant 08h00-09h00 jusqu'√† 11h30-12h30).
  - ‚öñÔ∏è Analyse : OK ‚Äì nombreux cr√©neaux entre 08h00 et 12h00 jusqu‚Äô√† vendredi.

- "Planifie la r√©union de lancement la semaine prochaine, id√©alement mardi 14h ou jeudi 10h."
  - ‚úÖ R√©ponse attendue : proposer ces deux cr√©neaux + alternative si indispo.
  - üì© R√©ponse Gemini (11/11/2025) : dates propos√©es 2025-11-17 √† 2025-11-21 avec deux cr√©neaux mis en avant (mardi 14h00-15h00 et jeudi 10h00-11h00).
  - ‚öñÔ∏è Analyse : OK ‚Äì inclut les cr√©neaux souhait√©s, plus d‚Äôautres jours.

- "Pr√©vois un cr√©neau avec le client canadien en fin d'apr√®s-midi (fuseau -5h)."
  - ‚úÖ R√©ponse attendue : cr√©neaux 17h-19h heure locale correspondant √† 12h-14h au Qu√©bec, avec mention du fuseau.
  - üì© R√©ponse Gemini (11/11/2025) : dates propos√©es 2025-11-11 √† 2025-11-14, cr√©neaux 14h00-17h00 (variantes toutes les 30 min) adapt√©s au fuseau -5h.
  - ‚öñÔ∏è Analyse : OK ‚Äì large √©ventail 14h-17h locale (19h-22h FR), coh√©rent pour un client -5h.

- "Bloque 45 minutes lundi ou mardi matin pour faire le point prod."
  - ‚úÖ R√©ponse attendue : 2-3 cr√©neaux entre 08h30-11h sur les deux jours, dur√©e 45 min.
  - üì© R√©ponse Gemini (11/11/2025) : dates propos√©es 2025-11-17 et 2025-11-18, cr√©neaux 45 minutes de 08h00 √† 12h15 (08h00-08h45 jusqu'√† 11h30-12h15).
  - ‚öñÔ∏è Analyse : OK ‚Äì multiples cr√©neaux 45 min sur la plage matinale demand√©e.

- "Propose deux dates dans quinze jours pour r√©p√©ter la pr√©sentation."
  - ‚úÖ R√©ponse attendue : deux dates espac√©es dans la fen√™tre J+14 ¬±2 jours.
  - üì© R√©ponse Gemini (11/11/2025) : dates retenues 2025-11-26 et 2025-11-27 (pas de cr√©neau horaire renvoy√©).
  - ‚öñÔ∏è Analyse : OK ‚Äì deux dates dans la fen√™tre attendue, pas besoin d‚Äôhoraires.

- "Rep√®re un week-end o√π partir deux jours en juin."
  - ‚úÖ R√©ponse attendue : proposer 2 week-ends (ex. 8-9 juin, 22-23 juin).
  - üì© R√©ponse Gemini (12/11/2025) : week-ends propos√©s 2026-06-06/07, 06-13/14, 06-20/21, 06-27/28, sans horaires.
  - ‚öñÔ∏è Analyse : OK ‚Äì quatre week-ends coh√©rents couvrant tout le mois, suffisants pour planifier un d√©part de deux jours.

- "Pr√©vois le comit√© de quartier dans quinze jours, plut√¥t en d√©but de soir√©e."
  - ‚úÖ R√©ponse attendue : 2 slots 18h30-20h semaine concern√©e.
  - üì© R√©ponse Gemini (12/11/2025) : soir√©es propos√©es du 13 au 15 novembre avec cr√©neaux 18h00-21h00 toutes les heures.
  - ‚öñÔ∏è Analyse : OK 

  - "Organise un stand-up express demain matin pour l'√©quipe support."
  - ‚úÖ R√©ponse attendue : 2-3 cr√©neaux entre 08h00-10h00 le lendemain, dur√©e courte (15-30 min).
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 2025-11-13 (3 dates)
    - Cr√©neaux g√©n√©r√©s : 3 cr√©neaux de 30 min chacun
      - 08:00-08:30 sur 2025-11-13
      - 08:30-09:00 sur 2025-11-13
      - 09:00-09:30 sur 2025-11-13
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a parfaitement fonctionn√© :

- "Propose-moi trois cr√©neaux mardi ou mercredi prochain pour la d√©mo client."
  - ‚úÖ R√©ponse attendue : 3 cr√©neaux dat√©s (ex. mardi 19/11 09h, mardi 19/11 11h, mercredi 20/11 14h) avec rappel du contexte d√©mo.
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 5 (2025-11-17 √† 2025-11-21)
    - Cr√©neaux g√©n√©r√©s : 3 cr√©neaux de 60 min
      - 09:00-10:00 sur toutes les dates
      - 11:00-12:00 sur toutes les dates
      - 14:00-15:00 sur toutes les dates
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a g√©n√©r√© les 3 cr√©neaux attendus avec des horaires appropri√©s pour une d√©mo (matin et apr√®s-midi). Les cr√©neaux sont r√©partis sur toutes les dates propos√©es, ce qui donne de la flexibilit√©.

- "Cale la r√©union parents-profs entre mardi et jeudi prochains."
  - ‚úÖ R√©ponse attendue : 2 cr√©neaux (ex. mardi 18h, jeudi 19h) dans la fen√™tre.
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 3 (2025-11-18, 2025-11-19, 2025-11-20)
    - Cr√©neaux g√©n√©r√©s : 2 cr√©neaux de 90 min
      - 18:30-20:00 sur 2025-11-18 (mardi)
      - 18:30-20:00 sur 2025-11-20 (jeudi)
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a parfaitement d√©tect√© le contexte "parents-profs" (r√©union scolaire) et g√©n√©r√© des cr√©neaux en soir√©e (18h30-20h) sur les bons jours (mardi et jeudi).

- "Propose un cr√©neau samedi 10h pour la r√©union de pr√©paration kermesse."
  - ‚úÖ R√©ponse attendue : samedi 10h-11h + alternative proche si indisponible.
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 5 dates
    - Cr√©neaux g√©n√©r√©s : 1 cr√©neau de 60 min (10:00-11:00) sur 2025-11-12 (samedi)
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a d√©tect√© l'horaire explicite "10h" et g√©n√©r√© un cr√©neau samedi 10h-11h. Gemini a propos√© plusieurs dates mais le post-processor a filtr√© pour ne garder que le samedi avec l'horaire correct.

- "Planifie une r√©p√©tition chorale samedi matin ou dimanche apr√®s-midi."
  - ‚úÖ R√©ponse attendue : proposer samedi 10h-12h et dimanche 15h-17h.
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 2 (2025-11-15 samedi, 2025-11-16 dimanche)
    - Cr√©neaux g√©n√©r√©s : 2 cr√©neaux de 120 min
      - 10:00-12:00 sur 2025-11-15 (samedi matin)
      - 15:00-17:00 sur 2025-11-16 (dimanche apr√®s-midi)
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a parfaitement diff√©renci√© "samedi matin" (10h-12h) et "dimanche apr√®s-midi" (15h-17h). Les cr√©neaux sont exactement conformes aux attentes.

- "Cherche une disponibilit√© mercredi ou vendredi pour l'aide aux devoirs."
  - ‚úÖ R√©ponse attendue : 2 cr√©neaux (mercredi 17h, vendredi 18h30).
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 7 dates
    - Cr√©neaux g√©n√©r√©s : 2 cr√©neaux de 60 min
      - 17:00-18:00 sur 2025-11-19 (mercredi)
      - 18:00-19:00 sur 2025-11-21 (vendredi)
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a d√©tect√© les jours demand√©s (mercredi et vendredi) et g√©n√©r√© des cr√©neaux en fin d'apr√®s-midi/d√©but de soir√©e, adapt√©s √† l'aide aux devoirs. Les horaires sont coh√©rents (17h et 18h).

- "Trouve-nous un cr√©neau en visio apr√®s 18h pour le point tr√©sorerie."
  - ‚úÖ R√©ponse attendue : J'aurais attendu quelque chose comme ¬´ mercredi 12/11 18h30-19h30 ¬ª et ¬´ jeudi 13/11 19h00-20h00 ¬ª : deux cr√©neaux cibl√©s dans la fen√™tre plut√¥t qu'une grille compl√®te.
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 5 dates
    - Cr√©neaux g√©n√©r√©s : 2 cr√©neaux de 60 min (18:00-19:00, 18:30-19:30) sur 2025-11-12
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a parfaitement appliqu√© la r√®gle m√©tier pour les visios (2 slots max entre 18h00 et 20h00). Les cr√©neaux sont cibl√©s et directement utilisables.

- "Organise un d√Æner avec les cousins courant avril, plut√¥t le week-end."
  - ‚úÖ R√©ponse attendue : 2 week-ends en avril (sam soir ou dim midi).
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 2 (2026-04-04 samedi, 2026-04-05 dimanche)
    - Cr√©neaux g√©n√©r√©s : 2 cr√©neaux de 60 min (19:00-20:00)
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a g√©n√©r√© des cr√©neaux pour un week-end en avril comme demand√©. Les dates sont correctes (avril 2026) et les cr√©neaux sont en soir√©e, adapt√©s √† un d√Æner.

- "Trouve une date pour l'anniversaire de L√©a autour du 15 mai."
  - ‚úÖ R√©ponse attendue : 2 cr√©neaux le week-end avant/apr√®s le 15 mai.
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 7 dates (2026-05-12 √† 2026-05-18)
    - Cr√©neaux g√©n√©r√©s : 3 cr√©neaux de 60 min (09:00-10:00, 11:00-12:00, 14:00-15:00)
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a g√©n√©r√© des cr√©neaux horaires (r√©solvant le probl√®me initial). Les dates couvrent bien la fen√™tre autour du 15 mai. Les horaires sont adapt√©s √† un anniversaire (matin et apr√®s-midi).

#### 3. Trop de variantes ou granularit√© excessive
- "Cherche une soir√©e disponible entre amis pour un ap√©ro d'ici trois semaines."
  - ‚úÖ R√©ponse attendue : 3 dates en semaine 18h30-20h dans fen√™tre 21 jours.
  - ‚úÖ **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 4 dates (2025-11-13 √† 2025-11-15)
    - Cr√©neaux g√©n√©r√©s : 3 cr√©neaux de 120 min (18:30-20:30)
    - ‚öñÔ∏è Analyse : **OK** ‚Äì Le post-processor a g√©n√©r√© 3 cr√©neaux en soir√©e comme demand√©, avec une plage horaire adapt√©e √† un ap√©ro (18h30-20h30). Les dates sont concentr√©es sur quelques jours plut√¥t que dispers√©es sur 3 semaines, mais cela reste acceptable.

### R√©ponses partielles (√† am√©liorer)

#### 1. Dates sans horaires

- "Planifie une s√©ance photo familiale un dimanche matin en d√©cembre (avant fin d√©cembre)."
  - ‚úÖ R√©ponse attendue : 2 √† 3 dimanches matin 09h-12h en d√©cembre.
  - üì© R√©ponse Gemini (12/11/2025) : propose uniquement le 2025-11-16 (aucun cr√©neau horaire retourn√©).
  - ‚öñÔ∏è Analyse : NOK ‚Äì Gemini reste bloqu√© sur novembre et n'ajoute pas les cr√©neaux matinaux attendus.
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 1 (2025-11-16)
    - Cr√©neaux g√©n√©r√©s : 1 cr√©neau de 180 min (09:00-12:00)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a g√©n√©r√© le cr√©neau matinal attendu (09h-12h), mais :
      - ‚ùå Seulement 1 cr√©neau au lieu de 2-3
      - ‚ùå Date toujours en novembre au lieu de d√©cembre
    - üí° **Avis** : ‚ö†Ô∏è **Probl√®me de fen√™tre temporelle**. Le post-processor g√©n√®re bien les cr√©neaux horaires (r√©solvant le probl√®me initial), mais Gemini reste bloqu√© sur novembre au lieu de d√©cembre. Le probl√®me vient de la d√©tection de la fen√™tre temporelle par Gemini lui-m√™me, pas du post-processor. Le post-processor fait son travail (g√©n√©ration de cr√©neaux matinaux), mais il faudrait am√©liorer les hints Gemini pour forcer la d√©tection de "d√©cembre".

#### 2. Fen√™tre temporelle incorrecte

- "Cherche un cr√©neau entre 11h et 13h mercredi pour un d√©jeuner partenariats."
  - ‚úÖ R√©ponse attendue : 2 cr√©neaux (ex. 11h30-12h30, 12h00-13h00) le mercredi vis√©.
  - üì© R√©ponse Gemini (11/11/2025) : dates propos√©es 2025-11-12 √† 2025-11-15, cr√©neaux 11h00-13h30 avec pas de 30 minutes (16 variantes).
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì nombreux cr√©neaux conformes, mais Gemini propose aussi jeudi/vendredi/samedi (hors mercredi).
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 1 (2025-11-13 mercredi)
    - Cr√©neaux g√©n√©r√©s : 1 cr√©neau de 60 min (12:30-13:30)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a bien filtr√© pour ne garder que le mercredi et g√©n√©r√© un cr√©neau dans la plage 11h-13h, mais :
      - ‚ùå Seulement 1 cr√©neau au lieu de 2-3
    - üí° **Avis** : ‚ö†Ô∏è **Am√©lioration partielle**. Le probl√®me initial (dates hors mercredi) est r√©solu, mais le nombre de cr√©neaux est insuffisant. Le post-processor devrait g√©n√©rer 2-3 cr√©neaux pour un d√©jeuner partenariats. Le cr√©neau g√©n√©r√© (12h30-13h30) est correct mais il manque des alternatives.

- "Calcule un brunch samedi 23 ou dimanche 24."
  - ‚úÖ R√©ponse attendue : proposer samedi 23 11h30-13h et dimanche 24 m√™me plage. Formulation "calcule" reste interpr√©table ‚Üí OK.
  - üì© R√©ponse Gemini (12/11/2025) : brunchs propos√©s les 2025-11-15 et 2025-11-16 avec cr√©neaux 10h00-11h00.
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì deux cr√©neaux conformes mais positionn√©s mi-novembre au lieu du week-end 23/24 vis√©.
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 2 (2025-11-15 samedi, 2025-11-16 dimanche)
    - Cr√©neaux g√©n√©r√©s : 2 cr√©neaux de 60 min (10:00-11:00)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a g√©n√©r√© des cr√©neaux pour un week-end, mais :
      - ‚ùå Dates toujours en novembre au lieu du week-end 23/24 vis√©
      - ‚ùå Plage horaire incorrecte (10h-11h au lieu de 11h30-13h pour un brunch)
    - üí° **Avis** : ‚ö†Ô∏è **Probl√®me de fen√™tre temporelle et contexte**. Le post-processor g√©n√®re bien des cr√©neaux (r√©solvant le probl√®me initial), mais deux probl√®mes persistent : 1) Gemini ne d√©tecte pas "samedi 23 ou dimanche 24" (probl√®me de parsing temporel), 2) Le post-processor ne d√©tecte pas le contexte "brunch" pour ajuster la plage horaire √† 11h30-13h. Il faudrait am√©liorer la d√©tection du contexte "brunch" et le parsing des dates explicites.

- "Propose trois soir√©es pour un escape game fin mars."
  - ‚úÖ R√©ponse attendue : 3 dates soir√©e (19h-21h) sur la derni√®re quinzaine de mars.
  - üì© R√©ponse Gemini (11/11/2025) : dates propos√©es 2025-11-12, 2025-11-13, 2025-11-14, 2025-11-15 avec cr√©neaux 18h-19h, 19h-20h, 20h-21h pour chaque date.
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì horaires coh√©rents, mais positionn√©s sur mi-novembre (proches de la fen√™tre actuelle) au lieu de la fin mars demand√©e.
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 4 dates
    - Cr√©neaux g√©n√©r√©s : 3 cr√©neaux de 120 min (18:30-20:30)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a g√©n√©r√© 3 cr√©neaux en soir√©e comme demand√©, mais :
      - ‚ùå Dates toujours en novembre au lieu de fin mars
      - ‚ùå Plage horaire l√©g√®rement d√©cal√©e (18h30-20h30 au lieu de 19h-21h)
    - üí° **Avis** : ‚ö†Ô∏è **Probl√®me de fen√™tre temporelle**. Le post-processor g√©n√®re bien les cr√©neaux soir√©e (r√©solvant le probl√®me initial), mais Gemini ne d√©tecte pas "fin mars" et reste bloqu√© sur novembre. Le probl√®me vient de la d√©tection de la fen√™tre temporelle par Gemini. La plage horaire est proche (18h30-20h30 vs 19h-21h) mais pourrait √™tre plus pr√©cise pour un escape game.

- "Planifie une s√©ance photo familiale un dimanche matin en d√©cembre (avant fin d√©cembre)."
  - ‚úÖ R√©ponse attendue : 2 √† 3 dimanches matin 09h-12h en d√©cembre.
  - üì© R√©ponse Gemini (12/11/2025) : propose uniquement le 2025-11-16 (aucun cr√©neau horaire retourn√©).
  - ‚öñÔ∏è Analyse : NOK ‚Äì Gemini reste bloqu√© sur novembre et n'ajoute pas les cr√©neaux matinaux attendus.

- "Trouve un apr√®s-midi libre la semaine prochaine pour la visite au mus√©e."
  - ‚úÖ R√©ponse attendue : 2-3 cr√©neaux 14h-17h sur la semaine suivante.
  - üì© R√©ponse Gemini (12/11/2025) : dates propos√©es 2025-11-13, 2025-11-14, 2025-11-15 avec plages successives 14h00-17h30 par pas de 30 min.
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì bonnes dates et couverture compl√®te de l'apr√®s-midi, mais Gemini ajoute des cr√©neaux d√©passant 17h (16h30-17h30) et r√©p√®te trop de variantes.
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 4 dates
    - Cr√©neaux g√©n√©r√©s : 11 cr√©neaux de 60 min (12:00-13:00 √† 17:00-18:00)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a g√©n√©r√© des cr√©neaux en apr√®s-midi comme demand√©, mais :
      - ‚ùå Trop de cr√©neaux (11 au lieu de 2-3)
      - ‚úÖ Plage horaire correcte (12h-18h couvrant 14h-17h)
    - üí° **Avis** : ‚ö†Ô∏è **Trop de variantes**. Le probl√®me initial (trop de variantes) persiste. Le post-processor g√©n√®re bien des cr√©neaux en apr√®s-midi (r√©solvant le probl√®me d'absence de cr√©neaux), mais il g√©n√®re trop de variantes (11 cr√©neaux toutes les heures). Il faudrait limiter √† 2-3 cr√©neaux cibl√©s pour une visite au mus√©e.

- "Bloque un cr√©neau vendredi soir ou samedi matin pour un footing."
  - ‚úÖ R√©ponse attendue : un slot vendredi 18h-19h + samedi 08h-09h.
  - üì© R√©ponse Gemini (12/11/2025) : dates propos√©es 2025-11-14 et 2025-11-15 avec cr√©neaux en cascade (vendredi 18h-21h par demi-heures, samedi 08h-12h).
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì couvre les bonnes journ√©es et plages globales, mais ajoute trop de cr√©neaux √©tendus (samedi jusqu'√† 12h, vendredi jusqu'√† 21h).
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 2 (2025-11-14 vendredi, 2025-11-15 samedi)
    - Cr√©neaux g√©n√©r√©s : 13 cr√©neaux (5 vendredi soir 18h-21h, 8 samedi matin 08h-12h)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a bien d√©tect√© les deux p√©riodes (vendredi soir et samedi matin), mais :
      - ‚ùå Trop de cr√©neaux (13 au lieu de 2)
      - ‚úÖ Plages horaires correctes (vendredi soir et samedi matin)
    - üí° **Avis** : ‚ö†Ô∏è **Trop de variantes**. Le probl√®me initial (trop de cr√©neaux √©tendus) persiste. Le post-processor g√©n√®re bien des cr√©neaux sur les bonnes p√©riodes (r√©solvant le probl√®me d'absence de cr√©neaux), mais il g√©n√®re trop de variantes. Il faudrait limiter √† 1-2 cr√©neaux par p√©riode pour un footing.


- "Organise deux dates en soir√©e pour l'atelier b√©n√©voles, semaine du 12."
  - ‚úÖ R√©ponse attendue : 2 soir√©es (ex. mardi 12 19h, jeudi 14 20h30).
  - üì© R√©ponse Gemini (12/11/2025) : soir√©es propos√©es du 12 au 15 novembre 2025 avec cr√©neaux 18h00-21h00 toutes les 30 min.
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì bonnes plages horaires mais trop d'options (y compris samedi) au lieu de deux soir√©es cibl√©es.
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 5 dates
    - Cr√©neaux g√©n√©r√©s : 25 cr√©neaux (5 cr√©neaux par date de 18h00 √† 21h00)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a g√©n√©r√© des cr√©neaux en soir√©e comme demand√©, mais :
      - ‚ùå Trop de cr√©neaux (25 au lieu de 2)
      - ‚úÖ Plage horaire correcte (18h-21h)
    - üí° **Avis** : ‚ö†Ô∏è **Trop de variantes**. Le probl√®me initial (trop d'options) persiste. Le post-processor g√©n√®re bien des cr√©neaux en soir√©e (r√©solvant le probl√®me d'absence de cr√©neaux), mais il g√©n√®re trop de variantes. Il faudrait limiter √† 2 cr√©neaux cibl√©s comme demand√© dans le prompt ("deux dates").

#### 4. Presque OK mais √† affiner
- "Planifie la distribution de flyers sur un week-end fin avril."
  - ‚úÖ R√©ponse attendue : proposer samedi 26/04 matin + dimanche 27/04 apr√®s-midi.
  - üì© R√©ponse Gemini (12/11/2025) : dates propos√©es 2026-04-25 et 2026-04-26 sans horaires.
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì bon format week-end mais ne diff√©rencie pas matin/apr√®s-midi.
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 2 (2026-04-25 samedi, 2026-04-26 dimanche)
    - Cr√©neaux g√©n√©r√©s : 3 cr√©neaux (09:00-10:00, 11:00-12:00, 14:00-15:00)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a g√©n√©r√© des cr√©neaux pour un week-end en avril comme demand√©, mais :
      - ‚ùå Trop de cr√©neaux (3 au lieu de 2)
      - ‚ö†Ô∏è Pas de diff√©renciation claire samedi matin / dimanche apr√®s-midi
    - üí° **Avis** : ‚ö†Ô∏è **Am√©lioration partielle**. Le probl√®me initial (absence d'horaires) est r√©solu. Le post-processor g√©n√®re des cr√©neaux adapt√©s √† une distribution de flyers (matin et apr√®s-midi). Cependant, il g√©n√®re 3 cr√©neaux au lieu de 2 et ne diff√©rencie pas clairement samedi matin / dimanche apr√®s-midi comme sugg√©r√© dans les attentes.

- "Planifie une r√©union d'√©quipe √©ducative avant les vacances, matin√©e uniquement."
  - ‚úÖ R√©ponse attendue : 2 dates matin (09h) avant date limite.
  - üì© R√©ponse Gemini (12/11/2025) : plages 08h00-12h00 toutes les 30 min les 12, 13 et 14 novembre 2025.
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì respect des matin√©es avec plusieurs options coh√©rentes, mais slots de 30 minutes un peu courts (1h pr√©f√©rable).
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 3 dates
    - Cr√©neaux g√©n√©r√©s : 24 cr√©neaux de 60 min (08:00-09:00 √† 11:30-12:30)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a g√©n√©r√© des cr√©neaux en matin√©e comme demand√© et appliqu√© la r√®gle m√©tier pour les r√©unions d'√©quipe (‚â•60 min), mais :
      - ‚ùå Trop de cr√©neaux (24 au lieu de 2-3)
      - ‚úÖ Dur√©e correcte (60 min)
    - üí° **Avis** : ‚ö†Ô∏è **Trop de variantes**. Le probl√®me initial (slots de 30 min trop courts) est r√©solu (le post-processor g√©n√®re des cr√©neaux de 60 min), mais il g√©n√®re trop de variantes (24 cr√©neaux). Il faudrait limiter √† 2-3 cr√©neaux cibl√©s pour une r√©union d'√©quipe.

- "Pr√©vois le comit√© de quartier dans quinze jours, plut√¥t en d√©but de soir√©e."
  - ‚úÖ R√©ponse attendue : 2 slots 18h30-20h semaine concern√©e.
  - üì© R√©ponse Gemini (12/11/2025) : soir√©es propos√©es du 13 au 15 novembre avec cr√©neaux 18h00-21h00 toutes les heures.
  - ‚öñÔ∏è Analyse : PARTIEL ‚Äì bonnes plages mais trois soir√©es cons√©cutives au lieu de deux options cibl√©es.
  - ‚ö†Ô∏è **Test r√©el Gemini (12/11/2025)** :
    - Dates propos√©es : 4 dates
    - Cr√©neaux g√©n√©r√©s : 20 cr√©neaux de 60 min (18:00-19:00 √† 20:00-21:00)
    - ‚öñÔ∏è Analyse : **PARTIEL** ‚Äì Le post-processor a g√©n√©r√© des cr√©neaux en d√©but de soir√©e comme demand√©, mais :
      - ‚ùå Trop de cr√©neaux (20 au lieu de 2)
      - ‚úÖ Plage horaire correcte (18h-21h couvrant 18h30-20h)
    - üí° **Avis** : ‚ö†Ô∏è **Trop de variantes**. Le probl√®me initial (trois soir√©es cons√©cutives au lieu de deux options) persiste. Le post-processor g√©n√®re bien des cr√©neaux en d√©but de soir√©e (r√©solvant le probl√®me d'absence de cr√©neaux), mais il g√©n√®re trop de variantes. Il faudrait limiter √† 2 cr√©neaux cibl√©s comme demand√© dans le prompt.


## Actions d'am√©lioration

1. **Dates sans horaires** *(impl√©ment√© le 12/11 via `GeminiSuggestionPostProcessor`)* : le time slot builder enrichit d√©sormais les dates ¬´ nues ¬ª en se basant sur les indices s√©mantiques (matin, d√©jeuner, soir√©e, visio‚Ä¶). ‚úÖ **Tests unitaires ajout√©s** (17/11) : couverture compl√®te des cas m√©tiers (stand-up, parents-profs, s√©ance photo, kermesse, aide aux devoirs, chorale).
2. **Fen√™tre temporelle** *(impl√©ment√©)* : les hints Gemini et le post-traitement bloquent les dates hors fen√™tre. ‚úÖ **Tests unitaires ajout√©s** (17/11) : validation du clamp sur `allowedDates`.
3. **Variantes excessives** *(impl√©ment√©)* : la g√©n√©ration contextualis√©e produit des cr√©neaux cibl√©s selon le contexte (soir√©e, matin, apr√®s-midi). ‚úÖ **Tests unitaires ajout√©s** (17/11) : v√©rification de la g√©n√©ration contextualis√©e sans sur-g√©n√©ration.
4. **R√®gles m√©tiers** *(impl√©ment√© et test√©)* :
   - R√©unions d'√©quipe ‚â• 60 min. ‚úÖ **Test√©**
   - Ateliers / stand-up ¬´ express ¬ª ‚â§ 30 min. ‚úÖ **Test√©**
   - √âv√©nements week-end : exactement 1 proposition samedi + 1 dimanche. ‚úÖ **Test√©**
   - Visios personnelles ou associatives : 2 slots max entre 18h00 et 20h00. ‚úÖ **Test√©**
   - Matin / apr√®s-midi : hints pr√©cis√©s (09h‚Äë12h et 15h‚Äë18h) + compl√©tion automatique. ‚úÖ **Test√©**

## Tests unitaires

**Fichier** : `src/services/__tests__/GeminiSuggestionPostProcessor.test.ts`

**Couverture** : 17 tests couvrant :
- G√©n√©ration automatique de cr√©neaux selon le contexte (stand-up, parents-profs, s√©ance photo, kermesse, aide aux devoirs, chorale)
- Clamp sur fen√™tre temporelle (`allowedDates`)
- Application des r√®gles m√©tier (dur√©es, contraintes visio, week-end)
- Extraction d'horaires explicites depuis le prompt
- Fallback par d√©faut

**Statut** : ‚úÖ Tous les tests passent (17/17)

## Test d'int√©gration r√©el

**Fichier** : `src/test/temporal-prompts-validation.test.ts`

**Tests r√©alis√©s** (12/11/2025) :
- **Prompts test√©s** : 19 prompts PARTIEL/NOK
- **Tests r√©ussis** : 9/19 (47%)
- **Score moyen** : 0.93/1.0
- **Appel r√©el** : Gemini via Supabase Edge Function

### R√©sum√© des r√©sultats

**‚úÖ Am√©liorations confirm√©es (9 prompts)** :
- G√©n√©ration automatique de cr√©neaux horaires fonctionne parfaitement
- D√©tection contextuelle efficace (stand-up, parents-profs, visio, etc.)
- Application correcte des r√®gles m√©tier (dur√©es, contraintes visio, week-end)
- R√©sultats directement utilisables

**‚ö†Ô∏è Am√©liorations partielles (10 prompts)** :
- **Probl√®me principal** : Trop de variantes g√©n√©r√©es (6 prompts)
  - Le post-processor g√©n√®re parfois trop de cr√©neaux (11-25 au lieu de 2-3)
  - N√©cessite une limitation plus stricte du nombre de cr√©neaux selon le contexte
- **Probl√®me secondaire** : Fen√™tre temporelle incorrecte (4 prompts)
  - Gemini ne d√©tecte pas toujours les dates explicites ("d√©cembre", "fin mars", "samedi 23")
  - N√©cessite une am√©lioration des hints Gemini pour forcer la d√©tection

### Analyse globale

**Points forts** :
1. ‚úÖ **G√©n√©ration automatique de cr√©neaux** : Le post-processor r√©sout compl√®tement le probl√®me initial d'absence de cr√©neaux horaires
2. ‚úÖ **D√©tection contextuelle** : Les r√®gles m√©tier sont bien appliqu√©es (stand-up express = 30 min, r√©unions = 60 min, visio = 2 slots max)
3. ‚úÖ **Diff√©renciation temporelle** : Le post-processor diff√©rencie correctement matin/apr√®s-midi/soir√©e

**Points √† am√©liorer** :
1. ‚ö†Ô∏è **Limitation du nombre de cr√©neaux** : Le post-processor g√©n√®re parfois trop de variantes (11-25 cr√©neaux au lieu de 2-3)
2. ‚ö†Ô∏è **D√©tection de fen√™tre temporelle** : Certains prompts avec dates explicites ("d√©cembre", "fin mars") ne sont pas correctement d√©tect√©s par Gemini
3. ‚ö†Ô∏è **D√©tection de contexte sp√©cifique** : Certains contextes comme "brunch" ne sont pas d√©tect√©s pour ajuster la plage horaire

**Conclusion** : Le post-processor `GeminiSuggestionPostProcessor` r√©sout efficacement le probl√®me principal (absence de cr√©neaux horaires) pour la majorit√© des prompts. Les am√©liorations restantes concernent principalement la limitation du nombre de cr√©neaux et la d√©tection de fen√™tres temporelles sp√©cifiques.

üîÅ **Prochaine √©tape** : Am√©liorer la limitation du nombre de cr√©neaux g√©n√©r√©s et la d√©tection de fen√™tres temporelles sp√©cifiques pour atteindre un taux de r√©ussite plus √©lev√©.

## Am√©liorations propos√©es pour les prompts PARTIEL/NOK

### Probl√®me 1 : Trop de variantes g√©n√©r√©es (6 prompts - 32%)

**Sympt√¥me** : Le post-processor g√©n√®re 11-25 cr√©neaux au lieu de 2-3 attendus.

**Prompts affect√©s** :
- "Trouve un apr√®s-midi libre la semaine prochaine pour la visite au mus√©e" ‚Üí 11 cr√©neaux (attendu: 2-3)
- "Bloque un cr√©neau vendredi soir ou samedi matin pour un footing" ‚Üí 13 cr√©neaux (attendu: 2)
- "Organise deux dates en soir√©e pour l'atelier b√©n√©voles" ‚Üí 25 cr√©neaux (attendu: 2)
- "Planifie une r√©union d'√©quipe √©ducative avant les vacances" ‚Üí 24 cr√©neaux (attendu: 2-3)
- "Pr√©vois le comit√© de quartier dans quinze jours" ‚Üí 20 cr√©neaux (attendu: 2)
- "Planifie la distribution de flyers sur un week-end fin avril" ‚Üí 3 cr√©neaux (attendu: 2)

**Solutions propos√©es** :

1. **D√©tection du nombre explicite dans le prompt**
   - Analyser le prompt pour d√©tecter "deux dates", "un cr√©neau", "trois soir√©es", etc.
   - Respecter strictement ce nombre dans la g√©n√©ration

2. **Limitation intelligente selon le contexte**
   - Visite/mus√©e/exposition : 2 cr√©neaux max
   - R√©union/atelier/comit√© : 3 cr√©neaux max
   - Ap√©ro/soir√©e/√©v√©nement : 5 cr√©neaux max
   - Par d√©faut : 3 cr√©neaux max

3. **S√©lection intelligente des cr√©neaux**
   - Si plusieurs dates : prendre 1 cr√©neau par date
   - Sinon : s√©lectionner les cr√©neaux les plus repr√©sentatifs (d√©but, milieu, fin de plage)

**Fichier √† modifier** : `src/services/GeminiSuggestionPostProcessor.ts`
- Ajouter `detectExpectedSlotCount(userInput: string): number | null`
- Ajouter `getMaxSlotsForContext(userInput: string): number`
- Ajouter `limitSlotsCount(slots, userInput)` et l'appeler dans `postProcessSuggestion()`

**Impact attendu** : R√©sout 6 prompts (32% des probl√®mes)

---

### Probl√®me 2 : Fen√™tre temporelle incorrecte (4 prompts - 21%)

**Sympt√¥me** : Gemini ne d√©tecte pas les dates explicites ("d√©cembre", "fin mars", "samedi 23").

**Prompts affect√©s** :
- "Planifie une s√©ance photo familiale un dimanche matin en d√©cembre" ‚Üí novembre au lieu de d√©cembre
- "Calcule un brunch samedi 23 ou dimanche 24" ‚Üí novembre au lieu de 23/24
- "Propose trois soir√©es pour un escape game fin mars" ‚Üí novembre au lieu de fin mars

**Solutions propos√©es** :

1. **Am√©lioration des hints Gemini** (dans `src/lib/gemini.ts`)
   - D√©tecter les mois explicites ("d√©cembre", "mars") et ajouter des hints stricts
   - D√©tecter les dates explicites ("samedi 23") et forcer cette date
   - D√©tecter les p√©riodes ("fin mars", "d√©but avril") et calculer la p√©riode correspondante

2. **Post-traitement des dates** (dans `GeminiSuggestionPostProcessor.ts`)
   - Filtrer les dates g√©n√©r√©es pour ne garder que celles dans le mois mentionn√©
   - Filtrer pour "fin [mois]" (derni√®re quinzaine) ou "d√©but [mois]" (premi√®re quinzaine)

**Fichiers √† modifier** :
- `src/lib/gemini.ts` : Ajouter `buildTemporalHints()` pour am√©liorer les hints Gemini
- `src/services/GeminiSuggestionPostProcessor.ts` : Ajouter `filterDatesByExplicitConstraints()` et `filterDatesByPeriod()`

**Impact attendu** : R√©sout 4 prompts (21% des probl√®mes)

---

### Probl√®me 3 : Nombre de cr√©neaux insuffisant (1 prompt - 5%)

**Sympt√¥me** : Seulement 1 cr√©neau g√©n√©r√© au lieu de 2-3 attendus.

**Prompts affect√©s** :
- "Cherche un cr√©neau entre 11h et 13h mercredi pour un d√©jeuner partenariats" ‚Üí 1 cr√©neau (attendu: 2-3)

**Solutions propos√©es** :

1. **G√©n√©ration multiple pour d√©jeuners/partenariats**
   - Pour les contextes "d√©jeuner" ou "partenariats", g√©n√©rer syst√©matiquement 2-3 cr√©neaux
   - Espacer les cr√©neaux de 30-60 min dans la plage 11h30-13h30

**Fichier √† modifier** : `src/services/GeminiSuggestionPostProcessor.ts`
- Modifier `buildContextualSlots()` pour g√©n√©rer 2-3 cr√©neaux pour les d√©jeuners

**Impact attendu** : R√©sout 1 prompt (5% des probl√®mes)

---

### Probl√®me 4 : Plage horaire incorrecte pour certains contextes (1 prompt - 5%)

**Sympt√¥me** : Plage horaire incorrecte pour certains contextes sp√©cifiques.

**Prompts affect√©s** :
- "Calcule un brunch samedi 23 ou dimanche 24" ‚Üí 10h-11h au lieu de 11h30-13h

**Solutions propos√©es** :

1. **D√©tection du contexte "brunch"**
   - D√©tecter "brunch" AVANT "matin" dans `buildContextualSlots()`
   - Appliquer la plage horaire sp√©cifique (11h30-13h00) pour les brunchs

**Fichier √† modifier** : `src/services/GeminiSuggestionPostProcessor.ts`
- Modifier `buildContextualSlots()` pour d√©tecter "brunch" avant "matin"

**Impact attendu** : R√©sout 1 prompt (5% des probl√®mes)

---

### Plan d'impl√©mentation

**Phase 1 - Limitation du nombre de cr√©neaux** (Priorit√© HAUTE)
- Impact : R√©sout 6 prompts (32%)
- Taux de r√©ussite attendu apr√®s Phase 1 : 79% (15/19)

**Phase 2 - Am√©lioration des hints Gemini** (Priorit√© MOYENNE)
- Impact : R√©sout 4 prompts (21%)
- Taux de r√©ussite attendu apr√®s Phase 2 : 100% (19/19)

**Phase 3 - G√©n√©ration multiple pour d√©jeuners** (Priorit√© BASSE)
- Impact : R√©sout 1 prompt (5%)

**Phase 4 - D√©tection du contexte "brunch"** (Priorit√© BASSE)
- Impact : R√©sout 1 prompt (5%)

### Impact global attendu

- **Taux de r√©ussite actuel** : 47% (9/19)
- **Taux de r√©ussite apr√®s Phase 1** : 79% (15/19)
- **Taux de r√©ussite apr√®s toutes les phases** : 100% (19/19)

