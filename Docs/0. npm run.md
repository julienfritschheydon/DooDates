# Scripts de Développement DooDates

## Scripts individuels (npm run <script>)

### npm run dev
- Lance le serveur de développement Vite sur le port 8080
- Mode développement : hot reload, sourcemaps, pas d'optimisation
- Pour développer en local avec rechargement automatique
- **URL :** http://localhost:8080

### npm run dev:mobile
- Lance le serveur de développement Vite accessible sur le réseau local
- Permet de tester l'application sur smartphone/tablette
- Affiche l'URL réseau pour accès distant (ex: http://192.168.1.15:8080)
- **Équivalent à :** `vite --host`

### npm run build
- Production : Met à jour caniuse-lite + compile optimisé
- Code minifié, optimisé pour la production
- Génère le dossier dist/ prêt pour déploiement

### npm run build:dev
- Développement : Met à jour caniuse-lite + compile sans optimisation
- Code non minifié, conserve les sourcemaps
- Plus rapide à compiler, plus facile à déboguer

### npm run lint
- Analyse le code avec ESLint
- Détecte erreurs, problèmes de style, bonnes pratiques
- N'exécute pas l'application

### npm run preview
- Prévisualise le build de production localement
- Sert les fichiers du dossier dist/
- Pour tester le build avant déploiement

---

## Scripts de Démarrage Avancés

### start-dev.bat (Windows - Simple)
```bash
# Double-clic sur le fichier ou :
start-dev.bat
```
**Fonctionnalités :**
- ✅ Arrête tous les processus Node.js précédents
- ✅ Nettoie le cache Vite
- ✅ Démarre sur le port 8080 avec accès réseau
- ✅ Affiche les URLs local et mobile
- ✅ Interface colorée et informative

### start-dev.ps1 (PowerShell - Avancé)
```powershell
# Clic droit > "Exécuter avec PowerShell" ou :
powershell -ExecutionPolicy Bypass -File start-dev.ps1
```
**Fonctionnalités avancées :**
- ✅ Nettoyage complet des processus et ports
- ✅ Libération automatique des ports (8080, 8081, 3000-3002, 5173-5175)
- ✅ Détection automatique de l'adresse IP locale
- ✅ Nettoyage du cache Vite et dist/
- ✅ Gestion d'erreurs et conseils de dépannage
- ✅ Interface colorée avec émojis
- ✅ Configuration pare-feu automatique

---

## URLs d'Accès

### Local (PC)
- **Développement :** http://localhost:8080
- **Build preview :** http://localhost:4173

### Mobile/Réseau
- **IP détectée automatiquement :** Affiché dans le script PowerShell
- **IP par défaut :** http://192.168.1.15:8080
- **Vérifier votre IP :** `ipconfig | findstr "IPv4"`

---

## Résolution de Problèmes

### Port déjà utilisé
Si le port 8080 est occupé, Vite essaiera automatiquement :
- Port 8081
- Port 8082
- Etc.

### Accès mobile impossible
1. **Pare-feu Windows :** Ajoutez une exception pour le port 8080
   ```cmd
   netsh advfirewall firewall add rule name="DooDates Dev Server" dir=in action=allow protocol=TCP localport=8080
   ```

2. **Même réseau WiFi :** Vérifiez que PC et mobile sont sur le même réseau

3. **Box internet :** Certaines box bloquent la communication entre appareils

### Scripts PowerShell bloqués
```powershell
# Autoriser l'exécution temporairement :
Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope CurrentUser
```

---

## Recommandations

### Pour le développement quotidien
- **Simple :** `npm run dev` ou double-clic sur `start-dev.bat`
- **Test mobile :** Utiliser `start-dev.ps1` pour IP automatique

### Pour les tests
- **Local uniquement :** `npm run dev`
- **Avec mobile :** `npm run dev:mobile` ou scripts batch/PowerShell
- **Build test :** `npm run build` puis `npm run preview`

### Configuration optimale
1. Configurer le pare-feu une fois avec la règle ci-dessus
2. Utiliser `start-dev.ps1` pour démarrage propre
3. Bookmarker l'IP mobile sur votre smartphone