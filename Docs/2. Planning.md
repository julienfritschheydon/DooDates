# DooDates - Development Planning
---

## üêõ BUGS & T√ÇCHES TECHNIQUES

**Status actuel :** 604/641 tests passent (94%) - 28 tests skipp√©s


---

IDEES


## üö®  B√äTA
**Objectif de la semaine :** D√©marrer la b√™ta

**Objectif :** Lancer une b√™ta fonctionnelle avec 10-20 utilisateurs testeurs  
**Deadline :** Mi-novembre 2025  
**Documents de r√©f√©rence :**
- `2025-10-30-ANALYSE-PRE-BETA.md` - Analyse strat√©gique compl√®te
- `BUGS-PRE-BETA.md` - Tracking bugs et features manquantes
- `TESTS-MANUELS-PRE-BETA.md` - Protocole de tests
- **Analyse SurveyMonkey (31/10/2025)** - Quick wins identifi√©s pour adoption

### Semaine 1 : Tests Analytics IA + Corrections (12h)

#### 1. Tests manuels Analytics IA (4h) üî• PRIORIT√â
- [X] **Jour 1 (8h) :** Tests fonctionnels complets 
   - [X] Coh√©rence des croix pour fermer (design et placement)
   - [X] Mettre l'application sur GitHub Pages ‚Üí rendre le repo public et v√©rifier que tout fonctionne
   - [X] Optimisations CI
   - [X] Quotas freemium (5 anonyme, 1000 authentifi√©, blocage) ‚úÖ
   - [X] Test manuels
   - [X] **V√©rifier co√ªts API r√©els (monitoring Gemini)** ‚úÖ 03 Nov 2025
   - [X] **Quota IA - Documentation : Aligner code, UI, doc et tests** ‚úÖ 03 Nov 2025
   - [X] **Supprimer QuotaExplanation et utiliser la page /pricing** ‚úÖ 03 Nov 2025
      - Composant QuotaExplanation.tsx supprim√© (249 lignes √©limin√©es)
      - Dashboard.tsx utilise d√©sormais un simple bouton vers `/pricing`
      - Page pricing d√©j√† existante (src/pages/Pricing.tsx) avec tous les d√©tails
      - Calcul d√©taill√© des marges ajout√© au pricing (99.4% Premium, 98.3% Pro)


#### 2. Corrections bugs d√©couverts (2-4h)
- [ ] **Jour 2 :** Fixer les tests
   - [ ] Tests - Plan d'Action Prioris√©
         - **M√âTHODE SYST√âMATIQUE DE V√âRIFICATION** (√† appliquer pour chaque test) :
           1. V√©rifier si test skipp√© : `grep "test.describe.skip|test.skip"` dans le fichier
           2. V√©rifier tags : `grep "@smoke|@functional|@analytics"` dans le test
           3. V√©rifier exclusion CI : `grep "grep-invert"` dans workflows GitHub Actions
           4. Tester localement : `npx playwright test <fichier> --grep "<nom-test>" --list` pour voir si list√©
           5. Si skipp√© ou exclu : Noter dans le planning avant de corriger
         - **R√àGLE OBLIGATOIRE - TESTER TOUJOURS** :
           - **Apr√®s chaque correction** : Ex√©cuter le test en local pour valider
           - **Si √©chec** : Ajouter des logs d√©taill√©s (`console.log`) et screenshots (`page.screenshot()`) √† chaque √©tape critique
           - **Screenshots accessibles** : Sauvegarder dans `test-results/` ou `Docs/screenshots/` pour analyse
           - **Logs √† inclure** : √âtat des √©l√©ments (visibles/attach√©s), valeurs r√©cup√©r√©es, URLs, erreurs
         - [ ] **PRIORIT√â 1 - Tests E2E Bloquants (CI/Production)**
            - [X] **1.1 console-errors.spec.ts - Test page r√©sultats @smoke (FLAKY)**
            - [X] **1.2 Analytics IA ‚Äì Quick Queries (@analytics) - √âchec en CI**
            - [X] **1.2.1 Fix Setup Analytics IA Tests - Timeout cr√©ation/vote poll**
            - [X] **1.3 BUG: Tests Analytics IA - Suite Compl√®te (serial + sharding incompatibles)**
               - [X] √âtape 1: √âvaluer l'int√©r√™t du test
                  - ‚úÖ Suite compl√®te de tests Analytics IA (9 tests en mode serial)
                  - ‚úÖ Feature critique Analytics IA
                  - ‚úÖ Tests actuellement actifs mais incompatibles avec sharding CI
                  - ‚úÖ Impact : Tests exclus du sharding, augmentation temps CI
                  - ‚úÖ Note : Tests passent en local (test 1 et 2 valid√©s ‚úÖ, suite compl√®te test√©e : 9/9 passent en 1.4m)
               - [X] √âtape 2: Comprendre le probl√®me
                  - ‚úÖ `test.describe.configure({ mode: 'serial' })` ligne 37 incompatible avec `--shard=X/2`
                  - ‚úÖ Tests encha√Æn√©s n√©cessitent s√©quence (test 1 cr√©e poll, test 2 utilise pollSlug)
                  - ‚úÖ Sharding distribue tests al√©atoirement entre shards ‚Üí test 2 peut s'ex√©cuter avant test 1
                  - ‚úÖ Localisation: `tests/e2e/analytics-ai.spec.ts` (ligne 36-37)
                  - ‚úÖ Variables partag√©es : `pollSlug`, `pollCreated` (lignes 33-34)
                  - ‚úÖ Tests 2-6 d√©pendent de pollSlug cr√©√© dans test 1
                  - ‚úÖ Tests 7-9 sont partiellement ind√©pendants mais utilisent aussi pollSlug
               - [X] √âtape 3: Solution
                  - ‚úÖ **Option A** analys√©e : Refactoriser en tests ind√©pendants
                     - Avantages : Compatible sharding, tests isol√©s, plus robuste
                     - Inconv√©nients : Plus long (setup r√©p√©t√© 6x), plus de code, perte optimisation
                  - ‚úÖ **Option B** choisie : Ex√©cuter cette suite hors sharding (job CI d√©di√© sans sharding)
                     - Avantages : Garde structure actuelle, simple, optimis√© (m√™me poll r√©utilis√©)
                     - Inconv√©nients : Pas de parall√©lisation, plus lent (acceptable : ~1.4m)
                  - ‚úÖ **Option C** analys√©e : Utiliser `--grep` pour exclure de sharding
                     - Rejet√©e : Exclusion partielle, moins clair
                  - ‚úÖ **D√©cision** : Option B (job CI d√©di√©) pour simplicit√© et optimisation
               - [X] √âtape 4: Action
                  - [X] Analyser structure actuelle des tests (9 tests encha√Æn√©s)
                     - Test 1 : Setup (cr√©e poll, vote 5x, cl√¥ture) ‚Üí d√©finit pollSlug
                     - Tests 2-6 : D√©pendent de pollSlug (utilisent le poll cr√©√© dans test 1)
                     - Tests 7-9 : Ind√©pendants (cr√©ent leur propre poll ou testent erreurs)
                  - [X] **D√©cision** : Option B recommand√©e (job CI d√©di√© sans sharding)
                     - Raison : Tests 2-6 sont optimis√©s pour utiliser le m√™me poll (gain temps)
                     - Alternative Option A trop co√ªteuse (setup r√©p√©t√© 6x)
                     - Solution : Ex√©cuter suite compl√®te Analytics IA hors sharding dans CI
                     - Impl√©menter job d√©di√© dans workflow CI
                  - [X] Impl√©menter la solution
                     - [X] Cr√©√© job `e2e-analytics-suite` dans `3-main-post-merge.yml`
                     - [X] Job ex√©cute uniquement la suite compl√®te (grep "Analytics IA - Suite Compl√®te")
                     - [X] Pas de sharding (ex√©cution s√©quentielle des 9 tests)
                     - [X] Rapport HTML en artefact en cas d'√©chec
                  - [X] Tester en local ‚úÖ
                     - [X] Test√© suite compl√®te : 9/9 tests passent en 1.4m
                     - [X] Valid√© que les tests fonctionnent en mode serial
                     - [X] Note : Le vrai test sharding sera en CI (plusieurs workers parall√®les)
                  - [ ] Valider en CI
                     - [ ] √Ä faire lors de la prochaine PR/merge
                     - [ ] V√©rifier que le job `e2e-analytics-suite` s'ex√©cute correctement
                     - [ ] Confirmer que les 9 tests passent en CI sans conflit de sharding
                  - [X] Mettre √† jour test-guide.md ‚úÖ
                     - [X] Ajout√© note sur job d√©di√© sans sharding (ligne 29)
                     - [X] Mis √† jour section Niveau 3 CI/CD
                     - [X] Document√© solution dans section CI/CD workflows (ligne 444)
            - [X] **1.4 form-poll-regression.spec.ts - Suite compl√®te (serial + sharding incompatibles)** ‚úÖ COMPL√âT√â
               - [X] √âtape 1: √âvaluer l'int√©r√™t du test
                  - ‚úÖ Suite de tests de non-r√©gression Form Poll (4 tests)
                  - ‚úÖ Tests critiques pour workflow Form Poll (cr√©ation, ajout, suppression, reprise)
                  - ‚úÖ Actuellement skipp√©e compl√®tement (`test.describe.skip()` ligne 35)
                  - ‚úÖ Impact : Pas de validation automatique du workflow Form Poll en CI
                  - ‚úÖ Tests list√©s par Playwright : 4 tests (R√âGRESSION #1, #2, #3, #4)
                  - ‚úÖ Tags : @smoke @critical @functional
                  - ‚úÖ **Conclusion** : Tests critiques pour workflow Form Poll, doivent √™tre r√©activ√©s
               - [X] √âtape 2: Comprendre le probl√®me
                  - ‚úÖ M√™me probl√®me que analytics-ai.spec.ts (serial + sharding)
                  - ‚úÖ `test.describe.configure({ mode: 'serial' })` ligne 36 incompatible avec sharding
                  - ‚úÖ Variables partag√©es : `pollCreated`, `pollUrl` (lignes 44-45)
                  - ‚úÖ R√âGRESSION #1 : Cr√©e poll ‚Üí d√©finit pollUrl (ligne 153)
                  - ‚úÖ R√âGRESSION #2 : Utilise pollUrl (d√©pend du test #1, ligne 202-203)
                  - ‚úÖ R√âGRESSION #3 : Utilise pollUrl (d√©pend du test #1, #2, ligne 306-307)
                     - ‚úÖ Requiert au moins 2 onglets (ligne 333) ‚Üí d√©pend du test #2 qui ajoute une question
                  - ‚úÖ R√âGRESSION #4 : Utilise pollUrl (d√©pend du test #1, ligne 380-382)
                  - ‚úÖ Probl√®mes sp√©cifiques identifi√©s :
                     - R√âGRESSION #2: Timeout IA possible (mock non-d√©terministe, race condition)
                     - R√âGRESSION #3: Attend 2 onglets minimum (ligne 333) ‚Üí √©chouera si test #2 √©choue ou skip
                  - ‚úÖ Localisation: `tests/e2e/form-poll-regression.spec.ts` (ligne 35-36)
                  - ‚úÖ **Conclusion** : Tests encha√Æn√©s avec d√©pendances fortes, n√©cessite mode serial
               - [X] √âtape 3: Solution
                  - ‚úÖ **Option A** analys√©e : Refactoriser en tests ind√©pendants
                     - Avantages : Compatible sharding, tests isol√©s, plus robuste
                     - Inconv√©nients : Plus long (setup r√©p√©t√© 4x), plus de code, perte optimisation
                     - **Rejet√©e** : Trop co√ªteuse en temps (cr√©ation poll 4x au lieu de 1x)
                  - ‚úÖ **Option B** choisie : Ex√©cuter cette suite hors sharding (job CI d√©di√©, comme analytics-ai)
                     - Avantages : Garde structure actuelle, simple, coh√©rent avec analytics-ai, optimis√©
                     - Inconv√©nients : Pas de parall√©lisation, plus lent (acceptable)
                     - **Avantage cl√©** : Coh√©rence avec solution analytics-ai (m√™me pattern)
                  - ‚úÖ **Option C** analys√©e : Remplacer par des tests unitaires
                     - Rejet√©e : Perte couverture E2E critique pour workflow Form Poll
                  - ‚úÖ **D√©cision** : Option B (job CI d√©di√©) pour coh√©rence et garder E2E complet
               - [X] √âtape 4: Action
                  - [X] Analyser structure actuelle des tests (4 tests encha√Æn√©s) ‚úÖ
                  - [X] D√©cider de la solution (Option B recommand√©e) ‚úÖ
                  - [X] Impl√©menter la solution (ajouter job CI d√©di√©) ‚úÖ
                     - [X] Ajout√© job `e2e-form-poll-regression` dans `3-main-post-merge.yml`
                     - [X] Job ex√©cute uniquement la suite Form Poll (grep "Form Poll - Tests de non-r√©gression")
                     - [X] Pas de sharding (ex√©cution s√©quentielle des 4 tests)
                     - [X] Rapport HTML en artefact en cas d'√©chec
                  - [X] R√©activer les tests (retir√© `test.describe.skip()` ligne 35) ‚úÖ
                  - [X] Tester en local ‚úÖ
                     - [X] Test #1 passe ‚úÖ (23.3s)
                     - [X] Test #2 √©chouait initialement ‚ùå : Timeout - IA n'ajoute pas la question
                     - [X] **Probl√®me identifi√©** : Mock IA ne d√©tectait pas les demandes de modification
                     - [X] **Fix appliqu√©** : Ajout d√©tection intention dans `global-setup.ts` (lignes 131-184)
                        - D√©tecte "ajoute", "supprime", etc. dans les prompts
                        - Retourne r√©ponse JSON avec `isModification: true` et action `ADD_QUESTION`/`REMOVE_QUESTION`
                        - Am√©lioration `beforeEach` pour navigation plus robuste (`toBeAttached` au lieu de `toBeVisible`)
                     - [X] **Tous les 4 tests passent maintenant** ‚úÖ (24.2s total)
                        - Test #1 : Cr√©ation Form Poll ‚úÖ
                        - Test #2 : Ajout question via IA ‚úÖ
                        - Test #3 : Suppression question ‚úÖ
                        - Test #4 : Reprise conversation apr√®s refresh ‚úÖ
                  - [ ] Valider en CI
                  - [X] Mettre √† jour test-guide.md ‚úÖ
                     - [X] Ajout√© section Form Poll Regression (ligne 118-127)
                     - [X] Mis √† jour commandes et notes CI/Sharding
                     - [X] Document√© solution dans section CI/CD workflows
         - [ ] **PRIORIT√â 2 - Tests Unitaires avec Beaucoup de Skipp√©s**
            - [ ] **2.1 PollActions.close.test.tsx (14 tests skipp√©s)**
               - [ ] √âtape 1: √âvaluer l'int√©r√™t du test
                  - Tests pour fonctionnalit√© de cl√¥ture de poll (critique)
                  - 14 tests skipp√©s = perte de couverture importante
                  - Localisation: `src/components/polls/__tests__/PollActions.close.test.tsx`
               - [ ] √âtape 2: Comprendre le probl√®me
                  - Toast mock ne fonctionne pas
                  - Tests timeout apr√®s 5s
                  - V√©rifier le mock de `useToast` hook
               - [ ] √âtape 3: Solution
                  - Fixer le mock toast (v√©rifier `@/hooks/use-toast`)
                  - Augmenter timeout si n√©cessaire
                  - V√©rifier que le mock est correctement configur√©
               - [ ] √âtape 4: Action
                  - [ ] Analyser le mock toast actuel
                  - [ ] Fixer le mock
                  - [ ] Tester tous les 14 tests
                  - [ ] Mettre √† jour test-guide.md
            - [ ] **2.2 SimulationComparison.test.ts (13 tests skipp√©s)**
               - [ ] √âtape 1: √âvaluer l'int√©r√™t du test
                  - Tests pour comparaison simulations vs r√©alit√©
                  - Feature peut-√™tre moins critique (simulation)
                  - 13 tests skipp√©s = perte de couverture
                  - Localisation: `src/lib/simulation/__tests__/SimulationComparison.test.ts`
               - [ ] √âtape 2: Comprendre le probl√®me
                  - localStorage mock ne fonctionne pas correctement dans les tests
                  - FIXME: Tests fragiles (ligne 31)
                  - Vitest/jsdom peut avoir des probl√®mes avec localStorage
               - [ ] √âtape 3: Solution
                  - Option A: Fixer localStorage mock (utiliser vitest-locale-storage ou mock manuel)
                  - Option B: Utiliser une abstraction pour localStorage (mockable)
                  - Option C: Supprimer si feature simulation non essentielle
               - [ ] √âtape 4: Action
                  - [ ] D√©cider si feature est critique
                  - [ ] Si oui: fixer localStorage mock
                  - [ ] Si non: supprimer les tests
                  - [ ] Mettre √† jour test-guide.md
         - [ ] **PRIORIT√â 3 - Tests Unitaires Simples (1 test skipp√©)**
            - [ ] **3.1 MultiStepFormVote.test.tsx (1 test skipp√©)**
               - [ ] √âtape 1: √âvaluer l'int√©r√™t du test
                  - Test de barre de progression (UI)
                  - 1 seul test skipp√©
                  - Localisation: `src/components/polls/__tests__/MultiStepFormVote.test.tsx` (ligne 82)
               - [ ] √âtape 2: Comprendre le probl√®me
                  - Pr√©cision flottante JavaScript (33.333333333333336% vs 33.33333333333333%)
                  - Probl√®me classique de comparaison de floats
               - [ ] √âtape 3: Solution
                  - Utiliser `toBeCloseTo()` au lieu de `toHaveStyle()` exact
                  - Ou arrondir la valeur avant comparaison
                  - Ou utiliser une tol√©rance dans la comparaison
               - [ ] √âtape 4: Action
                  - [ ] Fixer la comparaison (tol√©rance ou arrondi)
                  - [ ] Tester
                  - [ ] Mettre √† jour test-guide.md
            - [ ] **3.2 SimulationService.test.ts:74 (Test Gemini skipp√©)**
               - [ ] √âtape 1: √âvaluer l'int√©r√™t du test
                  - Test de g√©n√©ration avec Gemini API
                  - 1 seul test skipp√©
                  - Localisation: `src/lib/simulation/__tests__/SimulationService.test.ts` (ligne 74)
               - [ ] √âtape 2: Comprendre le probl√®me
                  - Besoin d'un mock pour l'API Gemini
                  - Test actuellement skipp√© avec `it.skip`
               - [ ] √âtape 3: Solution
                  - Ajouter un mock pour l'API Gemini (similaire √† E2E tests)
                  - Ou utiliser une API key de test
                  - Ou supprimer si non essentiel
               - [ ] √âtape 4: Action
                  - [ ] D√©cider si test est n√©cessaire
                  - [ ] Si oui: ajouter mock Gemini
                  - [ ] Si non: supprimer le test
                  - [ ] Mettre √† jour test-guide.md
         - [ ] **PRIORIT√â 4 - Tests Manquants (√Ä Cr√©er)**
            - [ ] **4.1 PollAnalyticsService.test.ts - Tests du service d'analytics**
               - [ ] √âtape 1: √âvaluer l'int√©r√™t du test
                  - Service critique pour Analytics IA
                  - Pas de tests = pas de couverture
                  - Localisation du service: `src/services/PollAnalyticsService.ts`
               - [ ] √âtape 2: Comprendre ce qui doit √™tre test√©
                  - Analyser le service pour identifier les fonctions √† tester
                  - D√©terminer les cas de test n√©cessaires
               - [ ] √âtape 3: Cr√©er les tests
                  - Cr√©er fichier `src/services/__tests__/PollAnalyticsService.test.ts`
                  - Tester toutes les fonctions publiques
                  - Mocker les d√©pendances (API Gemini, etc.)
               - [ ] √âtape 4: Action
                  - [ ] Analyser le service
                  - [ ] Cr√©er les tests
                  - [ ] V√©rifier que tous passent
                  - [ ] Mettre √† jour test-guide.md
            - [ ] **4.2 useAnalyticsQuota.test.ts - Tests du hook de quotas**
               - [ ] √âtape 1: √âvaluer l'int√©r√™t du test
                  - Hook critique pour quotas freemium (5/jour)
                  - Pas de tests = pas de couverture
                  - Localisation du hook: `src/hooks/useAnalyticsQuota.ts`
               - [ ] √âtape 2: Comprendre ce qui doit √™tre test√©
                  - Analyser le hook pour identifier les cas √† tester
                  - Quotas, limites, blocages, etc.
               - [ ] √âtape 3: Cr√©er les tests
                  - Cr√©er fichier `src/hooks/__tests__/useAnalyticsQuota.test.ts`
                  - Tester limites, quotas, blocages
                  - Mocker localStorage/storage
               - [ ] √âtape 4: Action
                  - [ ] Analyser le hook
                  - [ ] Cr√©er les tests
                  - [ ] V√©rifier que tous passent
                  - [ ] Mettre √† jour test-guide.md
            - [ ] **4.3 PollAnalyticsPanel.test.tsx - Tests du composant UI**
               - [ ] √âtape 1: √âvaluer l'int√©r√™t du test
                  - Composant UI critique pour Analytics IA
                  - Pas de tests = pas de couverture UI
                  - Localisation du composant: `src/components/polls/PollAnalyticsPanel.tsx`
               - [ ] √âtape 2: Comprendre ce qui doit √™tre test√©
                  - Analyser le composant pour identifier les interactions √† tester
                  - Rendu, clics, affichage de donn√©es, etc.
               - [ ] √âtape 3: Cr√©er les tests
                  - Cr√©er fichier `src/components/polls/__tests__/PollAnalyticsPanel.test.tsx`
                  - Tester rendu, interactions, √©tats
                  - Mocker les d√©pendances (service, hooks)
               - [ ] √âtape 4: Action
                  - [ ] Analyser le composant
                  - [ ] Cr√©er les tests
                  - [ ] V√©rifier que tous passent
                  - [ ] Mettre √† jour test-guide.md
      - ‚úÖ **Tests E2E - Optimisations Phase 1 & 2 en cours** (Voir `Docs/PERFORMANCE/E2E-OPTIMIZATION-ANALYSIS.md`)
        - ‚úÖ Phase 1 valid√©e: Workers CI (1‚Üí3), cache optimis√©, ~5 occurrences optimis√©es
        - üîÑ Phase 2 en cours: 6 fichiers optimis√©s (~30 occurrences waitForTimeout/networkidle supprim√©es)
        - ‚è≥ Actions restantes:
             - [ ] Terminer Phase 2: Optimiser ~126 occurrences restantes (edge-cases, mobile-voting, guest-workflow, authenticated-workflow)
             - [ ] Valider que tous les tests smoke passent apr√®s optimisations
             - [ ] Mesurer gain r√©el en CI vs temps local (Phase 1: 39.9s local)
             - [ ] D√©cider Phase 3 (fixtures r√©utilisables, mode serial) selon r√©sultats CI
             
- [ ] **Jour 3-4 :** Fixer les bugs identifi√©s lors des tests
   - [ ] Bugs critiques (bloquants)
   - [ ] Bugs majeurs (UX d√©grad√©e)
   - [ ] Bugs mineurs (cosm√©tiques)
         - [ ] Dashboard : organisation des centaines de fichiers + suppression scroll
         **Solution prioritaire (B√™ta) :**
         - Pagination avec vue fixe : calcul dynamique items/page selon viewport (responsive), pas de scroll page principale
         - Switch Grid/Table : vue table compacte pour pro (plus d'items visibles), vue grille pour utilisateurs standards
         - Tri et filtres conserv√©s avec pagination
         - Fichiers : `Dashboard.tsx` (pagination + switch vue), `DashboardTableView.tsx` (nouveau composant)
         **Post-b√™ta :** Organisation par dossiers/tags, virtualisation, archivage auto

#### 4. Tests g√©n√©raux & polish (4h)
- [ ] **Jour 6 :** Tests manuels complets app
   - [ ] Faire tester par Nathalie et Manus et Pierre et Erwan

### Semaine 2 : Features manquantes + Setup Production (12-14h)

#### 1. Acc√®s r√©sultats FormPoll + Email (6-7h) üî• CRITIQUE
**Voir `SPEC-FormPoll-Results-Access.md` pour d√©tails**

- [ ] **Jour 1-2 (3h) :** Visibilit√© des r√©sultats
   - [ ] Ajouter champ `resultsVisibility` dans `Poll` (creator-only, voters, public)
   - [ ] UI radio buttons dans `FormPollCreator.tsx`
   - [ ] Helpers `getCurrentUserId()` et `checkIfUserHasVoted()`
   - [ ] Contr√¥le d'acc√®s dans `FormPollResults.tsx`
   - [ ] Bouton conditionnel "Voir les r√©sultats" post-vote
   - [ ] Message explicatif si acc√®s refus√©

- [ ] **Jour 3-4 (3h) :** Email de confirmation
   - [ ] Champ `respondentEmail` dans `FormResponse`
   - [ ] Checkbox "Recevoir une copie par email" dans vote
   - [ ] Input email conditionnel
   - [ ] Service `EmailService.ts` avec template HTML
   - [ ] Int√©gration post-soumission (console.log MVP)

- [ ] **Jour 5 (1h) :** Tests manuels
   - [ ] Tester les 3 modes de visibilit√©
   - [ ] Tester email confirmation
   - [ ] V√©rifier UX compl√®te

#### 2. Landing page (2h)
- [ ] **Jour 6 :** Page d'accueil
   - [ ] Value proposition claire
   - [ ] CTA "Essayer gratuitement"
   - [ ] Screenshots de l'app (avec Analytics IA)
   - [ ] Section "Comment √ßa marche" (3 √©tapes)
   - [ ] Mention "Analytics IA gratuits"

#### 3. Setup Production (4-5h)
- [ ] **Jour 7 :** D√©ploiement & monitoring
   - [ ] D√©ploiement Vercel production (1h)
   - [ ] Configuration domain (doodates.com) (30min)
   - [ ] Setup Sentry pour monitoring erreurs (1h)
   - [ ] V√©rification Supabase production (30min)
   - [ ] Analytics & Tracking (Plausible/Posthog) (1h)
   - [ ] Tests smoke en production (1h)

### Semaine 3 : B√™ta Launch üöÄ
- **Jour 1 :** Recruter 10-20 beta testers
- [ ] Poster sur Reddit (r/SideProject, r/productivity)
- [ ] Partager sur LinkedIn/Twitter
- [ ] Contacter r√©seau personnel (10-20 personnes)
- [ ] Cr√©er formulaire feedback Google Forms
- **Jour 2-7 :** Monitoring, feedback, it√©rations rapides
- [ ] R√©ponse feedback utilisateurs (< 24h)
- [ ] Corrections bugs critiques d√©couverts
- [ ] It√©rations rapides sur UX

**Total :** ~28-30h sur 3 semaines
- Semaine 1 : Tests Analytics IA + Corrections (12h)
- Semaine 2 : Features manquantes + Setup Production (12-14h)
- Semaine 3 : B√™ta Launch + Monitoring (4-6h)

### M√©triques de succ√®s
**Acquisition :**
- [ ] 10-20 beta testers recrut√©s
- [ ] 50-100 visiteurs landing page

**Activation :**
- [ ] 10+ sondages cr√©√©s
- [ ] 50+ votes re√ßus
- [ ] 5+ exports r√©alis√©s
- [ ] 20+ queries Analytics IA effectu√©es
- [ ] 3+ utilisateurs atteignant quota Analytics

**Qualit√© :**
- [ ] < 5 bugs critiques remont√©s
- [ ] Temps r√©ponse moyen < 2s
- [ ] 0 erreurs Sentry critiques

**Feedback :**
- [ ] 70%+ feedback positif
- [ ] 3+ suggestions d'am√©lioration concr√®tes
- [ ] Identification top 3 features demand√©es

---

### ‚úÖ Avantages Comp√©titifs vs SurveyMonkey

**Analyse SurveyMonkey (31/10/2025) :** Identification des points de friction et opportunit√©s de diff√©renciation.

**DooDates bat SurveyMonkey sur :**
1. ‚úÖ **Export gratuit** (4 formats : CSV/JSON/PDF/Markdown) - vs bloqu√© compl√®tement (lock-in agressif)
2. ‚úÖ **R√©ponses illimit√©es** - vs 25 max (restrictif)
3. ‚úÖ **Branding retirable** - vs logo forc√© partout
4. ‚úÖ **IA conversationnelle** - vs interface complexe sans guide
5. ‚úÖ **Questions conditionnelles gratuites** - vs payant
6. ‚úÖ **Onboarding guid√©** (apr√®s Quick Win #1) - vs aucun
7. ‚úÖ **Types questions pros gratuits** (Rating, NPS) - vs limit√©s en version gratuite

**Message marketing :**
> "SurveyMonkey vous frustre avec ses limites ? DooDates est l'alternative gratuite et intelligente. Cr√©ez en parlant naturellement, exportez librement, partagez sans limite."

**Positionnement strat√©gique :** Freemium g√©n√©reux + IA conversationnelle (voir aussi section "Strat√©gie Tarifaire" pour d√©tails pricing)

---

### ‚ùå CE QUI N'EST PAS DANS LA B√äTA

### Features Report√©es APR√àS B√™ta

**NE PAS impl√©menter maintenant** : Ces features ajoutent de la complexit√© sans valeur imm√©diate pour valider le concept. Elles seront ajout√©es APR√àS avoir collect√© du feedback r√©el.
- ‚ùå Templates pr√©d√©finis (l'IA suffit)
- ‚ùå Multi-step flow Typeform-style
- ‚ùå Th√®mes visuels premium (3 th√®mes basiques OK)
- ‚ùå Simulation IA des r√©ponses
- ‚ùå Analyse temporelle continue
- ‚ùå Validation d'objectifs IA
- ‚ùå Google Sheets export
- ‚ùå Calendar integration
- ‚ùå PWA / Mobile native
- ‚ùå Analytics avanc√©s
- ‚ùå Scoring system
- ‚ùå Quotas par option
- ‚ùå File uploads
- ‚ùå SSO Enterprise

---

## POST BETA - Diff√©renciateurs IA Uniques

### EN COURS

---

### üí∞ UI Pricing - Int√©grations Avanc√©es (POST BETA)

#### Option C: Conversion optimis√©e (30 min) ‚≠ê RECOMMAND√â

**Objectif:** Maximiser la conversion en affichant le pricing aux moments strat√©giques

**Composants:**
- [X] Sidebar: Bouton "Tarifs" apr√®s "Tableau de bord" ‚úÖ FAIT
- [ ] Modal quota: Trigger automatique √† 80% et 100% des cr√©dits
- [ ] Indicateur cr√©dits: Badge cliquable dans TopBar "42/100 ‚ö°"
  - Tooltip: D√©tails consommation (messages: 20, analytics: 15, simulations: 7)
  - Click ‚Üí Redirect `/pricing` avec anchor #upgrade

**Fichiers √† cr√©er/modifier:**
- [ ] `src/components/QuotaIndicator.tsx` - Badge cr√©dits TopBar
- [ ] `src/components/modals/QuotaReachedModal.tsx` - Modal upgrade
- [ ] `src/hooks/useCredits.ts` - Hook unifi√© gestion quotas

**Triggers modal:**
- 80% cr√©dits: "Vous approchez de votre limite" (dismissible 7 jours)
- 100% cr√©dits: "Quota atteint" (force affichage)
- Apr√®s 3 blocages cons√©cutifs: Recommandation personnalis√©e

**Priorit√©:** üü° MOYENNE - Conversion important mais pas bloquant beta

---

#### Option D: Compl√®te (1h)

**Objectif:** Visibilit√© maximale du pricing dans toute l'app

**Composants Option C +:**
- [ ] Dashboard card "Votre plan" (tier actuel, usage, upgrade CTA)
- [ ] Menu Settings: Section "Abonnement & Facturation"
- [ ] Floating button: "Upgrade" si cr√©dits < 20%
- [ ] Banner temporaire: Promotions (ex: "-50% beta testeurs")

**Dashboard card:**
- Tier actuel + badge couleur
- Graphique usage mensuel (cr√©dits, sondages)
- Boutons: "Voir les plans" / "Acheter cr√©dits"

**Menu Settings:**
- Historique facturation
- M√©thode de paiement
- Gestion abonnement (upgrade/downgrade/cancel)
- Factures t√©l√©chargeables PDF

**Fichiers √† cr√©er:**
- [ ] `src/components/dashboard/PlanCard.tsx`
- [ ] `src/components/settings/SubscriptionSettings.tsx`
- [ ] `src/components/ui/FloatingUpgradeButton.tsx`

**Priorit√©:** üü¢ BASSE - Nice to have, attendre feedback beta

---

### üî• APR√àS B√äTA - Diff√©renciateurs Visuels

#### Graphiques Interactifs Recharts (5-7h) üìä DIFF√âRENCIATEUR

**Concept :** Visualisations avanc√©es pour matrices et comparaisons dates (utilise Recharts d√©j√† install√©)

**Pr√©requis :** Feedback b√™ta confirmant usage matrices + besoins comparaisons dates

**Impl√©mentation (5-7h) :**

**1. Matrices ‚Üí Heatmap interactive Recharts (3h)**
- [ ] Convertir tableau HTML Matrix en Heatmap Recharts
- [ ] Tooltip interactif au hover (ligne, colonne, valeur, %)
- [ ] Gradient de couleur dynamique (0% blanc ‚Üí 100% bleu satur√©)
- [ ] Export heatmap en PNG/SVG (feature Pro)
- [ ] Tests avec matrices 3x3, 5x5, 10x10

**2. Sondages dates ‚Üí Stacked Bar Chart (2-3h)**
- [ ] Chart comparatif empil√© (yes/maybe/no par date)
- [ ] Axe X dates, axe Y nombre de votes
- [ ] L√©gende interactive (toggle segments)
- [ ] Tooltip d√©taill√© au hover
- [ ] Bouton toggle "Tableau / Graphique"

**3. Dashboard ‚Üí Graphiques d'√©volution (2h - optionnel)**
- [ ] Line chart √©volution votes dans le temps
- [ ] R√©utilisation ChartContainer/Tooltip existants
- [ ] Affichage conditionnel (>10 votes minimum)

**4. Copier**
- [ ] Copier les graphiques (bouton comme Google Form)
   
**Fichiers concern√©s :**
- `src/components/polls/FormPollResults.tsx` - Heatmap matrices
- `src/pages/Results.tsx` - Stacked bars dates
- `src/components/ui/chart.tsx` - D√©j√† pr√™t (wrapper Recharts)
- `src/lib/chartHelpers.ts` (nouveau) - Transformations donn√©es

**R√©utilisation :**
- ‚úÖ `ChartContainer`, `ChartTooltip`, `ChartLegend` d√©j√† cod√©s
- ‚úÖ Recharts 2.12.7 d√©j√† install√© (0 KB ajout√©)
- ‚úÖ Configuration dark mode existante

**M√©triques de d√©cision :**
- Si >30% des sondages contiennent matrices ‚Üí Impl√©menter heatmap
- Si >50% des sondages dates ont >5 options ‚Üí Impl√©menter stacked bars
- Sinon ‚Üí Garder visualisations simples CSS

**Priorit√© :** üü° MOYENNE - Feature premium bas√©e sur usage r√©el

---

#### 2. üéØ Validation d'Objectifs (1h) ‚úÖ **EN COURS**

**Concept :** Int√©gration dans la simulation existante - l'utilisateur d√©finit un objectif optionnel, l'IA valide que le questionnaire permet de l'atteindre

**Cas d'usage principal :**
- Utilisateurs cr√©ant des formulaires **manuellement** (via GUI, pas IA)
- Besoin de valider que leur questionnaire atteint leur objectif
- Safety net pour les cr√©ations manuelles (pas de guidance IA initiale)

**Approche simplifi√©e (1h) :**
- Champ optionnel "Objectif" ajout√© dans l'interface de simulation
- IA analyse les r√©sultats simul√©s par rapport √† l'objectif d√©fini
- Rapport enrichi avec section "Validation objectif" si objectif fourni

**Workflow :**
1. Utilisateur cr√©e formulaire manuellement
2. Lance simulation avec objectif optionnel ("Mesurer satisfaction client")
3. IA simule r√©ponses + analyse ad√©quation questionnaire ‚Üî objectif
4. Rapport affiche : Score alignement + Points forts + Suggestions d'am√©lioration

**Impl√©mentation :**
- ‚úÖ Champ `objective?: string` dans `SimulationRequest`
- ‚úÖ Prompt Gemini enrichi pour analyser objectif
- ‚úÖ UI : Input "Objectif (optionnel)" dans interface simulation
- ‚úÖ Rapport : Section "Validation objectif" conditionnelle

**Priorit√© :** üü¢ QUICK WIN - R√©utilise infrastructure existante, valeur imm√©diate

---



#### 6. Sections de questions (1-2h) ‚è≥ EN DISCUSSION

**Concept :** Permettre de grouper les questions par th√®mes/sections pour am√©liorer la lisibilit√©.

**Approche propos√©e : Sections int√©gr√©es dans la liste**
- Au lieu de Q1, Q2, Q3... ‚Üí S1 (Section 1), Q1, Q2, S2 (Section 2), Q3...
- Type `FormItem = FormQuestion | FormSection`
- Boutons "Ajouter question" et "Ajouter section" dans la m√™me liste
- Sections = cards visuelles avec fond diff√©rent + ic√¥ne

**Exemple visuel :**
```
üìã S1. Informations personnelles
    Vos coordonn√©es de base

Q1. Nom
Q2. Email

üí≠ S2. Feedback
    Votre avis sur notre service

Q3. Satisfaction (1-5)
Q4. Commentaires
```

**Impl√©mentation (1-2h) :**
- [ ] Ajouter type `FormSection` dans `pollStorage.ts`
- [ ] Modifier `FormEditor` pour supporter sections + questions
- [ ] UI : Boutons "Ajouter question" / "Ajouter section"
- [ ] Rendu visuel : Cards sections avec style distinct
- [ ] Mode classique : Sections = s√©parateurs visuels
- [ ] Mode multi-step : Afficher titre section au-dessus de la question

**Avantages :**
- ‚úÖ Simple et flexible
- ‚úÖ Am√©liore lisibilit√© formulaires longs
- ‚úÖ Pas de refonte majeure
- ‚úÖ Compatible avec modes classique ET multi-step

**Statut :** ‚è≥ EN DISCUSSION - Attente d√©cision utilisateur

---

#### Param√®tres Avanc√©s des Formulaires (POST BETA) (8-10h)

**Fonctionnalit√©s pr√©vues mais non impl√©ment√©es :**

**Param√®tres de Base :**
- [ ] Personnalisation titre et description
- [ ] Option afficher/masquer logo DooDates
- [ ] Option afficher temps estim√© de compl√©tion
- [ ] Option afficher nombre de questions

**Param√®tres Avanc√©s :**
- [ ] Autoriser r√©ponses anonymes (toggle)
- [ ] Connexion requise (compte Google) pour voter
- [ ] Une seule r√©ponse par personne (cookie)
- [ ] Autoriser modification apr√®s soumission
- [ ] Deadline configurable (date/heure)
- [ ] Limite nombre de r√©ponses (illimit√© ou max)

**Email confirmation :**
- [ ] Checkbox "Recevoir une copie par email"
- [ ] Input email conditionnel (visible si checkbox)
- [ ] Envoi email avec r√©capitulatif des r√©ponses

**Visibilit√© des R√©sultats :**
- [ ] Mode "Cr√©ateur uniquement"
- [ ] Mode "Participants apr√®s vote"
- [ ] Mode "Public (tout le monde)"
- [ ] UI radio buttons pour choisir la visibilit√©
- [ ] Contr√¥le d'acc√®s dans page r√©sultats

**Priorit√© :** üü° MOYENNE - Features importantes mais pas bloquantes pour beta
**Voir aussi :** Section "Acc√®s aux r√©sultats FormPoll + Email confirmation" pour impl√©mentation partielle

---

#### Acc√®s aux r√©sultats FormPoll + Email confirmation (6h30)

**Probl√®me actuel :**
- ‚ùå Bouton "Voir les r√©sultats" affich√© mais acc√®s refus√© (frustrant)
- ‚ùå Pas de contr√¥le pour le cr√©ateur sur qui peut voir les r√©sultats
- ‚ùå Pas de copie des r√©ponses par email pour le votant

**Solution :** Voir `SPEC-FormPoll-Results-Access.md` pour d√©tails complets.

**1. Visibilit√© des r√©sultats (2h30)**
- [ ] Ajouter champ `resultsVisibility` dans interface `Poll` (3 modes : creator-only, voters, public)
- [ ] Cr√©er UI radio buttons dans `FormPollCreator.tsx` pour choisir la visibilit√©
- [ ] Impl√©menter helpers `getCurrentUserId()` et `checkIfUserHasVoted()`
- [ ] Ajouter contr√¥le d'acc√®s dans `FormPollResults.tsx` (v√©rifier permissions)
- [ ] Modifier √©cran post-vote pour afficher bouton conditionnel "Voir les r√©sultats"
- [ ] Afficher message explicatif si acc√®s refus√©

**2. Email de confirmation (3h)**
- [ ] Ajouter champ `respondentEmail` dans interface `FormResponse`
- [ ] Cr√©er checkbox "Recevoir une copie par email" dans `FormPollVote.tsx`
- [ ] Ajouter input email conditionnel (visible si checkbox coch√©e)
- [ ] Modifier `addFormResponse()` pour stocker l'email
- [ ] Cr√©er service `EmailService.ts` avec fonction `sendVoteConfirmationEmail()`
- [ ] Cr√©er template HTML email avec r√©capitulatif des r√©ponses
- [ ] Int√©grer appel service apr√®s soumission (console.log MVP, Resend API en Phase 2)

**3. Tests manuels (1h)**
- [ ] Tester mode "creator-only" : V√©rifier acc√®s refus√© pour non-cr√©ateur
- [ ] Tester mode "voters" : Voter puis v√©rifier acc√®s autoris√© aux r√©sultats
- [ ] Tester mode "public" : V√©rifier acc√®s sans voter
- [ ] Tester email : Voter avec email et v√©rifier console.log
- [ ] V√©rifier UX compl√®te : Vote ‚Üí Email ‚Üí R√©sultats

**Fichiers modifi√©s :**
- `src/lib/pollStorage.ts` - Types + helpers
- `src/components/polls/FormPollCreator.tsx` - UI visibilit√©
- `src/components/polls/FormPollResults.tsx` - Contr√¥le d'acc√®s
- `src/components/polls/FormPollVote.tsx` - Email + bouton conditionnel
- `src/services/EmailService.ts` - Service email (nouveau fichier)

**Impact utilisateur :**
- ‚úÖ Transparence : Le cr√©ateur contr√¥le la visibilit√©
- ‚úÖ Confiance : Le votant re√ßoit ses r√©ponses par email
- ‚úÖ Pas de frustration : Bouton "Voir r√©sultats" fonctionne correctement

---

#### Analytics Anonymes Simulation (3h) üéØ AM√âLIORATION CONTINUE

**Concept :** Collecter m√©triques anonymes des simulations pour am√©liorer les benchmarks

**Valeur ajout√©e :**
- **Benchmarks temps r√©el DooDates** vs moyennes industrie g√©n√©riques
- Comparaison pertinente : "Votre questionnaire : 20% abandon (moyenne DooDates : 28%)"
- Am√©lioration continue des seuils de d√©tection
- Diff√©renciateur comp√©titif (SurveyMonkey ne fait pas √ßa)

**Architecture :**
```typescript
// M√©triques anonymes (aucune donn√©e identifiable)
interface SimulationMetricsAnonymous {
  context: SimulationContext;
  questionCount: number;
  avgCompletionRate: number;
  avgTotalTime: number;
  avgDropoffRate: number;
  questionTypes: Record<string, number>;
  timestamp: Date;
}
```

**Impl√©mentation (3h) :**
1. **Service Analytics** (1h)
   - Fonction `trackSimulationMetrics(result)` anonyme
   - Envoi vers Supabase (table `simulation_metrics_anonymous`)
   - Aucune donn√©e identifiable (pas de pollId, userId, questions, r√©ponses)
   
2. **Service Benchmarks** (1h)
   - Fonction `getBenchmarks(context, questionCount)`
   - Calcul moyennes sur 30 derniers jours
   - Cache 24h pour performances
   - Agr√©gation par contexte et nombre de questions
   
3. **UI Comparaison** (1h)
   - Afficher benchmarks dans SimulationReport
   - Section "Votre questionnaire vs moyenne DooDates"
   - Indicateurs visuels (meilleur/moins bon que moyenne)

**Conformit√© RGPD :** ‚úÖ 100% OK
- Aucune donn√©e personnelle
- Aucun identifiant
- Agr√©gation uniquement
- Opt-out possible dans settings

**Pr√©requis :** Phase 1 Simulation IA termin√©e + retours utilisateurs

**Priorit√© :** üü° MOYENNE - Am√©lioration apr√®s validation MVP

---





---

#### Export PDF Rapport Simulation (1h) üíº PRO

**Concept :** Exporter le rapport de simulation en PDF (feature Pro uniquement)

**Valeur ajout√©e :**
- **Partage** : Envoyer le rapport √† l'√©quipe
- **Documentation** : Garder trace des tests
- **Professionnalisme** : Format standard pour entreprises
- **Mon√©tisation** : Feature Pro exclusive

**Contenu PDF :**
- M√©triques globales (compl√©tion, temps, abandon)
- Liste des probl√®mes d√©tect√©s avec recommandations
- Co√ªt estim√© de la simulation
- Branding DooDates

**Impl√©mentation (1h) :**
- R√©utiliser logique export PDF existante (FormPollResults)
- Template HTML pour rapport simulation
- G√©n√©ration PDF c√¥t√© client (window.print)
- Bouton "Exporter PDF" dans SimulationReport (d√©j√† pr√©sent, √† activer)

**Pr√©requis :** Phase 1 Simulation IA termin√©e

**Priorit√© :** üü¢ BASSE - Nice to have, pas bloquant pour MVP

---

#### File & Media Support (5-8h) üíº OPPORTUNIT√â B2B

**Concept :** Upload fichiers pour g√©n√©ration intelligente de questions

**Valeur ajout√©e :**
- Cas d'usage B2B : "Upload brief client ‚Üí questionnaire g√©n√©r√©"
- Diff√©renciation vs SurveyMonkey (qui n'a pas √ßa)
- Co√ªt technique faible (pas de stockage permanent)
- Acc√©l√®re cr√©ation pour utilisateurs pros

**Fonctionnalit√©s :**
- Upload PDF/CSV/DOCX (+ images avec OCR ?)
- IA extrait contexte et g√©n√®re questions
- Exemple : Upload "Satisfaction Client Q3.pdf" ‚Üí IA g√©n√®re questionnaire adapt√©
- Traitement temporaire uniquement (pas de stockage)

**üìã TODO :**
- Formats support√©s (PDF/DOCX/CSV suffisants ? Images ?)
- Limite taille (5MB ? 10MB ?)
- Traitement (extraction texte puis prompt Gemini classique)

**Priorit√© :** üü° MOYENNE - Opportunit√© B2B √† valider

---

### Phase 3 (Mois 4-6+) : IA Temps R√©el - 20-25h
**Objectif :** Analyse continue n√©cessitant volume de donn√©es

#### 5. üìà Analyse Temporelle Continue (20-25h)

**Concept :** L'IA analyse l'√©volution des r√©ponses en temps r√©el pendant la collecte

**Valeur ajout√©e :**
- D√©tection pr√©coce de probl√®mes (baisse taux r√©ponse, tendances n√©gatives)
- Optimisation campagnes en cours
- Valeur surtout pour entreprises avec volume (500+ r√©ponses/poll)

**Fonctionnalit√©s :**
- Snapshots automatiques √† intervalles configurables
- D√©tection de tendances ("R√©ponses n√©gatives +15% depuis hier")
- Alertes intelligentes (baisse taux r√©ponse, tendances n√©gatives)
- Analyse comparative temporelle (Semaine 1 vs Semaine 2)

**üìã TODO :** D√©finir fr√©quences snapshot, seuils d'alerte, types de tendances
‚Üí Voir document SurveyMonkey section 10.4 pour cas d'usage d√©taill√©s

**Priorit√© :** üü¢ BASSE - N√©cessite volume, infrastructure lourde, valeur B2B uniquement

**Note :** Garder en Phase 3 ou post-lancement selon adoption

---

## üí∞ NOUVEAU SYST√àME QUOTAS & PRICING (PRIORITAIRE)

### üîí S√âCURISATION QUOTAS & PROTECTION ANTI-ABUS (CRITIQUE)

**Date analyse :** 03 Novembre 2025  
**Probl√®me identifi√© :** Syst√®me actuel vuln√©rable aux abus (localStorage + cl√© API expos√©e)

#### ‚ö†Ô∏è FAILLES ACTUELLES

**1. Quotas localStorage (c√¥t√© client uniquement)**
- ‚ùå Stockage dans `localStorage.getItem('doodates_ai_quota')`
- ‚ùå Bypass trivial : `localStorage.setItem('doodates_ai_quota', JSON.stringify({aiMessagesUsed: 0}))`
- ‚ùå Mode navigation priv√©e = nouveau quota √† chaque fois
- ‚ùå Pas de v√©rification serveur avant appel Gemini API

**2. Cl√© API Gemini expos√©e**
- ‚ùå `VITE_GEMINI_API_KEY` dans le bundle client (visible par tous)
- ‚ùå Extraction possible : DevTools ‚Üí Sources ‚Üí Rechercher "GEMINI_API_KEY"
- ‚ùå Utilisation directe de la cl√© pour appels illimit√©s
- ‚ùå Co√ªt illimit√© possible pour vous

**3. Impact financier**
- 1 utilisateur malveillant = 10 000+ appels API/mois
- Co√ªt estim√© : 50-100‚Ç¨/mois par abus
- Risque : faillite si plusieurs abus simultan√©s

#### ‚úÖ SOLUTION : ARCHITECTURE S√âCURIS√âE

**Principe :** Toute v√©rification de quota + appel API doit passer par serveur (Supabase Edge Function)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CLIENT (React)                          ‚îÇ
‚îÇ ‚ùå Plus de cl√© API Gemini              ‚îÇ
‚îÇ ‚ùå Plus de v√©rification quota locale   ‚îÇ
‚îÇ ‚úÖ Token JWT Supabase (authentifi√©)     ‚îÇ
‚îÇ ‚úÖ Tous appels ‚Üí Edge Function          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì HTTPS
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ SUPABASE EDGE FUNCTION (/api/chat)       ‚îÇ
‚îÇ ‚úÖ V√©rifie JWT (auth.uid())              ‚îÇ
‚îÇ ‚úÖ V√©rifie quota DB (transaction atomique)‚îÇ
‚îÇ ‚úÖ Consomme cr√©dit avant appel API       ‚îÇ
‚îÇ ‚úÖ Cl√© Gemini = variable serveur (safe)  ‚îÇ
‚îÇ ‚úÖ Rate limiting userId + IP             ‚îÇ
‚îÇ ‚úÖ Logs audit (qui a fait quoi)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ GEMINI API                               ‚îÇ
‚îÇ ‚úÖ Cl√© jamais expos√©e au client          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Impl√©mentation :**

**Backend (Supabase Edge Function):**
- [ ] Cr√©er `/supabase/functions/check-quota-and-chat/index.ts`
- [ ] V√©rifier JWT : `const userId = await verifyJWT(request)`
- [ ] V√©rifier quota DB : `SELECT credits_remaining FROM user_quotas WHERE user_id = $1 FOR UPDATE`
- [ ] Consommer atomiquement : `UPDATE user_quotas SET credits_remaining = credits_remaining - 1`
- [ ] Appeler Gemini API (cl√© dans `Deno.env.get('GEMINI_API_KEY')`)
- [ ] Retourner r√©ponse uniquement si succ√®s
- [ ] Rate limiting : 100 messages/heure par userId, 20/heure par IP (invit√©s)

**Frontend :**
- [ ] Supprimer `VITE_GEMINI_API_KEY` du `.env`
- [ ] Modifier `GeminiChatInterface.tsx` : appeler Edge Function au lieu de Gemini directement
- [ ] G√©rer erreurs quota (affichage modal upgrade)
- [ ] Cache localStorage = UI uniquement (pas source de v√©rit√©)

**Protection additionnelle :**
- [ ] Rate limiting par IP (Cloudflare/Vercel) : 100 req/h pour invit√©s
- [ ] D√©tection anomalies : alerte si > 50 cr√©dits/heure par userId
- [ ] Restrictions Gemini (Google Cloud) : quota max 1000 req/jour par cl√©
- [ ] Rotation cl√©s API : changer si compromis

#### üõ°Ô∏è D√âFENSE EN PROFONDEUR

**Couche 1 : Authentification**
- JWT Supabase obligatoire (expiration 15 min)
- Impossible d'appeler Edge Function sans compte valide

**Couche 2 : Quotas en DB (source de v√©rit√©)**
- Transaction atomique (FOR UPDATE) = pas de race condition
- V√©rification + consommation = une seule op√©ration

**Couche 3 : Rate limiting**
- Par userId : 100 messages/heure (authentifi√©), 20/heure (invit√©)
- Par IP : 100 req/heure (protection anti-multi-comptes)

**Couche 4 : Monitoring**
- Logs toutes les requ√™tes (userId, timestamp, cr√©dits consomm√©s)
- Alertes si usage suspect (> 50 cr√©dits/heure)

**Couche 5 : Restrictions API externe**
- Quotas Gemini dans Google Cloud Console
- Alertes si d√©passement

#### üìä CO√õTS MA√éTRIS√âS

**Avec s√©curisation :**
- 1 utilisateur gratuit = max 20 cr√©dits/mois = 0.01‚Ç¨
- 1 utilisateur Premium = max 100 cr√©dits/mois = 0.05‚Ç¨
- Protection contre abus = impossible de bypass

**Sans s√©curisation :**
- 1 utilisateur malveillant = illimit√© = 50-100‚Ç¨/mois
- Risque : faillite

#### ‚úÖ OFFRE GRATUITE AVEC S√âCURISATION

**Strat√©gie :** Maintenir offre g√©n√©reuse (20 cr√©dits/mois) car :
- ‚úÖ Quotas v√©rifi√©s c√¥t√© serveur (impossible bypass)
- ‚úÖ Rate limiting prot√®ge contre abus massifs
- ‚úÖ Co√ªt ma√Ætris√© m√™me avec quelques abus isol√©s
- ‚úÖ Conversion optimis√©e (offre g√©n√©reuse = meilleure adoption)

**Quotas propos√©s :**
- **Gratuit :** 20 cr√©dits/mois (‚âà 0.01‚Ç¨/mois)
- **Premium :** 100 cr√©dits/mois (‚âà 0.05‚Ç¨/mois)
- **Pro :** 1000 cr√©dits/mois (‚âà 0.50‚Ç¨/mois)

**Protection invit√©s (sans compte) :**
- Rate limiting strict : 10 messages max par IP/jour
- Forcer authentification apr√®s 5 messages
- Co√ªt n√©gligeable : 5 √ó 0.0005‚Ç¨ = 0.0025‚Ç¨/visiteur

**Risques r√©siduels acceptables :**
- Utilisateurs tr√®s techniques (reverse engineering) = co√ªt ma√Ætris√© par rate limiting
- Attaques coordonn√©es = d√©tectables via monitoring
- Comparaison : m√™me Netflix/GitHub ont des contournements (objectif = rendre abus non rentable)

#### üìã CHECKLIST S√âCURISATION

**Phase 1 : Migration Edge Function (1 jour)**
- [ ] Cr√©er Edge Function `/api/chat`
- [ ] D√©placer cl√© Gemini ‚Üí variable serveur
- [ ] Impl√©menter v√©rification quota DB
- [ ] Tester consommation atomique

**Phase 2 : Migration frontend (4h)**
- [ ] Modifier `GeminiChatInterface.tsx` ‚Üí appeler Edge Function
- [ ] Supprimer `VITE_GEMINI_API_KEY` du client
- [ ] G√©rer erreurs quota (modals)

**Phase 3 : Rate limiting (2h)**
- [ ] Impl√©menter rate limiting userId (Edge Function)
- [ ] Impl√©menter rate limiting IP (Vercel/Cloudflare)
- [ ] Tester limites

**Phase 4 : Monitoring (2h)**
- [ ] Logs audit dans Edge Function
- [ ] Dashboard monitoring (Supabase logs)
- [ ] Alertes anomalies (email/webhook)

**Tests :**
- [ ] Tentative bypass localStorage (doit √©chouer)
- [ ] Tentative extraction cl√© API (doit √™tre impossible)
- [ ] Test rate limiting (blocage apr√®s limite)
- [ ] Test consommation atomique (pas de race condition)

---

### Phase 1: Cl√©s Beta Testeurs (1 jour) üéÅ URGENT

**Objectif:** Permettre aux beta testeurs d'utiliser l'app sans limites

**Document:** Docs\BETA-TESTER-IMPLEMENTATION-GUIDE.md

**Backend (Supabase):**
- [ ] Migration SQL: Table `beta_keys` (code, status, assigned_to, expires_at)
- [ ] Function `generate_beta_key()` ‚Üí Format BETA-XXXX-XXXX-XXXX
- [ ] Function `redeem_beta_key(user_id, code)` ‚Üí Activation + upgrade tier
- [ ] RLS policies (admin peut tout voir, user voit ses cl√©s)

**Frontend:**
- [ ] Service `BetaKeyService.ts` (generateKeys, redeemKey, listKeys)
- [ ] Page Settings: Section "Cl√© Beta" avec input activation
- [ ] Badge "üéÅ Beta Tester" dans TopBar si tier = beta
- [ ] Page admin `/admin/beta-keys` pour g√©n√©rer et suivre cl√©s
- [ ] CSV export des cl√©s g√©n√©r√©es

**Tier Beta:**
- [ ] Ajouter `beta` dans enum tiers (free, premium, pro, beta)
- [ ] Quotas beta = Pro (1000 cr√©dits/mois, sondages illimit√©s)
- [ ] Dur√©e: 3 mois puis conversion auto ‚Üí Gratuit
- [ ] Support prioritaire (Discord d√©di√©)

**Tests:**
- [ ] G√©n√©ration 20 cl√©s
- [ ] Redemption cl√© valide
- [ ] Erreurs: cl√© invalide, d√©j√† utilis√©e, expir√©e
- [ ] Conversion tier apr√®s activation
- [ ] Expiration automatique apr√®s 3 mois

**Fichiers √† cr√©er:**
- `sql-scripts/create-beta-keys-table.sql`
- `src/services/BetaKeyService.ts`
- `src/components/settings/BetaKeyRedemption.tsx`
- `src/pages/admin/BetaKeys.tsx`

**Livrable:** 20 cl√©s g√©n√©r√©es, pr√™tes √† distribuer aux beta testeurs

---

### Phase 2: Mode Invit√© Limit√© (2 jours)

**Objectif:** Permettre essai IA sans compte (5 messages) mais bloquer sauvegarde ET publication

**Date analyse :** 03 Novembre 2025  
**Probl√®me identifi√© :** Actuellement, les utilisateurs anonymes peuvent cr√©er des sondages en DB (creator_id = null), ce qui pose des probl√®mes de s√©curit√© et de coh√©rence.

#### ‚ö†Ô∏è √âTAT ACTUEL (PROBL√âMATIQUE)

**Ce qui fonctionne actuellement :**
- ‚úÖ Utilisateurs anonymes peuvent cr√©er des sondages en DB (`creator_id = null`)
- ‚úÖ Sondages anonymes sont publiables et accessibles via slug
- ‚úÖ Dashboard accessible sans authentification (mais lit localStorage uniquement)

**Probl√®mes identifi√©s :**
- ‚ùå Incoh√©rence : sondages cr√©√©s en DB mais non visibles dans dashboard (lit localStorage)
- ‚ùå S√©curit√© : pas de contr√¥le sur qui cr√©e quoi
- ‚ùå Pas de limite : utilisateurs anonymes peuvent cr√©er illimit√©ment
- ‚ùå Pas de lien avec compte : impossible de r√©cup√©rer ses sondages apr√®s cr√©ation

#### ‚úÖ STRAT√âGIE : MODE INVIT√â S√âCURIS√â

**Principe :** Mode invit√© = localStorage uniquement (pas de DB). Publication n√©cessite authentification.

**Architecture :**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ MODE INVIT√â (Sans compte)                ‚îÇ
‚îÇ ‚úÖ 5 messages IA max (localStorage)      ‚îÇ
‚îÇ ‚úÖ Cr√©ation sondage en localStorage      ‚îÇ
‚îÇ ‚úÖ Preview uniquement (pas de publication)‚îÇ
‚îÇ ‚ùå Pas d'acc√®s dashboard                  ‚îÇ
‚îÇ ‚ùå Pas de sauvegarde DB                   ‚îÇ
‚îÇ ‚Üí Modal "Cr√©er un compte pour publier"   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì Signup
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ MODE AUTHENTIFI√â (Gratuit)               ‚îÇ
‚îÇ ‚úÖ 20 cr√©dits IA/mois (DB)                ‚îÇ
‚îÇ ‚úÖ Cr√©ation sondage en DB                 ‚îÇ
‚îÇ ‚úÖ Publication autoris√©e                  ‚îÇ
‚îÇ ‚úÖ Dashboard accessible                  ‚îÇ
‚îÇ ‚úÖ Synchronisation multi-appareils       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Modifications √† faire :**

**Backend (Supabase):**
- [ ] Modifier RLS policies : `creator_id` ne peut plus √™tre `null` (NOT NULL constraint)
- [ ] Supprimer politique `polls_insert_anonymous` (cr√©ation anonyme interdite)
- [ ] Migration : nettoyer sondages existants avec `creator_id = null` (optionnel : garder avec `admin_token`)

**Frontend :**
- [ ] Hook `useGuestTrial()` (5 cr√©dits lifetime, m√©moire React state uniquement)
- [ ] Modifier `GeminiChatInterface.tsx`:
  - Compteur "3/5 messages restants" (invit√©s)
  - Blocage √† 5 messages avec modal signup
  - V√©rifier quota DB pour utilisateurs connect√©s
- [ ] Modifier `usePolls.ts` :
  - `createPoll()` : v√©rifier `if (!user) return { error: "Authentification requise" }`
  - Bloquer cr√©ation DB si pas authentifi√©
  - Mode invit√© : sauvegarder uniquement en localStorage (preview)
- [ ] Bloquer publication `PollEditor.tsx` si !user
  - Bouton "Publier" ‚Üí Modal "Cr√©er un compte pour publier"
  - Garder mode "Preview" accessible
- [ ] Dashboard : redirection vers `/auth` si !user
  - Message : "Connectez-vous pour voir vos sondages"
- [ ] Modal `AuthIncentiveModal.tsx` avec b√©n√©fices compte gratuit :
  - "Synchronisez vos sondages sur tous vos appareils"
  - "20 cr√©dits IA/mois gratuitement"
  - "Acc√®s au dashboard et historique"
  - "Partagez et publiez vos sondages"

**Protection anti-abus:**
- [ ] Pas de localStorage pour quotas (√©tat React uniquement)
- [ ] Refresh page = reset compteur invit√©
- [ ] Rate limiting IP: 10 messages/jour max (Cloudflare/Vercel)
- [ ] D√©tection pattern : m√™me IP cr√©e > 5 sondages ‚Üí bloquer temporairement

**Tests E2E:**
- [ ] Workflow invit√© : cr√©er sondage ‚Üí preview ‚Üí tentative publication ‚Üí modal signup
- [ ] Workflow invit√© : 5 messages ‚Üí blocage ‚Üí modal signup
- [ ] Workflow authentifi√© : cr√©ation ‚Üí publication ‚Üí visible dans dashboard
- [ ] Dashboard : redirection si non authentifi√©

---

### Phase 3: Syst√®me Cr√©dits Unifi√©s (3 jours)

**Objectif:** Remplacer quotas s√©par√©s par cr√©dits IA unifi√©s en DB

**Backend (Supabase):**
- [ ] Migration SQL: Table `user_quotas`
  ```sql
  - tier (free, premium, pro, beta)
  - plan (monthly, annual)
  - credits_total (20, 100, 1000, 1000)
  - credits_used
  - credits_remaining
  - max_polls (20, 100, unlimited, unlimited)
  - period_start, period_end, reset_date
  ```
- [ ] Function `consume_credits(user_id, amount)` avec transaction
- [ ] Function `reset_monthly_quotas()` + cron job (1er du mois)
- [ ] Function `check_and_expire_beta_keys()` + cron job (quotidien)
- [ ] RLS policies (user voit uniquement ses quotas)
- [ ] Index performance (user_id, tier)

**Migration donn√©es:**
- [ ] Script conversion localStorage ‚Üí Supabase
- [ ] Mapping ancien syst√®me:
  ```
  aiMessages + analyticsQueries + (simulations √ó 5) = cr√©dits
  ```
- [ ] Bonus 20% goodwill pour utilisateurs existants
- [ ] Grace period 30 jours (ancien syst√®me actif en parall√®le)

**Frontend:**
- [ ] Service `QuotaService.ts` (getQuota, consumeCredits, purchasePack)
- [ ] Hook `useCredits()` unifi√© (remplace useAiMessageQuota, useAnalyticsQuota)
- [ ] Modifier consommation dans:
  - `GeminiChatInterface.tsx`: 1 cr√©dit/message
  - `PollAnalyticsPanel.tsx`: 1 cr√©dit/query + 1 cr√©dit/insight
  - `SimulationService.ts`: 5 cr√©dits/simulation
- [ ] Indicateur TopBar: "42/100 cr√©dits ‚ö°" avec tooltip d√©tails
- [ ] Modal `QuotaReachedModal.tsx`:
  - Tier actuel + usage
  - Recommandation (pack cr√©dits vs upgrade)
  - Boutons CTA (Acheter pack / Voir plans)
- [ ] Page `/pricing` avec comparaison tiers

**Tests:**
- [ ] Consommation cr√©dits (chat, analytics, simulation)
- [ ] Blocage √† 0 cr√©dits
- [ ] Reset mensuel (simulation date)
- [ ] Rollover annuel (simulation)
- [ ] Performance: 100 users simultan√©s consommant cr√©dits

---

### Phase 4: UI Pricing & Conversion (2 jours)

**Page Pricing (`/pricing`):** ‚úÖ CR√â√â
- [X] Composant `PricingPage.tsx`
- [X] Toggle Monthly/Annual avec badge √©conomie
- [X] 3 cards tiers (Gratuit, Premium, Pro)
- [X] Section Beta Testeurs (comment rejoindre)
- [X] Comparaison features (tableau)
- [X] FAQ pricing (6 questions)
- [X] CTA final "Commencer gratuitement"
- [X] Responsive mobile + Dark mode
- [X] Route `/pricing` configur√©e

**Modal Upgrade in-app:**
- [ ] Trigger automatique √† 100% quota
- [ ] Afficher tier actuel + recommandation personnalis√©e
- [ ] Boutons:
  - "Voir les plans" ‚Üí /pricing
  - "Acheter pack cr√©dits" ‚Üí Modal achat
  - "Plus tard" ‚Üí Fermer (re-trigger dans 7 jours)
- [ ] Tracking analytics (ouverture, clics, conversion)

**Packs cr√©dits (Phase 2 - apr√®s Stripe):**
- [ ] Modal `CreditPackPurchase.tsx`
- [ ] 3 packs (50/3‚Ç¨, 100/5‚Ç¨, 500/20‚Ç¨)
- [ ] Integration Stripe Checkout
- [ ] Confirmation email avec r√©cap
- [ ] Ajout cr√©dits imm√©diat apr√®s paiement
- [ ] Validit√© 6 mois (tracking expiration)

---

### Phase 5: Programme Beta Testeurs (1 semaine)

**Recrutement (20 testeurs):**
- [ ] Formulaire candidature Google Forms
- [ ] Posts recrutement:
  - [ ] Reddit r/SideProject, r/productivity
  - [ ] LinkedIn (post personnel)
  - [ ] Twitter/X thread
  - [ ] R√©seau personnel (10 cl√©s r√©serv√©es)
- [ ] S√©lection profils (diversit√© usage, engagement)
- [ ] G√©n√©ration 20 cl√©s beta
- [ ] Email bienvenue avec cl√© + instructions

**Setup infrastructure:**
- [ ] Discord serveur priv√© beta
- [ ] Canaux: #annonces, #bugs, #feedback, #showcase
- [ ] R√¥le "Beta Tester" automatique
- [ ] Bot notifications (nouveau bug, feedback)

**Suivi engagement:**
- [ ] Questionnaire Semaine 1 (premi√®re impression)
- [ ] Questionnaire Semaine 4 (mi-parcours)
- [ ] Questionnaire Semaine 8 (feedback d√©taill√©)
- [ ] Questionnaire Semaine 12 (final + testimonials)
- [ ] Interviews 1-on-1 avec 5 power users
- [ ] Calendrier relances (inactifs > 7 jours)

**M√©triques tracking:**
- [ ] Dashboard admin: Usage beta testeurs
- [ ] Sondages cr√©√©s (objectif: 100+ collectif)
- [ ] Bugs report√©s (objectif: 50+)
- [ ] Feedback score moyen (objectif: 4+/5)
- [ ] Testimonials collect√©s (objectif: 10+)

**Conversion post-beta:**
- [ ] Email J-7: "Votre b√™ta se termine bient√¥t"
- [ ] Email J-0: "Offre exclusive: Premium 50% off (4.50‚Ç¨/mois, 6 mois)"
- [ ] Badge permanent "Early Supporter" si upgrade
- [ ] Conversion auto tier beta ‚Üí free si pas d'upgrade

---

### Documentation

- [ ] `Docs/USER-DOCUMENTATION/18-QUOTAS-PRICING-FINAL.md` ‚úÖ CR√â√â
- [ ] Update `Docs/USER-DOCUMENTATION/14-FAQ.md` (section quotas)
- [ ] Update `Docs/USER-DOCUMENTATION/06-Analytics-IA.md` (nouveaux quotas)
- [ ] Cr√©er `Docs/BETA-TESTER-GUIDE.md` (guide complet beta testeurs)
- [ ] Update README.md (mention programme beta)

---

### Checklist Lancement Beta

**Technique:**
- [ ] Tables DB (user_quotas, beta_keys)
- [ ] Syst√®me cl√©s fonctionnel
- [ ] 20 cl√©s g√©n√©r√©es et test√©es
- [ ] Mode invit√© (5 cr√©dits)
- [ ] Syst√®me cr√©dits unifi√©s d√©ploy√©
- [ ] Badge Beta visible
- [ ] Page /pricing live
- [ ] Discord beta cr√©√©

**Communication:**
- [ ] Email template bienvenue beta
- [ ] Formulaire candidature
- [ ] Posts recrutement publi√©s
- [ ] Page `/beta` expliquant programme
- [ ] Questionnaires pr√©par√©s

**Suivi:**
- [ ] Analytics tracking (activation cl√©s, usage, conversion)
- [ ] Dashboard admin beta testeurs
- [ ] Alertes (bugs critiques, inactivit√©)
- [ ] Scripts support (FAQ beta)

**Total:** ~8 jours + 1 semaine recrutement/suivi  
**Priorit√©:** üî• CRITIQUE (permet lancement beta sans limitations)  
**Co√ªt:** 20 testeurs √ó $0.50/mois = $10/mois (ROI: testimonials + feedback + conversions)

---

## PRE LANCEMENT

### Technique

#### Timezone (2h)
- **QUESTION** : choix de la timezone ? Comment cela se passe actuellement et dans un contexte internationale, comment faire cela au mieux ?
    - Ajouter choix timezone lors de la cr√©ation
    - Stocker timezone: "Europe/Paris" dans les polls
    - Afficher indication "Horaires en heure de Paris"
    - Utiliser date-fns-tz pour conversion

#### Authentication & Security
- **Sans Compte Owner Token** (voir @Sans-Compte-OwnerToken.md)
- **Accessibilit√©** (√©diteur + vote) : Focus management, aria labels
- **Performance** : Rendre uniquement la question active (d√©j√† fait), virtualisation si > 20 questions

#### Google Services Integration (10-15h)
**Objectif :** Int√©gration compl√®te √©cosyst√®me Google

**Composants :**

**1. Google OAuth 2.0 (base) - 4h**
- Flow frontend/backend
- Tokens management (stockage, refresh)
- Scopes permissions

**2. Google Sheets API Export - 8-12h**
- Export direct vers Sheets via API officielle
- Cr√©ation spreadsheet automatique
- Remplissage donn√©es structur√©es
- Gestion rate limits (300 req/min)

**3. Calendar Integration (optionnel) - 2-3h**
- Auto-suggestion apr√®s s√©lection dates
- Connexion calendrier (Google Calendar API)
- Interface discr√®te et optionnelle

**Architecture :**
- Backend Node.js pour gestion tokens
- googleapis SDK
- Rate limiting + error handling

**Note :** Base OAuth r√©utilisable pour tous les services Google

#### Deployment & Operations
- **Production Setup** : Domain, hosting, email service, database
- **CI/CD Pipeline** : Tests automatis√©s, branch protection, deployment automation

---

### Business & Marketing

#### Strat√©gie Tarifaire

**R√©f√©rence pricing Doodle (03/11/2025) :**
- Free : ‚Ç¨0
- Pro : ‚Ç¨6.95/user/mois (annuel)
- Team : ‚Ç¨8.95/user/mois (annuel)

**D√©cision :**
- ‚úÖ **Premium = 6.95‚Ç¨/mois** (au lieu de 9‚Ç¨) ‚Üí Align√© Doodle Pro pour fonctionnalit√©s de base (sondages de dates)
- ‚úÖ **IA = bonus inclus** (pas de surco√ªt) ‚Üí Diff√©renciateur unique
- ‚úÖ **Pro = 29‚Ç¨/mois** ‚Üí √âquivalent Team Doodle (3 users) + IA avanc√©e

**Positionnement :** M√™me prix que Doodle pour fonctionnalit√©s de base, IA en bonus.

**Avantages vs Doodle :** M√™me prix base + IA incluse + Analytics IA + Formulaires avanc√©s + Export illimit√©

**Voir aussi :** Section "Avantages Comp√©titifs vs SurveyMonkey" pour diff√©renciateurs complets.


#### Plan d'Acquisition

**Objectif :** Atteindre les 100 premiers utilisateurs

**Canaux :**
- Landing page optimis√©e (SEO, conversion)
- Product Hunt launch
- Reddit outreach (r/productivity, r/SideProject)
- Personal network
- Social media (LinkedIn, Twitter)

---

## LAUNCH

### Launch Day (Jour 0)
- [ ] Product Hunt launch
- [ ] Reddit posts (r/productivity, r/SideProject)
- [ ] Personal network outreach
- [ ] Social media annonce

### Post-Launch (Semaine 1-4)
- [ ] Daily monitoring (analytics + Sentry)
- [ ] R√©pondre feedback utilisateurs
- [ ] It√©rations rapides (bugs + quick wins)
- [ ] M√©triques de succ√®s: 50-100 users, 10+ polls created

## APRES LANCEMENT

### Phase 4 (Mois 6-9) : Mon√©tisation
**D√©clencheur :** 500+ utilisateurs actifs

#### Payment System & Monetization (10-15h)
- **Syst√®me de paiement int√©gr√©** (Stripe/Paddle)
- **Gestion abonnements Pro/Premium**
- **D√©blocage features payantes** (exports avanc√©s, analytics d√©taill√©s)
- **Quotas Management** : Limites par option/segment, feedback temps-r√©el
   Aligner la doc "6. [Quotas et Limites](#quotas-et-limites)"
- **QUESTION** : √âtats UI quotas (source de v√©rit√© serveur, √©tats √† afficher, seuil "presque plein" 90%/95%?)

**Note:** Formats d'export actuellement support√©s: CSV, PDF, JSON, Markdown (pas de Google Sheets/XLSX)

#### üé® Th√®mes Premium (10-15h)

**‚ö™‚ö´ Th√®me MINIMALISTE Light + Dark (Premium)**
- Public : Power users, pros, sessions longues
- Objectif : Conversion payante, diff√©renciation tangible
- Status : ‚úÖ Specs compl√®tes (√† g√©n√©rer par L√©a)
- Fichier : `Docs/Visual-Identity-Specs.md` sections 3A/3B
- Accent Light : Coral `#FF6B6B`
- Accent Dark : Mint `#00FFA3`

**üåø Th√®me NATURE (Gratuit)**
- Public : Grand public, √©v√©nements occasionnels
- Objectif : Acquisition, marketing viral
- Status : ‚úÖ Specs compl√®tes + mockups g√©n√©r√©s
- Fichier : `Docs/Visual-Identity-Specs.md` section 3

**Objectif Phase 4 :** Valider conversion freemium ‚Üí payant

---

### Phase 5 (Mois 9-12) : Scale International
**D√©clencheur :** 1000+ utilisateurs, demande internationale

#### i18n (Internationalisation) (10-15h)
- Setup i18next
- Traductions (ES, DE, IT)
- Formats locaux (dates, nombres, devises)
- D√©tection automatique langue navigateur

**Impact :** Expansion march√© au-del√† de FR/EN

#### PWA/Mobile Native (20-40h)
**Option A : PWA Core Features**
- Installable app
- Push notifications
- Offline functionality

**Option B : Mobile Native (Capacitor)**
- Transform web app to Android native
- Native APIs integration
- Push notification system complet

**D√©cision :** Selon usage mobile en Phase 4

**Objectif Phase 5 :** Expansion g√©ographique

---

### Phase 6 (Mois 12+) : UX Premium
**D√©clencheur :** Feedback utilisateurs demandant ces features


#### Smart Suggestions Proactives (6-8h)
- [x] Suggestions contextuelles intelligentes (via Validation Objectifs)
- [x] Boutons "Appliquer" cliquables
- [ ] Suggestions proactives EN TEMPS R√âEL pendant l'√©dition
- [ ] "Cette question pourrait √™tre une matrice ?" (d√©tection patterns)
- [ ] "Trop d'options, veux-tu les grouper ?" (optimisation UX)
- [ ] Undo/Redo
- [ ] Tester formulations naturelles possibles

**Statut :** üü° PARTIELLEMENT IMPL√âMENT√â
- ‚úÖ Suggestions post-simulatgion avec application 1-clic
- ‚è≥ Suggestions proactives temps r√©el (Phase 6)

**Objectif Phase 6 :** Diff√©renciation UX

**Pour compl√©ter la feature :**
- D√©tection proactive pendant l'√©dition :
// Exemple : D√©tecter qu'une question a >7 options
useEffect(() => {
  if (question.options.length > 7) {
    showSuggestion("Trop d'options, veux-tu les grouper ?");
  }
}, [question.options]);
- Suggestions contextuelles par question :
      "Cette question texte pourrait √™tre un choix multiple ?"
      "Ajouter une option 'Autre' ?"
      "Rendre cette question obligatoire ?"
- Undo/Redo :
      Historique des modifications
      Boutons Ctrl+Z / Ctrl+Y

## BACKLOG WAITING FOR DEMAND

### Nice-to-have
- **Reordering & Duplication** : Focus management, raccourcis clavier, annonces ARIA, ID stability


