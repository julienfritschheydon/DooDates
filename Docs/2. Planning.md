# DooDates - Development Planning

## 1. NOW - Current Work & Immediate Blockers

### üî• En cours (Priorit√© Absolue)

### üéØ Cette semaine

#### 5 √©checs pr√©-existants (ConversationCard - encodage UTF-8)
#### Interface loveart ai
Sondate date - copier le lien ne marche pas
Le lien ne marche pas : http://localhost:8080/vote/dejeuner-mercredi-prochain-ou-la-suivante-a-midi-8d263b04
Le menu fix cache certains bouton, genre pour les formulaires


## 2. NEXT - MVP Features (par th√®me)

### Form Poll Features

#### Phase 4a - Modification de sondages via IA (4h) ‚≠ê PRIORIT√â
**Objectif :** Permettre de modifier un sondage/questionnaire existant via conversation IA

**Fonctionnalit√©s MVP :**
1. **Charger sondage existant** dans le chat IA
2. **Modifications en langage naturel** :
   - "Ajoute une question sur le prix"
   - "Retire la question 3"
   - "Change la question 2 en choix multiple"
3. **R√©g√©n√©ration intelligente** par l'IA
4. **Pr√©visualisation avant sauvegarde**

**Flux utilisateur :**
```
Dashboard ‚Üí Bouton "Modifier via IA" ‚Üí Chat pr√©-rempli avec contexte
User: "Ajoute une question sur le prix"
IA: [G√©n√®re sondage modifi√© avec nouvelle question]
User: "Parfait, sauvegarde"
```

**Impl√©mentation :**
- Prompt Gemini "modify" vs "create"
- Parser modifications (ajout/suppression/√©dition)
- Merge intelligent avec sondage existant
- Interface modification dans GeminiChatInterface
- Tests modification + backward compatibility

**Timeline estim√©e :** 4h
- Modification texte (2h)
- Interface + UX (1h)
- Tests (1h)

---

#### Autres Features Form Poll
- **Multi-step Flow** (Typeform-style) : Une question par √©cran, barre de progression, validation par √©tape
- **Results Display** : Histogrammes r√©sultats FormPoll (mini barres horizontales)
- **QUESTION** : Seuils de pagination (texte >50 r√©ponses ‚Üí ¬´ Voir plus ¬ª, nombre N pour Dashboard)
- **QUESTION** : √âchelle histogrammes (pourcentage vs valeur brute, troncature labels, affichage ex-aequo)

### IA Conversationnelle Avanc√©e
**Objectif :** IA compl√®te avec parsing avanc√©

**Fonctionnalit√©s IA avanc√©es :**
```typescript
// ai/advanced/
‚îú‚îÄ‚îÄ ContextManager.ts       // Gestion contexte conversation
‚îú‚îÄ‚îÄ DateTimeParser.ts       // Parsing dates/heures NLP
‚îú‚îÄ‚îÄ SmartSuggestions.ts     // Suggestions intelligentes
‚îú‚îÄ‚îÄ LearningEngine.ts       // Apprentissage pr√©f√©rences
‚îî‚îÄ‚îÄ ConversationFlow.ts     // Flow conversation optimis√©
```
**Parsing avanc√© :**
- "mercredi prochain" ‚Üí date exacte
- "15h-17h" ‚Üí cr√©neaux horaires
- "Paul et Marie" ‚Üí participants
- "r√©union √©quipe" ‚Üí contexte m√©tier

- **Gemini test problems** - solve current issues

### Dashboard Improvements
- **Archive system**
  - Bouton "Archiver" dans PollActions
  - Filtre "archived" (actuellement non propos√© dans les boutons de filtre alors que g√©r√© dans `getStatusColor()`)
- **Sorting & pagination**
  - Tri par updated_at, votes_count, participants_count
  - Pagination si > N √©l√©ments
- **Quick sharing**
  - Bouton "Copier le lien public" visible
  - Badge "Lien copi√©"
- **Poll indicators**
  - Meilleure(s) date(s) (r√©sum√© 1‚Äì2 chips) pour les DatePolls
- **Poll claiming**
  - Si cr√©√© sans compte, action "Associer √† mon compte" (flow de claim via token)
- choix de la timezone

### Export Features
- **Format CSV uniquement** pour le MVP (rapide, interop, l√©ger)
- **Points d'entr√©e** : Dashboard et page r√©sultats
- **S√©curit√© MVP** : Liens non indexables, validation permissions basique
- **üìÑ Sp√©cifications d√©taill√©es** : Voir [Specs-Techniques-Export.md](./Specs-Techniques-Export.md)

### Email Templates & Workflows
- **Templates d'emails professionnels** : Cr√©ation, vote confirmation, notifications
- **Flux avec emails automatis√©s**
- **Analytics & Monitoring** : M√©triques usage + performance
- **Tableau de bord d√©veloppeurs**



### Authentication & Security
- **Sans Compte Owner Token** (voir @Sans-Compte-OwnerToken.md)
- **Accessibilit√©** (√©diteur + vote) : Focus management, aria labels
- **Performance** : Rendre uniquement la question active (d√©j√† fait), virtualisation si > 20 questions
- **Analytics dev** : Taux de compl√©tion, abandons par √©tape, erreurs validation

### Deployment & Operations
- **Setup Sentry** : Configuration monitoring production (voir Docs/Monitoring-Production.md)
- **Production Setup** : Domain, hosting, email service, database
- **CI/CD Pipeline** : Tests automatis√©s, branch protection, deployment automation
- **Beta Launch** : 100+ early adopters, mobile-first, feedback collection

## 3. LATER - Advanced Features (Post-MVP)

#### Tests - √Ä Reporter 

**Fichiers `.skip` √† migrer** (5 fichiers, ~4-6h total) :
- `useFreemiumQuota.test.ts.skip` - API chang√©e (refactor 2h)
- `QuotaIndicator.test.tsx.skip` - API chang√©e (refactor 2h)
- `ConversationHistory.test.tsx.skip` - Migration Jest‚ÜíVitest (30min)
- `GeminiChatInterface.integration.test.tsx.skip` - Migration Jest‚ÜíVitest (1h)
- `unified-flow.test.ts.skip` - Fix import paths (15min)

**Tests individuels skipp√©s** (18 tests) :
- 10 calendar-integration (volontaire, √† garder skipp√©s)
- 8 autres tests (timing, mocks complexes)

### PWA Core Features (en r√©flexion)
- **Installable app**
- **Push notifications**
- **Offline functionality**
- **Note** : Statut √† confirmer (MVP ou Post-MVP)

### 3.1 Anti-doublons Avanc√©
- **Double-submit** : D√©sactiver bouton apr√®s clic, idempotence c√¥t√© API (token de soumission)
- **Empreinte locale** : Hash local (device + pollId + contenu) stock√© en localStorage
- **Comportement** : Bloquer ET alerter l'utilisateur (message explicite + impossibilit√© de re-soumettre)
- **Dur√©e du blocage** : Jusqu'√† une nouvelle cr√©ation (pas de d√©lai temporel, blocage permanent pour ce contenu exact)

### 3.3 Calendar Integration (Optional & Discrete)
- **Auto-suggestion** apr√®s s√©lection des dates
- **Direct link**: "Connecter votre calendrier (optionnel)" cliquable
- **Discrete closure**: Croix pour masquer cette section
- **Minimal interface**: Une seule ligne avec lien et bouton fermer
- **Completely optional**: peut √™tre ignor√© ou ferm√©

### 3.4 Mobile Native (Capacitor)
- Transform web app to Android native
- Native APIs integration
- Push notification system complet

### 3.5 Advanced Form Features

#### Phase 4b - Questions Conditionnelles via IA (6h)
**Objectif :** Logique conditionnelle avanc√©e dans les questionnaires

**Fonctionnalit√©s :**
1. **Questions conditionnelles** :
   - "Si r√©ponse Q1 = 'Oui' ‚Üí affiche Q2"
   - "Si r√©ponse Q3 > 5 ‚Üí passe √† Q10"
   - Logique AND/OR complexe
2. **Sauts de page intelligents**
3. **Branchements multiples**

**Structure TypeScript :**
```typescript
interface ConditionalLogic {
  questionId: string;
  condition: {
    type: 'equals' | 'contains' | 'greater' | 'less';
    value: string | number;
  };
  action: {
    type: 'show' | 'hide' | 'skip_to';
    targetQuestionId: string;
  };
}
```

**Complexit√© :**
- Prompt Gemini complexe pour conditionnelles
- Validation logique conditionnelle
- Modification FormPollCreator interface
- Adaptation syst√®me de vote (skip logic)
- Tests complexes de branchements

**Timeline estim√©e :** 6h
- Design logique conditionnelle (2h)
- G√©n√©ration IA + parsing (2h)
- Interface + Vote system (2h)

**Pr√©requis :** Phase 4a termin√©e + Feedback utilisateurs validant le besoin



#### Autres Advanced Features
- **Reordering & Duplication** : Focus management, raccourcis clavier, annonces ARIA, ID stability
- **Mobile UX** : Indicateur visuel de focus, grandes zones de clic
- **Multilangue** : Passer l'application en multilangue
- **Quotas Management** : Limites par option/segment, feedback temps-r√©el
- **QUESTION** : √âtats UI quotas (source de v√©rit√© serveur, √©tats √† afficher, seuil "presque plein" 90%/95%?)

### 3.6 Payment System & Monetization
- **Syst√®me de paiement int√©gr√©**
- **Gestion abonnements Pro/Premium**
- **D√©blocage features payantes** (PDF/XLSX export)
- **M√©triques de conversion** et analytics business

### 3.7 File & Media Support
- **File Uploads** dans formulaires
- **Media attachments** pour contexte sondages

### 3.8 Advanced Authentication
- **Forced Authentication** pour r√©pondants (option)
- **Enterprise SSO** integration
- **Advanced permissions** et r√¥les
- **Multi-factor Authentication** pour les comptes administrateurs

### Chat AI later changes to consider

#### Templates Pr√©d√©finis (2h) - NON PRIORITAIRE
**Objectif :** Biblioth√®que de questionnaires pr√™ts √† l'emploi

**Templates types :**
- "Satisfaction client" ‚Üí 5-7 questions standard
- "Feedback produit" ‚Üí Questions NPS + ouvertes
- "Inscription √©v√©nement" ‚Üí Coordonn√©es + pr√©f√©rences

**Note :** Fonctionnalit√© identifi√©e comme non n√©cessaire par l'utilisateur. L'IA g√©n√®re d√©j√† des questionnaires pertinents √† la demande.- **Am√©lioration prompts** bas√©e sur metrics

#### Autres
- **Scoring System** : Points/poids aux r√©ponses pour priorisation, matching, qualification
- **Quotas** par option
- **Analytics avanc√©s** Form Polls


---
