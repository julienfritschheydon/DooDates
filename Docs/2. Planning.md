# DooDates - Development Planning
---

## ğŸ› BUGS & TÃ‚CHES TECHNIQUES

**Status actuel :** 604/641 tests passent (94%) - 28 tests skippÃ©s


---

IDEES


## ğŸš¨  BÃŠTA
**Objectif de la semaine :** DÃ©marrer la bÃªta

**Objectif :** Lancer une bÃªta fonctionnelle avec 10-20 utilisateurs testeurs  
**Deadline :** Mi-novembre 2025  
**Documents de rÃ©fÃ©rence :**
- `2025-10-30-ANALYSE-PRE-BETA.md` - Analyse stratÃ©gique complÃ¨te
- `BUGS-PRE-BETA.md` - Tracking bugs et features manquantes
- `TESTS-MANUELS-PRE-BETA.md` - Protocole de tests
- **Analyse SurveyMonkey (31/10/2025)** - Quick wins identifiÃ©s pour adoption

### Semaine 1 : Tests Analytics IA + Corrections (12h)

#### 1. Tests manuels Analytics IA (4h) ğŸ”¥ PRIORITÃ‰
- [X] **Jour 1 (8h) :** Tests fonctionnels complets 
   - [X] CohÃ©rence des croix pour fermer (design et placement)
   - [X] Mettre l'application sur GitHub Pages â†’ rendre le repo public et vÃ©rifier que tout fonctionne
   - [X] Optimisations CI
   - [X] Quotas freemium (5 anonyme, 1000 authentifiÃ©, blocage) âœ…
   - [X] Test manuels
   - [X] **VÃ©rifier coÃ»ts API rÃ©els (monitoring Gemini)** âœ… 03 Nov 2025
   - [X] **Quota IA - Documentation : Aligner code, UI, doc et tests** âœ… 03 Nov 2025
   - [X] **Supprimer QuotaExplanation et utiliser la page /pricing** âœ… 03 Nov 2025
      - Composant QuotaExplanation.tsx supprimÃ© (249 lignes Ã©liminÃ©es)
      - Dashboard.tsx utilise dÃ©sormais un simple bouton vers `/pricing`
      - Page pricing dÃ©jÃ  existante (src/pages/Pricing.tsx) avec tous les dÃ©tails
      - Calcul dÃ©taillÃ© des marges ajoutÃ© au pricing (99.4% Premium, 98.3% Pro)


#### 2. Corrections bugs dÃ©couverts (2-4h)
- [ ] **Jour 2 :** Fixer les tests
   - [ ] Tests - Plan d'Action PriorisÃ©
         - **MÃ‰THODE SYSTÃ‰MATIQUE DE VÃ‰RIFICATION** (Ã  appliquer pour chaque test) :
           1. VÃ©rifier si test skippÃ© : `grep "test.describe.skip|test.skip"` dans le fichier
           2. VÃ©rifier tags : `grep "@smoke|@functional|@analytics"` dans le test
           3. VÃ©rifier exclusion CI : `grep "grep-invert"` dans workflows GitHub Actions
           4. Tester localement : `npx playwright test <fichier> --grep "<nom-test>" --list` pour voir si listÃ©
           5. Si skippÃ© ou exclu : Noter dans le planning avant de corriger
         - **RÃˆGLE OBLIGATOIRE - TESTER TOUJOURS** :
           - **AprÃ¨s chaque correction** : ExÃ©cuter le test en local pour valider
           - **Si Ã©chec** : Ajouter des logs dÃ©taillÃ©s (`console.log`) et screenshots (`page.screenshot()`) Ã  chaque Ã©tape critique
           - **Screenshots accessibles** : Sauvegarder dans `test-results/` ou `Docs/screenshots/` pour analyse
           - **Logs Ã  inclure** : Ã‰tat des Ã©lÃ©ments (visibles/attachÃ©s), valeurs rÃ©cupÃ©rÃ©es, URLs, erreurs
         - [ ] **PRIORITÃ‰ 1 - Tests E2E Bloquants (CI/Production)**
            - [X] **1.1 console-errors.spec.ts - Test page rÃ©sultats @smoke (FLAKY)**
            - [X] **1.2 Analytics IA â€“ Quick Queries (@analytics) - Ã‰chec en CI**
            - [X] **1.2.1 Fix Setup Analytics IA Tests - Timeout crÃ©ation/vote poll**
            - [X] **1.3 BUG: Tests Analytics IA - Suite ComplÃ¨te (serial + sharding incompatibles)**
               - [X] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - âœ… Suite complÃ¨te de tests Analytics IA (9 tests en mode serial)
                  - âœ… Feature critique Analytics IA
                  - âœ… Tests actuellement actifs mais incompatibles avec sharding CI
                  - âœ… Impact : Tests exclus du sharding, augmentation temps CI
                  - âœ… Note : Tests passent en local (test 1 et 2 validÃ©s âœ…, suite complÃ¨te testÃ©e : 9/9 passent en 1.4m)
               - [X] Ã‰tape 2: Comprendre le problÃ¨me
                  - âœ… `test.describe.configure({ mode: 'serial' })` ligne 37 incompatible avec `--shard=X/2`
                  - âœ… Tests enchaÃ®nÃ©s nÃ©cessitent sÃ©quence (test 1 crÃ©e poll, test 2 utilise pollSlug)
                  - âœ… Sharding distribue tests alÃ©atoirement entre shards â†’ test 2 peut s'exÃ©cuter avant test 1
                  - âœ… Localisation: `tests/e2e/analytics-ai.spec.ts` (ligne 36-37)
                  - âœ… Variables partagÃ©es : `pollSlug`, `pollCreated` (lignes 33-34)
                  - âœ… Tests 2-6 dÃ©pendent de pollSlug crÃ©Ã© dans test 1
                  - âœ… Tests 7-9 sont partiellement indÃ©pendants mais utilisent aussi pollSlug
               - [X] Ã‰tape 3: Solution
                  - âœ… **Option A** analysÃ©e : Refactoriser en tests indÃ©pendants
                     - Avantages : Compatible sharding, tests isolÃ©s, plus robuste
                     - InconvÃ©nients : Plus long (setup rÃ©pÃ©tÃ© 6x), plus de code, perte optimisation
                  - âœ… **Option B** choisie : ExÃ©cuter cette suite hors sharding (job CI dÃ©diÃ© sans sharding)
                     - Avantages : Garde structure actuelle, simple, optimisÃ© (mÃªme poll rÃ©utilisÃ©)
                     - InconvÃ©nients : Pas de parallÃ©lisation, plus lent (acceptable : ~1.4m)
                  - âœ… **Option C** analysÃ©e : Utiliser `--grep` pour exclure de sharding
                     - RejetÃ©e : Exclusion partielle, moins clair
                  - âœ… **DÃ©cision** : Option B (job CI dÃ©diÃ©) pour simplicitÃ© et optimisation
               - [X] Ã‰tape 4: Action
                  - [X] Analyser structure actuelle des tests (9 tests enchaÃ®nÃ©s)
                     - Test 1 : Setup (crÃ©e poll, vote 5x, clÃ´ture) â†’ dÃ©finit pollSlug
                     - Tests 2-6 : DÃ©pendent de pollSlug (utilisent le poll crÃ©Ã© dans test 1)
                     - Tests 7-9 : IndÃ©pendants (crÃ©ent leur propre poll ou testent erreurs)
                  - [X] **DÃ©cision** : Option B recommandÃ©e (job CI dÃ©diÃ© sans sharding)
                     - Raison : Tests 2-6 sont optimisÃ©s pour utiliser le mÃªme poll (gain temps)
                     - Alternative Option A trop coÃ»teuse (setup rÃ©pÃ©tÃ© 6x)
                     - Solution : ExÃ©cuter suite complÃ¨te Analytics IA hors sharding dans CI
                     - ImplÃ©menter job dÃ©diÃ© dans workflow CI
                  - [X] ImplÃ©menter la solution
                     - [X] CrÃ©Ã© job `e2e-analytics-suite` dans `3-main-post-merge.yml`
                     - [X] Job exÃ©cute uniquement la suite complÃ¨te (grep "Analytics IA - Suite ComplÃ¨te")
                     - [X] Pas de sharding (exÃ©cution sÃ©quentielle des 9 tests)
                     - [X] Rapport HTML en artefact en cas d'Ã©chec
                  - [X] Tester en local âœ…
                     - [X] TestÃ© suite complÃ¨te : 9/9 tests passent en 1.4m
                     - [X] ValidÃ© que les tests fonctionnent en mode serial
                     - [X] Note : Le vrai test sharding sera en CI (plusieurs workers parallÃ¨les)
                  - [ ] Valider en CI
                     - [ ] Ã€ faire lors de la prochaine PR/merge
                     - [ ] VÃ©rifier que le job `e2e-analytics-suite` s'exÃ©cute correctement
                     - [ ] Confirmer que les 9 tests passent en CI sans conflit de sharding
                  - [X] Mettre Ã  jour test-guide.md âœ…
                     - [X] AjoutÃ© note sur job dÃ©diÃ© sans sharding (ligne 29)
                     - [X] Mis Ã  jour section Niveau 3 CI/CD
                     - [X] DocumentÃ© solution dans section CI/CD workflows (ligne 444)
            - [ ] **1.4 form-poll-regression.spec.ts - Suite complÃ¨te (serial + sharding incompatibles)**
               - [ ] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - Suite de tests de non-rÃ©gression Form Poll (4 tests)
                  - Tests critiques pour workflow Form Poll
                  - Actuellement skippÃ©e complÃ¨tement
               - [ ] Ã‰tape 2: Comprendre le problÃ¨me
                  - MÃªme problÃ¨me que analytics-ai.spec.ts (serial + sharding)
                  - RÃ‰GRESSION #2: Timeout IA (mock non-dÃ©terministe, race condition)
                  - RÃ‰GRESSION #3: Attend 2 onglets mais n'en trouve qu'1 (dÃ©pend du test #2 skippÃ©)
                  - Localisation: `tests/e2e/form-poll-regression.spec.ts` (ligne 35)
               - [ ] Ã‰tape 3: Solution
                  - Option A: Refactoriser en tests indÃ©pendants (sans serial, avec setup individuel)
                  - Option B: ExÃ©cuter cette suite hors sharding (job CI dÃ©diÃ©)
                  - Option C: Remplacer par des tests unitaires + mock IA synchrone
               - [ ] Ã‰tape 4: Action
                  - [ ] Choisir et implÃ©menter la solution
                  - [ ] Tester la solution
                  - [ ] Mettre Ã  jour test-guide.md
         - [ ] **PRIORITÃ‰ 2 - Tests Unitaires avec Beaucoup de SkippÃ©s**
            - [ ] **2.1 PollActions.close.test.tsx (14 tests skippÃ©s)**
               - [ ] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - Tests pour fonctionnalitÃ© de clÃ´ture de poll (critique)
                  - 14 tests skippÃ©s = perte de couverture importante
                  - Localisation: `src/components/polls/__tests__/PollActions.close.test.tsx`
               - [ ] Ã‰tape 2: Comprendre le problÃ¨me
                  - Toast mock ne fonctionne pas
                  - Tests timeout aprÃ¨s 5s
                  - VÃ©rifier le mock de `useToast` hook
               - [ ] Ã‰tape 3: Solution
                  - Fixer le mock toast (vÃ©rifier `@/hooks/use-toast`)
                  - Augmenter timeout si nÃ©cessaire
                  - VÃ©rifier que le mock est correctement configurÃ©
               - [ ] Ã‰tape 4: Action
                  - [ ] Analyser le mock toast actuel
                  - [ ] Fixer le mock
                  - [ ] Tester tous les 14 tests
                  - [ ] Mettre Ã  jour test-guide.md
            - [ ] **2.2 SimulationComparison.test.ts (13 tests skippÃ©s)**
               - [ ] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - Tests pour comparaison simulations vs rÃ©alitÃ©
                  - Feature peut-Ãªtre moins critique (simulation)
                  - 13 tests skippÃ©s = perte de couverture
                  - Localisation: `src/lib/simulation/__tests__/SimulationComparison.test.ts`
               - [ ] Ã‰tape 2: Comprendre le problÃ¨me
                  - localStorage mock ne fonctionne pas correctement dans les tests
                  - FIXME: Tests fragiles (ligne 31)
                  - Vitest/jsdom peut avoir des problÃ¨mes avec localStorage
               - [ ] Ã‰tape 3: Solution
                  - Option A: Fixer localStorage mock (utiliser vitest-locale-storage ou mock manuel)
                  - Option B: Utiliser une abstraction pour localStorage (mockable)
                  - Option C: Supprimer si feature simulation non essentielle
               - [ ] Ã‰tape 4: Action
                  - [ ] DÃ©cider si feature est critique
                  - [ ] Si oui: fixer localStorage mock
                  - [ ] Si non: supprimer les tests
                  - [ ] Mettre Ã  jour test-guide.md
         - [ ] **PRIORITÃ‰ 3 - Tests Unitaires Simples (1 test skippÃ©)**
            - [ ] **3.1 MultiStepFormVote.test.tsx (1 test skippÃ©)**
               - [ ] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - Test de barre de progression (UI)
                  - 1 seul test skippÃ©
                  - Localisation: `src/components/polls/__tests__/MultiStepFormVote.test.tsx` (ligne 82)
               - [ ] Ã‰tape 2: Comprendre le problÃ¨me
                  - PrÃ©cision flottante JavaScript (33.333333333333336% vs 33.33333333333333%)
                  - ProblÃ¨me classique de comparaison de floats
               - [ ] Ã‰tape 3: Solution
                  - Utiliser `toBeCloseTo()` au lieu de `toHaveStyle()` exact
                  - Ou arrondir la valeur avant comparaison
                  - Ou utiliser une tolÃ©rance dans la comparaison
               - [ ] Ã‰tape 4: Action
                  - [ ] Fixer la comparaison (tolÃ©rance ou arrondi)
                  - [ ] Tester
                  - [ ] Mettre Ã  jour test-guide.md
            - [ ] **3.2 SimulationService.test.ts:74 (Test Gemini skippÃ©)**
               - [ ] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - Test de gÃ©nÃ©ration avec Gemini API
                  - 1 seul test skippÃ©
                  - Localisation: `src/lib/simulation/__tests__/SimulationService.test.ts` (ligne 74)
               - [ ] Ã‰tape 2: Comprendre le problÃ¨me
                  - Besoin d'un mock pour l'API Gemini
                  - Test actuellement skippÃ© avec `it.skip`
               - [ ] Ã‰tape 3: Solution
                  - Ajouter un mock pour l'API Gemini (similaire Ã  E2E tests)
                  - Ou utiliser une API key de test
                  - Ou supprimer si non essentiel
               - [ ] Ã‰tape 4: Action
                  - [ ] DÃ©cider si test est nÃ©cessaire
                  - [ ] Si oui: ajouter mock Gemini
                  - [ ] Si non: supprimer le test
                  - [ ] Mettre Ã  jour test-guide.md
         - [ ] **PRIORITÃ‰ 4 - Tests Manquants (Ã€ CrÃ©er)**
            - [ ] **4.1 PollAnalyticsService.test.ts - Tests du service d'analytics**
               - [ ] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - Service critique pour Analytics IA
                  - Pas de tests = pas de couverture
                  - Localisation du service: `src/services/PollAnalyticsService.ts`
               - [ ] Ã‰tape 2: Comprendre ce qui doit Ãªtre testÃ©
                  - Analyser le service pour identifier les fonctions Ã  tester
                  - DÃ©terminer les cas de test nÃ©cessaires
               - [ ] Ã‰tape 3: CrÃ©er les tests
                  - CrÃ©er fichier `src/services/__tests__/PollAnalyticsService.test.ts`
                  - Tester toutes les fonctions publiques
                  - Mocker les dÃ©pendances (API Gemini, etc.)
               - [ ] Ã‰tape 4: Action
                  - [ ] Analyser le service
                  - [ ] CrÃ©er les tests
                  - [ ] VÃ©rifier que tous passent
                  - [ ] Mettre Ã  jour test-guide.md
            - [ ] **4.2 useAnalyticsQuota.test.ts - Tests du hook de quotas**
               - [ ] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - Hook critique pour quotas freemium (5/jour)
                  - Pas de tests = pas de couverture
                  - Localisation du hook: `src/hooks/useAnalyticsQuota.ts`
               - [ ] Ã‰tape 2: Comprendre ce qui doit Ãªtre testÃ©
                  - Analyser le hook pour identifier les cas Ã  tester
                  - Quotas, limites, blocages, etc.
               - [ ] Ã‰tape 3: CrÃ©er les tests
                  - CrÃ©er fichier `src/hooks/__tests__/useAnalyticsQuota.test.ts`
                  - Tester limites, quotas, blocages
                  - Mocker localStorage/storage
               - [ ] Ã‰tape 4: Action
                  - [ ] Analyser le hook
                  - [ ] CrÃ©er les tests
                  - [ ] VÃ©rifier que tous passent
                  - [ ] Mettre Ã  jour test-guide.md
            - [ ] **4.3 PollAnalyticsPanel.test.tsx - Tests du composant UI**
               - [ ] Ã‰tape 1: Ã‰valuer l'intÃ©rÃªt du test
                  - Composant UI critique pour Analytics IA
                  - Pas de tests = pas de couverture UI
                  - Localisation du composant: `src/components/polls/PollAnalyticsPanel.tsx`
               - [ ] Ã‰tape 2: Comprendre ce qui doit Ãªtre testÃ©
                  - Analyser le composant pour identifier les interactions Ã  tester
                  - Rendu, clics, affichage de donnÃ©es, etc.
               - [ ] Ã‰tape 3: CrÃ©er les tests
                  - CrÃ©er fichier `src/components/polls/__tests__/PollAnalyticsPanel.test.tsx`
                  - Tester rendu, interactions, Ã©tats
                  - Mocker les dÃ©pendances (service, hooks)
               - [ ] Ã‰tape 4: Action
                  - [ ] Analyser le composant
                  - [ ] CrÃ©er les tests
                  - [ ] VÃ©rifier que tous passent
                  - [ ] Mettre Ã  jour test-guide.md
      - âœ… **Tests E2E - Optimisations Phase 1 & 2 en cours** (Voir `Docs/PERFORMANCE/E2E-OPTIMIZATION-ANALYSIS.md`)
        - âœ… Phase 1 validÃ©e: Workers CI (1â†’3), cache optimisÃ©, ~5 occurrences optimisÃ©es
        - ğŸ”„ Phase 2 en cours: 6 fichiers optimisÃ©s (~30 occurrences waitForTimeout/networkidle supprimÃ©es)
        - â³ Actions restantes:
             - [ ] Terminer Phase 2: Optimiser ~126 occurrences restantes (edge-cases, mobile-voting, guest-workflow, authenticated-workflow)
             - [ ] Valider que tous les tests smoke passent aprÃ¨s optimisations
             - [ ] Mesurer gain rÃ©el en CI vs temps local (Phase 1: 39.9s local)
             - [ ] DÃ©cider Phase 3 (fixtures rÃ©utilisables, mode serial) selon rÃ©sultats CI
             
- [ ] **Jour 3-4 :** Fixer les bugs identifiÃ©s lors des tests
   - [ ] Bugs critiques (bloquants)
   - [ ] Bugs majeurs (UX dÃ©gradÃ©e)
   - [ ] Bugs mineurs (cosmÃ©tiques)
         - [ ] Dashboard : organisation des centaines de fichiers + suppression scroll
         **Solution prioritaire (BÃªta) :**
         - Pagination avec vue fixe : calcul dynamique items/page selon viewport (responsive), pas de scroll page principale
         - Switch Grid/Table : vue table compacte pour pro (plus d'items visibles), vue grille pour utilisateurs standards
         - Tri et filtres conservÃ©s avec pagination
         - Fichiers : `Dashboard.tsx` (pagination + switch vue), `DashboardTableView.tsx` (nouveau composant)
         **Post-bÃªta :** Organisation par dossiers/tags, virtualisation, archivage auto

#### 4. Tests gÃ©nÃ©raux & polish (4h)
- [ ] **Jour 6 :** Tests manuels complets app
   - [ ] Faire tester par Nathalie et Manus et Pierre et Erwan

### Semaine 2 : Features manquantes + Setup Production (12-14h)

#### 1. AccÃ¨s rÃ©sultats FormPoll + Email (6-7h) ğŸ”¥ CRITIQUE
**Voir `SPEC-FormPoll-Results-Access.md` pour dÃ©tails**

- [ ] **Jour 1-2 (3h) :** VisibilitÃ© des rÃ©sultats
   - [ ] Ajouter champ `resultsVisibility` dans `Poll` (creator-only, voters, public)
   - [ ] UI radio buttons dans `FormPollCreator.tsx`
   - [ ] Helpers `getCurrentUserId()` et `checkIfUserHasVoted()`
   - [ ] ContrÃ´le d'accÃ¨s dans `FormPollResults.tsx`
   - [ ] Bouton conditionnel "Voir les rÃ©sultats" post-vote
   - [ ] Message explicatif si accÃ¨s refusÃ©

- [ ] **Jour 3-4 (3h) :** Email de confirmation
   - [ ] Champ `respondentEmail` dans `FormResponse`
   - [ ] Checkbox "Recevoir une copie par email" dans vote
   - [ ] Input email conditionnel
   - [ ] Service `EmailService.ts` avec template HTML
   - [ ] IntÃ©gration post-soumission (console.log MVP)

- [ ] **Jour 5 (1h) :** Tests manuels
   - [ ] Tester les 3 modes de visibilitÃ©
   - [ ] Tester email confirmation
   - [ ] VÃ©rifier UX complÃ¨te

#### 2. Landing page (2h)
- [ ] **Jour 6 :** Page d'accueil
   - [ ] Value proposition claire
   - [ ] CTA "Essayer gratuitement"
   - [ ] Screenshots de l'app (avec Analytics IA)
   - [ ] Section "Comment Ã§a marche" (3 Ã©tapes)
   - [ ] Mention "Analytics IA gratuits"

#### 3. Setup Production (4-5h)
- [ ] **Jour 7 :** DÃ©ploiement & monitoring
   - [ ] DÃ©ploiement Vercel production (1h)
   - [ ] Configuration domain (doodates.com) (30min)
   - [ ] Setup Sentry pour monitoring erreurs (1h)
   - [ ] VÃ©rification Supabase production (30min)
   - [ ] Analytics & Tracking (Plausible/Posthog) (1h)
   - [ ] Tests smoke en production (1h)

### Semaine 3 : BÃªta Launch ğŸš€
- **Jour 1 :** Recruter 10-20 beta testers
- [ ] Poster sur Reddit (r/SideProject, r/productivity)
- [ ] Partager sur LinkedIn/Twitter
- [ ] Contacter rÃ©seau personnel (10-20 personnes)
- [ ] CrÃ©er formulaire feedback Google Forms
- **Jour 2-7 :** Monitoring, feedback, itÃ©rations rapides
- [ ] RÃ©ponse feedback utilisateurs (< 24h)
- [ ] Corrections bugs critiques dÃ©couverts
- [ ] ItÃ©rations rapides sur UX

**Total :** ~28-30h sur 3 semaines
- Semaine 1 : Tests Analytics IA + Corrections (12h)
- Semaine 2 : Features manquantes + Setup Production (12-14h)
- Semaine 3 : BÃªta Launch + Monitoring (4-6h)

### MÃ©triques de succÃ¨s
**Acquisition :**
- [ ] 10-20 beta testers recrutÃ©s
- [ ] 50-100 visiteurs landing page

**Activation :**
- [ ] 10+ sondages crÃ©Ã©s
- [ ] 50+ votes reÃ§us
- [ ] 5+ exports rÃ©alisÃ©s
- [ ] 20+ queries Analytics IA effectuÃ©es
- [ ] 3+ utilisateurs atteignant quota Analytics

**QualitÃ© :**
- [ ] < 5 bugs critiques remontÃ©s
- [ ] Temps rÃ©ponse moyen < 2s
- [ ] 0 erreurs Sentry critiques

**Feedback :**
- [ ] 70%+ feedback positif
- [ ] 3+ suggestions d'amÃ©lioration concrÃ¨tes
- [ ] Identification top 3 features demandÃ©es

---

### âœ… Avantages CompÃ©titifs vs SurveyMonkey

**Analyse SurveyMonkey (31/10/2025) :** Identification des points de friction et opportunitÃ©s de diffÃ©renciation.

**DooDates bat SurveyMonkey sur :**
1. âœ… **Export gratuit** (4 formats : CSV/JSON/PDF/Markdown) - vs bloquÃ© complÃ¨tement (lock-in agressif)
2. âœ… **RÃ©ponses illimitÃ©es** - vs 25 max (restrictif)
3. âœ… **Branding retirable** - vs logo forcÃ© partout
4. âœ… **IA conversationnelle** - vs interface complexe sans guide
5. âœ… **Questions conditionnelles gratuites** - vs payant
6. âœ… **Onboarding guidÃ©** (aprÃ¨s Quick Win #1) - vs aucun
7. âœ… **Types questions pros gratuits** (Rating, NPS) - vs limitÃ©s en version gratuite

**Message marketing :**
> "SurveyMonkey vous frustre avec ses limites ? DooDates est l'alternative gratuite et intelligente. CrÃ©ez en parlant naturellement, exportez librement, partagez sans limite."

**Positionnement stratÃ©gique :** Freemium gÃ©nÃ©reux + IA conversationnelle (voir aussi section "StratÃ©gie Tarifaire" pour dÃ©tails pricing)

---

### âŒ CE QUI N'EST PAS DANS LA BÃŠTA

### Features ReportÃ©es APRÃˆS BÃªta

**NE PAS implÃ©menter maintenant** : Ces features ajoutent de la complexitÃ© sans valeur immÃ©diate pour valider le concept. Elles seront ajoutÃ©es APRÃˆS avoir collectÃ© du feedback rÃ©el.
- âŒ Templates prÃ©dÃ©finis (l'IA suffit)
- âŒ Multi-step flow Typeform-style
- âŒ ThÃ¨mes visuels premium (3 thÃ¨mes basiques OK)
- âŒ Simulation IA des rÃ©ponses
- âŒ Analyse temporelle continue
- âŒ Validation d'objectifs IA
- âŒ Google Sheets export
- âŒ Calendar integration
- âŒ PWA / Mobile native
- âŒ Analytics avancÃ©s
- âŒ Scoring system
- âŒ Quotas par option
- âŒ File uploads
- âŒ SSO Enterprise

---

## POST BETA - DiffÃ©renciateurs IA Uniques

### EN COURS

---

### ğŸ’° UI Pricing - IntÃ©grations AvancÃ©es (POST BETA)

#### Option C: Conversion optimisÃ©e (30 min) â­ RECOMMANDÃ‰

**Objectif:** Maximiser la conversion en affichant le pricing aux moments stratÃ©giques

**Composants:**
- [X] Sidebar: Bouton "Tarifs" aprÃ¨s "Tableau de bord" âœ… FAIT
- [ ] Modal quota: Trigger automatique Ã  80% et 100% des crÃ©dits
- [ ] Indicateur crÃ©dits: Badge cliquable dans TopBar "42/100 âš¡"
  - Tooltip: DÃ©tails consommation (messages: 20, analytics: 15, simulations: 7)
  - Click â†’ Redirect `/pricing` avec anchor #upgrade

**Fichiers Ã  crÃ©er/modifier:**
- [ ] `src/components/QuotaIndicator.tsx` - Badge crÃ©dits TopBar
- [ ] `src/components/modals/QuotaReachedModal.tsx` - Modal upgrade
- [ ] `src/hooks/useCredits.ts` - Hook unifiÃ© gestion quotas

**Triggers modal:**
- 80% crÃ©dits: "Vous approchez de votre limite" (dismissible 7 jours)
- 100% crÃ©dits: "Quota atteint" (force affichage)
- AprÃ¨s 3 blocages consÃ©cutifs: Recommandation personnalisÃ©e

**PrioritÃ©:** ğŸŸ¡ MOYENNE - Conversion important mais pas bloquant beta

---

#### Option D: ComplÃ¨te (1h)

**Objectif:** VisibilitÃ© maximale du pricing dans toute l'app

**Composants Option C +:**
- [ ] Dashboard card "Votre plan" (tier actuel, usage, upgrade CTA)
- [ ] Menu Settings: Section "Abonnement & Facturation"
- [ ] Floating button: "Upgrade" si crÃ©dits < 20%
- [ ] Banner temporaire: Promotions (ex: "-50% beta testeurs")

**Dashboard card:**
- Tier actuel + badge couleur
- Graphique usage mensuel (crÃ©dits, sondages)
- Boutons: "Voir les plans" / "Acheter crÃ©dits"

**Menu Settings:**
- Historique facturation
- MÃ©thode de paiement
- Gestion abonnement (upgrade/downgrade/cancel)
- Factures tÃ©lÃ©chargeables PDF

**Fichiers Ã  crÃ©er:**
- [ ] `src/components/dashboard/PlanCard.tsx`
- [ ] `src/components/settings/SubscriptionSettings.tsx`
- [ ] `src/components/ui/FloatingUpgradeButton.tsx`

**PrioritÃ©:** ğŸŸ¢ BASSE - Nice to have, attendre feedback beta

---

### ğŸ”¥ APRÃˆS BÃŠTA - DiffÃ©renciateurs Visuels

#### Graphiques Interactifs Recharts (5-7h) ğŸ“Š DIFFÃ‰RENCIATEUR

**Concept :** Visualisations avancÃ©es pour matrices et comparaisons dates (utilise Recharts dÃ©jÃ  installÃ©)

**PrÃ©requis :** Feedback bÃªta confirmant usage matrices + besoins comparaisons dates

**ImplÃ©mentation (5-7h) :**

**1. Matrices â†’ Heatmap interactive Recharts (3h)**
- [ ] Convertir tableau HTML Matrix en Heatmap Recharts
- [ ] Tooltip interactif au hover (ligne, colonne, valeur, %)
- [ ] Gradient de couleur dynamique (0% blanc â†’ 100% bleu saturÃ©)
- [ ] Export heatmap en PNG/SVG (feature Pro)
- [ ] Tests avec matrices 3x3, 5x5, 10x10

**2. Sondages dates â†’ Stacked Bar Chart (2-3h)**
- [ ] Chart comparatif empilÃ© (yes/maybe/no par date)
- [ ] Axe X dates, axe Y nombre de votes
- [ ] LÃ©gende interactive (toggle segments)
- [ ] Tooltip dÃ©taillÃ© au hover
- [ ] Bouton toggle "Tableau / Graphique"

**3. Dashboard â†’ Graphiques d'Ã©volution (2h - optionnel)**
- [ ] Line chart Ã©volution votes dans le temps
- [ ] RÃ©utilisation ChartContainer/Tooltip existants
- [ ] Affichage conditionnel (>10 votes minimum)

**4. Copier**
- [ ] Copier les graphiques (bouton comme Google Form)
   
**Fichiers concernÃ©s :**
- `src/components/polls/FormPollResults.tsx` - Heatmap matrices
- `src/pages/Results.tsx` - Stacked bars dates
- `src/components/ui/chart.tsx` - DÃ©jÃ  prÃªt (wrapper Recharts)
- `src/lib/chartHelpers.ts` (nouveau) - Transformations donnÃ©es

**RÃ©utilisation :**
- âœ… `ChartContainer`, `ChartTooltip`, `ChartLegend` dÃ©jÃ  codÃ©s
- âœ… Recharts 2.12.7 dÃ©jÃ  installÃ© (0 KB ajoutÃ©)
- âœ… Configuration dark mode existante

**MÃ©triques de dÃ©cision :**
- Si >30% des sondages contiennent matrices â†’ ImplÃ©menter heatmap
- Si >50% des sondages dates ont >5 options â†’ ImplÃ©menter stacked bars
- Sinon â†’ Garder visualisations simples CSS

**PrioritÃ© :** ğŸŸ¡ MOYENNE - Feature premium basÃ©e sur usage rÃ©el

---

#### 2. ğŸ¯ Validation d'Objectifs (1h) âœ… **EN COURS**

**Concept :** IntÃ©gration dans la simulation existante - l'utilisateur dÃ©finit un objectif optionnel, l'IA valide que le questionnaire permet de l'atteindre

**Cas d'usage principal :**
- Utilisateurs crÃ©ant des formulaires **manuellement** (via GUI, pas IA)
- Besoin de valider que leur questionnaire atteint leur objectif
- Safety net pour les crÃ©ations manuelles (pas de guidance IA initiale)

**Approche simplifiÃ©e (1h) :**
- Champ optionnel "Objectif" ajoutÃ© dans l'interface de simulation
- IA analyse les rÃ©sultats simulÃ©s par rapport Ã  l'objectif dÃ©fini
- Rapport enrichi avec section "Validation objectif" si objectif fourni

**Workflow :**
1. Utilisateur crÃ©e formulaire manuellement
2. Lance simulation avec objectif optionnel ("Mesurer satisfaction client")
3. IA simule rÃ©ponses + analyse adÃ©quation questionnaire â†” objectif
4. Rapport affiche : Score alignement + Points forts + Suggestions d'amÃ©lioration

**ImplÃ©mentation :**
- âœ… Champ `objective?: string` dans `SimulationRequest`
- âœ… Prompt Gemini enrichi pour analyser objectif
- âœ… UI : Input "Objectif (optionnel)" dans interface simulation
- âœ… Rapport : Section "Validation objectif" conditionnelle

**PrioritÃ© :** ğŸŸ¢ QUICK WIN - RÃ©utilise infrastructure existante, valeur immÃ©diate

---



#### 6. Sections de questions (1-2h) â³ EN DISCUSSION

**Concept :** Permettre de grouper les questions par thÃ¨mes/sections pour amÃ©liorer la lisibilitÃ©.

**Approche proposÃ©e : Sections intÃ©grÃ©es dans la liste**
- Au lieu de Q1, Q2, Q3... â†’ S1 (Section 1), Q1, Q2, S2 (Section 2), Q3...
- Type `FormItem = FormQuestion | FormSection`
- Boutons "Ajouter question" et "Ajouter section" dans la mÃªme liste
- Sections = cards visuelles avec fond diffÃ©rent + icÃ´ne

**Exemple visuel :**
```
ğŸ“‹ S1. Informations personnelles
    Vos coordonnÃ©es de base

Q1. Nom
Q2. Email

ğŸ’­ S2. Feedback
    Votre avis sur notre service

Q3. Satisfaction (1-5)
Q4. Commentaires
```

**ImplÃ©mentation (1-2h) :**
- [ ] Ajouter type `FormSection` dans `pollStorage.ts`
- [ ] Modifier `FormEditor` pour supporter sections + questions
- [ ] UI : Boutons "Ajouter question" / "Ajouter section"
- [ ] Rendu visuel : Cards sections avec style distinct
- [ ] Mode classique : Sections = sÃ©parateurs visuels
- [ ] Mode multi-step : Afficher titre section au-dessus de la question

**Avantages :**
- âœ… Simple et flexible
- âœ… AmÃ©liore lisibilitÃ© formulaires longs
- âœ… Pas de refonte majeure
- âœ… Compatible avec modes classique ET multi-step

**Statut :** â³ EN DISCUSSION - Attente dÃ©cision utilisateur

---

#### ParamÃ¨tres AvancÃ©s des Formulaires (POST BETA) (8-10h)

**FonctionnalitÃ©s prÃ©vues mais non implÃ©mentÃ©es :**

**ParamÃ¨tres de Base :**
- [ ] Personnalisation titre et description
- [ ] Option afficher/masquer logo DooDates
- [ ] Option afficher temps estimÃ© de complÃ©tion
- [ ] Option afficher nombre de questions

**ParamÃ¨tres AvancÃ©s :**
- [ ] Autoriser rÃ©ponses anonymes (toggle)
- [ ] Connexion requise (compte Google) pour voter
- [ ] Une seule rÃ©ponse par personne (cookie)
- [ ] Autoriser modification aprÃ¨s soumission
- [ ] Deadline configurable (date/heure)
- [ ] Limite nombre de rÃ©ponses (illimitÃ© ou max)

**Email confirmation :**
- [ ] Checkbox "Recevoir une copie par email"
- [ ] Input email conditionnel (visible si checkbox)
- [ ] Envoi email avec rÃ©capitulatif des rÃ©ponses

**VisibilitÃ© des RÃ©sultats :**
- [ ] Mode "CrÃ©ateur uniquement"
- [ ] Mode "Participants aprÃ¨s vote"
- [ ] Mode "Public (tout le monde)"
- [ ] UI radio buttons pour choisir la visibilitÃ©
- [ ] ContrÃ´le d'accÃ¨s dans page rÃ©sultats

**PrioritÃ© :** ğŸŸ¡ MOYENNE - Features importantes mais pas bloquantes pour beta
**Voir aussi :** Section "AccÃ¨s aux rÃ©sultats FormPoll + Email confirmation" pour implÃ©mentation partielle

---

#### AccÃ¨s aux rÃ©sultats FormPoll + Email confirmation (6h30)

**ProblÃ¨me actuel :**
- âŒ Bouton "Voir les rÃ©sultats" affichÃ© mais accÃ¨s refusÃ© (frustrant)
- âŒ Pas de contrÃ´le pour le crÃ©ateur sur qui peut voir les rÃ©sultats
- âŒ Pas de copie des rÃ©ponses par email pour le votant

**Solution :** Voir `SPEC-FormPoll-Results-Access.md` pour dÃ©tails complets.

**1. VisibilitÃ© des rÃ©sultats (2h30)**
- [ ] Ajouter champ `resultsVisibility` dans interface `Poll` (3 modes : creator-only, voters, public)
- [ ] CrÃ©er UI radio buttons dans `FormPollCreator.tsx` pour choisir la visibilitÃ©
- [ ] ImplÃ©menter helpers `getCurrentUserId()` et `checkIfUserHasVoted()`
- [ ] Ajouter contrÃ´le d'accÃ¨s dans `FormPollResults.tsx` (vÃ©rifier permissions)
- [ ] Modifier Ã©cran post-vote pour afficher bouton conditionnel "Voir les rÃ©sultats"
- [ ] Afficher message explicatif si accÃ¨s refusÃ©

**2. Email de confirmation (3h)**
- [ ] Ajouter champ `respondentEmail` dans interface `FormResponse`
- [ ] CrÃ©er checkbox "Recevoir une copie par email" dans `FormPollVote.tsx`
- [ ] Ajouter input email conditionnel (visible si checkbox cochÃ©e)
- [ ] Modifier `addFormResponse()` pour stocker l'email
- [ ] CrÃ©er service `EmailService.ts` avec fonction `sendVoteConfirmationEmail()`
- [ ] CrÃ©er template HTML email avec rÃ©capitulatif des rÃ©ponses
- [ ] IntÃ©grer appel service aprÃ¨s soumission (console.log MVP, Resend API en Phase 2)

**3. Tests manuels (1h)**
- [ ] Tester mode "creator-only" : VÃ©rifier accÃ¨s refusÃ© pour non-crÃ©ateur
- [ ] Tester mode "voters" : Voter puis vÃ©rifier accÃ¨s autorisÃ© aux rÃ©sultats
- [ ] Tester mode "public" : VÃ©rifier accÃ¨s sans voter
- [ ] Tester email : Voter avec email et vÃ©rifier console.log
- [ ] VÃ©rifier UX complÃ¨te : Vote â†’ Email â†’ RÃ©sultats

**Fichiers modifiÃ©s :**
- `src/lib/pollStorage.ts` - Types + helpers
- `src/components/polls/FormPollCreator.tsx` - UI visibilitÃ©
- `src/components/polls/FormPollResults.tsx` - ContrÃ´le d'accÃ¨s
- `src/components/polls/FormPollVote.tsx` - Email + bouton conditionnel
- `src/services/EmailService.ts` - Service email (nouveau fichier)

**Impact utilisateur :**
- âœ… Transparence : Le crÃ©ateur contrÃ´le la visibilitÃ©
- âœ… Confiance : Le votant reÃ§oit ses rÃ©ponses par email
- âœ… Pas de frustration : Bouton "Voir rÃ©sultats" fonctionne correctement

---

#### Analytics Anonymes Simulation (3h) ğŸ¯ AMÃ‰LIORATION CONTINUE

**Concept :** Collecter mÃ©triques anonymes des simulations pour amÃ©liorer les benchmarks

**Valeur ajoutÃ©e :**
- **Benchmarks temps rÃ©el DooDates** vs moyennes industrie gÃ©nÃ©riques
- Comparaison pertinente : "Votre questionnaire : 20% abandon (moyenne DooDates : 28%)"
- AmÃ©lioration continue des seuils de dÃ©tection
- DiffÃ©renciateur compÃ©titif (SurveyMonkey ne fait pas Ã§a)

**Architecture :**
```typescript
// MÃ©triques anonymes (aucune donnÃ©e identifiable)
interface SimulationMetricsAnonymous {
  context: SimulationContext;
  questionCount: number;
  avgCompletionRate: number;
  avgTotalTime: number;
  avgDropoffRate: number;
  questionTypes: Record<string, number>;
  timestamp: Date;
}
```

**ImplÃ©mentation (3h) :**
1. **Service Analytics** (1h)
   - Fonction `trackSimulationMetrics(result)` anonyme
   - Envoi vers Supabase (table `simulation_metrics_anonymous`)
   - Aucune donnÃ©e identifiable (pas de pollId, userId, questions, rÃ©ponses)
   
2. **Service Benchmarks** (1h)
   - Fonction `getBenchmarks(context, questionCount)`
   - Calcul moyennes sur 30 derniers jours
   - Cache 24h pour performances
   - AgrÃ©gation par contexte et nombre de questions
   
3. **UI Comparaison** (1h)
   - Afficher benchmarks dans SimulationReport
   - Section "Votre questionnaire vs moyenne DooDates"
   - Indicateurs visuels (meilleur/moins bon que moyenne)

**ConformitÃ© RGPD :** âœ… 100% OK
- Aucune donnÃ©e personnelle
- Aucun identifiant
- AgrÃ©gation uniquement
- Opt-out possible dans settings

**PrÃ©requis :** Phase 1 Simulation IA terminÃ©e + retours utilisateurs

**PrioritÃ© :** ğŸŸ¡ MOYENNE - AmÃ©lioration aprÃ¨s validation MVP

---





---

#### Export PDF Rapport Simulation (1h) ğŸ’¼ PRO

**Concept :** Exporter le rapport de simulation en PDF (feature Pro uniquement)

**Valeur ajoutÃ©e :**
- **Partage** : Envoyer le rapport Ã  l'Ã©quipe
- **Documentation** : Garder trace des tests
- **Professionnalisme** : Format standard pour entreprises
- **MonÃ©tisation** : Feature Pro exclusive

**Contenu PDF :**
- MÃ©triques globales (complÃ©tion, temps, abandon)
- Liste des problÃ¨mes dÃ©tectÃ©s avec recommandations
- CoÃ»t estimÃ© de la simulation
- Branding DooDates

**ImplÃ©mentation (1h) :**
- RÃ©utiliser logique export PDF existante (FormPollResults)
- Template HTML pour rapport simulation
- GÃ©nÃ©ration PDF cÃ´tÃ© client (window.print)
- Bouton "Exporter PDF" dans SimulationReport (dÃ©jÃ  prÃ©sent, Ã  activer)

**PrÃ©requis :** Phase 1 Simulation IA terminÃ©e

**PrioritÃ© :** ğŸŸ¢ BASSE - Nice to have, pas bloquant pour MVP

---

#### File & Media Support (5-8h) ğŸ’¼ OPPORTUNITÃ‰ B2B

**Concept :** Upload fichiers pour gÃ©nÃ©ration intelligente de questions

**Valeur ajoutÃ©e :**
- Cas d'usage B2B : "Upload brief client â†’ questionnaire gÃ©nÃ©rÃ©"
- DiffÃ©renciation vs SurveyMonkey (qui n'a pas Ã§a)
- CoÃ»t technique faible (pas de stockage permanent)
- AccÃ©lÃ¨re crÃ©ation pour utilisateurs pros

**FonctionnalitÃ©s :**
- Upload PDF/CSV/DOCX (+ images avec OCR ?)
- IA extrait contexte et gÃ©nÃ¨re questions
- Exemple : Upload "Satisfaction Client Q3.pdf" â†’ IA gÃ©nÃ¨re questionnaire adaptÃ©
- Traitement temporaire uniquement (pas de stockage)

**ğŸ“‹ TODO :**
- Formats supportÃ©s (PDF/DOCX/CSV suffisants ? Images ?)
- Limite taille (5MB ? 10MB ?)
- Traitement (extraction texte puis prompt Gemini classique)

**PrioritÃ© :** ğŸŸ¡ MOYENNE - OpportunitÃ© B2B Ã  valider

---

### Phase 3 (Mois 4-6+) : IA Temps RÃ©el - 20-25h
**Objectif :** Analyse continue nÃ©cessitant volume de donnÃ©es

#### 5. ğŸ“ˆ Analyse Temporelle Continue (20-25h)

**Concept :** L'IA analyse l'Ã©volution des rÃ©ponses en temps rÃ©el pendant la collecte

**Valeur ajoutÃ©e :**
- DÃ©tection prÃ©coce de problÃ¨mes (baisse taux rÃ©ponse, tendances nÃ©gatives)
- Optimisation campagnes en cours
- Valeur surtout pour entreprises avec volume (500+ rÃ©ponses/poll)

**FonctionnalitÃ©s :**
- Snapshots automatiques Ã  intervalles configurables
- DÃ©tection de tendances ("RÃ©ponses nÃ©gatives +15% depuis hier")
- Alertes intelligentes (baisse taux rÃ©ponse, tendances nÃ©gatives)
- Analyse comparative temporelle (Semaine 1 vs Semaine 2)

**ğŸ“‹ TODO :** DÃ©finir frÃ©quences snapshot, seuils d'alerte, types de tendances
â†’ Voir document SurveyMonkey section 10.4 pour cas d'usage dÃ©taillÃ©s

**PrioritÃ© :** ğŸŸ¢ BASSE - NÃ©cessite volume, infrastructure lourde, valeur B2B uniquement

**Note :** Garder en Phase 3 ou post-lancement selon adoption

---

## ğŸ’° NOUVEAU SYSTÃˆME QUOTAS & PRICING (PRIORITAIRE)

### ğŸ”’ SÃ‰CURISATION QUOTAS & PROTECTION ANTI-ABUS (CRITIQUE)

**Date analyse :** 03 Novembre 2025  
**ProblÃ¨me identifiÃ© :** SystÃ¨me actuel vulnÃ©rable aux abus (localStorage + clÃ© API exposÃ©e)

#### âš ï¸ FAILLES ACTUELLES

**1. Quotas localStorage (cÃ´tÃ© client uniquement)**
- âŒ Stockage dans `localStorage.getItem('doodates_ai_quota')`
- âŒ Bypass trivial : `localStorage.setItem('doodates_ai_quota', JSON.stringify({aiMessagesUsed: 0}))`
- âŒ Mode navigation privÃ©e = nouveau quota Ã  chaque fois
- âŒ Pas de vÃ©rification serveur avant appel Gemini API

**2. ClÃ© API Gemini exposÃ©e**
- âŒ `VITE_GEMINI_API_KEY` dans le bundle client (visible par tous)
- âŒ Extraction possible : DevTools â†’ Sources â†’ Rechercher "GEMINI_API_KEY"
- âŒ Utilisation directe de la clÃ© pour appels illimitÃ©s
- âŒ CoÃ»t illimitÃ© possible pour vous

**3. Impact financier**
- 1 utilisateur malveillant = 10 000+ appels API/mois
- CoÃ»t estimÃ© : 50-100â‚¬/mois par abus
- Risque : faillite si plusieurs abus simultanÃ©s

#### âœ… SOLUTION : ARCHITECTURE SÃ‰CURISÃ‰E

**Principe :** Toute vÃ©rification de quota + appel API doit passer par serveur (Supabase Edge Function)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENT (React)                          â”‚
â”‚ âŒ Plus de clÃ© API Gemini              â”‚
â”‚ âŒ Plus de vÃ©rification quota locale   â”‚
â”‚ âœ… Token JWT Supabase (authentifiÃ©)     â”‚
â”‚ âœ… Tous appels â†’ Edge Function          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SUPABASE EDGE FUNCTION (/api/chat)       â”‚
â”‚ âœ… VÃ©rifie JWT (auth.uid())              â”‚
â”‚ âœ… VÃ©rifie quota DB (transaction atomique)â”‚
â”‚ âœ… Consomme crÃ©dit avant appel API       â”‚
â”‚ âœ… ClÃ© Gemini = variable serveur (safe)  â”‚
â”‚ âœ… Rate limiting userId + IP             â”‚
â”‚ âœ… Logs audit (qui a fait quoi)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GEMINI API                               â”‚
â”‚ âœ… ClÃ© jamais exposÃ©e au client          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ImplÃ©mentation :**

**Backend (Supabase Edge Function):**
- [ ] CrÃ©er `/supabase/functions/check-quota-and-chat/index.ts`
- [ ] VÃ©rifier JWT : `const userId = await verifyJWT(request)`
- [ ] VÃ©rifier quota DB : `SELECT credits_remaining FROM user_quotas WHERE user_id = $1 FOR UPDATE`
- [ ] Consommer atomiquement : `UPDATE user_quotas SET credits_remaining = credits_remaining - 1`
- [ ] Appeler Gemini API (clÃ© dans `Deno.env.get('GEMINI_API_KEY')`)
- [ ] Retourner rÃ©ponse uniquement si succÃ¨s
- [ ] Rate limiting : 100 messages/heure par userId, 20/heure par IP (invitÃ©s)

**Frontend :**
- [ ] Supprimer `VITE_GEMINI_API_KEY` du `.env`
- [ ] Modifier `GeminiChatInterface.tsx` : appeler Edge Function au lieu de Gemini directement
- [ ] GÃ©rer erreurs quota (affichage modal upgrade)
- [ ] Cache localStorage = UI uniquement (pas source de vÃ©ritÃ©)

**Protection additionnelle :**
- [ ] Rate limiting par IP (Cloudflare/Vercel) : 100 req/h pour invitÃ©s
- [ ] DÃ©tection anomalies : alerte si > 50 crÃ©dits/heure par userId
- [ ] Restrictions Gemini (Google Cloud) : quota max 1000 req/jour par clÃ©
- [ ] Rotation clÃ©s API : changer si compromis

#### ğŸ›¡ï¸ DÃ‰FENSE EN PROFONDEUR

**Couche 1 : Authentification**
- JWT Supabase obligatoire (expiration 15 min)
- Impossible d'appeler Edge Function sans compte valide

**Couche 2 : Quotas en DB (source de vÃ©ritÃ©)**
- Transaction atomique (FOR UPDATE) = pas de race condition
- VÃ©rification + consommation = une seule opÃ©ration

**Couche 3 : Rate limiting**
- Par userId : 100 messages/heure (authentifiÃ©), 20/heure (invitÃ©)
- Par IP : 100 req/heure (protection anti-multi-comptes)

**Couche 4 : Monitoring**
- Logs toutes les requÃªtes (userId, timestamp, crÃ©dits consommÃ©s)
- Alertes si usage suspect (> 50 crÃ©dits/heure)

**Couche 5 : Restrictions API externe**
- Quotas Gemini dans Google Cloud Console
- Alertes si dÃ©passement

#### ğŸ“Š COÃ›TS MAÃTRISÃ‰S

**Avec sÃ©curisation :**
- 1 utilisateur gratuit = max 20 crÃ©dits/mois = 0.01â‚¬
- 1 utilisateur Premium = max 100 crÃ©dits/mois = 0.05â‚¬
- Protection contre abus = impossible de bypass

**Sans sÃ©curisation :**
- 1 utilisateur malveillant = illimitÃ© = 50-100â‚¬/mois
- Risque : faillite

#### âœ… OFFRE GRATUITE AVEC SÃ‰CURISATION

**StratÃ©gie :** Maintenir offre gÃ©nÃ©reuse (20 crÃ©dits/mois) car :
- âœ… Quotas vÃ©rifiÃ©s cÃ´tÃ© serveur (impossible bypass)
- âœ… Rate limiting protÃ¨ge contre abus massifs
- âœ… CoÃ»t maÃ®trisÃ© mÃªme avec quelques abus isolÃ©s
- âœ… Conversion optimisÃ©e (offre gÃ©nÃ©reuse = meilleure adoption)

**Quotas proposÃ©s :**
- **Gratuit :** 20 crÃ©dits/mois (â‰ˆ 0.01â‚¬/mois)
- **Premium :** 100 crÃ©dits/mois (â‰ˆ 0.05â‚¬/mois)
- **Pro :** 1000 crÃ©dits/mois (â‰ˆ 0.50â‚¬/mois)

**Protection invitÃ©s (sans compte) :**
- Rate limiting strict : 10 messages max par IP/jour
- Forcer authentification aprÃ¨s 5 messages
- CoÃ»t nÃ©gligeable : 5 Ã— 0.0005â‚¬ = 0.0025â‚¬/visiteur

**Risques rÃ©siduels acceptables :**
- Utilisateurs trÃ¨s techniques (reverse engineering) = coÃ»t maÃ®trisÃ© par rate limiting
- Attaques coordonnÃ©es = dÃ©tectables via monitoring
- Comparaison : mÃªme Netflix/GitHub ont des contournements (objectif = rendre abus non rentable)

#### ğŸ“‹ CHECKLIST SÃ‰CURISATION

**Phase 1 : Migration Edge Function (1 jour)**
- [ ] CrÃ©er Edge Function `/api/chat`
- [ ] DÃ©placer clÃ© Gemini â†’ variable serveur
- [ ] ImplÃ©menter vÃ©rification quota DB
- [ ] Tester consommation atomique

**Phase 2 : Migration frontend (4h)**
- [ ] Modifier `GeminiChatInterface.tsx` â†’ appeler Edge Function
- [ ] Supprimer `VITE_GEMINI_API_KEY` du client
- [ ] GÃ©rer erreurs quota (modals)

**Phase 3 : Rate limiting (2h)**
- [ ] ImplÃ©menter rate limiting userId (Edge Function)
- [ ] ImplÃ©menter rate limiting IP (Vercel/Cloudflare)
- [ ] Tester limites

**Phase 4 : Monitoring (2h)**
- [ ] Logs audit dans Edge Function
- [ ] Dashboard monitoring (Supabase logs)
- [ ] Alertes anomalies (email/webhook)

**Tests :**
- [ ] Tentative bypass localStorage (doit Ã©chouer)
- [ ] Tentative extraction clÃ© API (doit Ãªtre impossible)
- [ ] Test rate limiting (blocage aprÃ¨s limite)
- [ ] Test consommation atomique (pas de race condition)

---

### Phase 1: ClÃ©s Beta Testeurs (1 jour) ğŸ URGENT

**Objectif:** Permettre aux beta testeurs d'utiliser l'app sans limites

**Document:** Docs\BETA-TESTER-IMPLEMENTATION-GUIDE.md

**Backend (Supabase):**
- [ ] Migration SQL: Table `beta_keys` (code, status, assigned_to, expires_at)
- [ ] Function `generate_beta_key()` â†’ Format BETA-XXXX-XXXX-XXXX
- [ ] Function `redeem_beta_key(user_id, code)` â†’ Activation + upgrade tier
- [ ] RLS policies (admin peut tout voir, user voit ses clÃ©s)

**Frontend:**
- [ ] Service `BetaKeyService.ts` (generateKeys, redeemKey, listKeys)
- [ ] Page Settings: Section "ClÃ© Beta" avec input activation
- [ ] Badge "ğŸ Beta Tester" dans TopBar si tier = beta
- [ ] Page admin `/admin/beta-keys` pour gÃ©nÃ©rer et suivre clÃ©s
- [ ] CSV export des clÃ©s gÃ©nÃ©rÃ©es

**Tier Beta:**
- [ ] Ajouter `beta` dans enum tiers (free, premium, pro, beta)
- [ ] Quotas beta = Pro (1000 crÃ©dits/mois, sondages illimitÃ©s)
- [ ] DurÃ©e: 3 mois puis conversion auto â†’ Gratuit
- [ ] Support prioritaire (Discord dÃ©diÃ©)

**Tests:**
- [ ] GÃ©nÃ©ration 20 clÃ©s
- [ ] Redemption clÃ© valide
- [ ] Erreurs: clÃ© invalide, dÃ©jÃ  utilisÃ©e, expirÃ©e
- [ ] Conversion tier aprÃ¨s activation
- [ ] Expiration automatique aprÃ¨s 3 mois

**Fichiers Ã  crÃ©er:**
- `sql-scripts/create-beta-keys-table.sql`
- `src/services/BetaKeyService.ts`
- `src/components/settings/BetaKeyRedemption.tsx`
- `src/pages/admin/BetaKeys.tsx`

**Livrable:** 20 clÃ©s gÃ©nÃ©rÃ©es, prÃªtes Ã  distribuer aux beta testeurs

---

### Phase 2: Mode InvitÃ© LimitÃ© (2 jours)

**Objectif:** Permettre essai IA sans compte (5 messages) mais bloquer sauvegarde ET publication

**Date analyse :** 03 Novembre 2025  
**ProblÃ¨me identifiÃ© :** Actuellement, les utilisateurs anonymes peuvent crÃ©er des sondages en DB (creator_id = null), ce qui pose des problÃ¨mes de sÃ©curitÃ© et de cohÃ©rence.

#### âš ï¸ Ã‰TAT ACTUEL (PROBLÃ‰MATIQUE)

**Ce qui fonctionne actuellement :**
- âœ… Utilisateurs anonymes peuvent crÃ©er des sondages en DB (`creator_id = null`)
- âœ… Sondages anonymes sont publiables et accessibles via slug
- âœ… Dashboard accessible sans authentification (mais lit localStorage uniquement)

**ProblÃ¨mes identifiÃ©s :**
- âŒ IncohÃ©rence : sondages crÃ©Ã©s en DB mais non visibles dans dashboard (lit localStorage)
- âŒ SÃ©curitÃ© : pas de contrÃ´le sur qui crÃ©e quoi
- âŒ Pas de limite : utilisateurs anonymes peuvent crÃ©er illimitÃ©ment
- âŒ Pas de lien avec compte : impossible de rÃ©cupÃ©rer ses sondages aprÃ¨s crÃ©ation

#### âœ… STRATÃ‰GIE : MODE INVITÃ‰ SÃ‰CURISÃ‰

**Principe :** Mode invitÃ© = localStorage uniquement (pas de DB). Publication nÃ©cessite authentification.

**Architecture :**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MODE INVITÃ‰ (Sans compte)                â”‚
â”‚ âœ… 5 messages IA max (localStorage)      â”‚
â”‚ âœ… CrÃ©ation sondage en localStorage      â”‚
â”‚ âœ… Preview uniquement (pas de publication)â”‚
â”‚ âŒ Pas d'accÃ¨s dashboard                  â”‚
â”‚ âŒ Pas de sauvegarde DB                   â”‚
â”‚ â†’ Modal "CrÃ©er un compte pour publier"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ Signup
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MODE AUTHENTIFIÃ‰ (Gratuit)               â”‚
â”‚ âœ… 20 crÃ©dits IA/mois (DB)                â”‚
â”‚ âœ… CrÃ©ation sondage en DB                 â”‚
â”‚ âœ… Publication autorisÃ©e                  â”‚
â”‚ âœ… Dashboard accessible                  â”‚
â”‚ âœ… Synchronisation multi-appareils       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Modifications Ã  faire :**

**Backend (Supabase):**
- [ ] Modifier RLS policies : `creator_id` ne peut plus Ãªtre `null` (NOT NULL constraint)
- [ ] Supprimer politique `polls_insert_anonymous` (crÃ©ation anonyme interdite)
- [ ] Migration : nettoyer sondages existants avec `creator_id = null` (optionnel : garder avec `admin_token`)

**Frontend :**
- [ ] Hook `useGuestTrial()` (5 crÃ©dits lifetime, mÃ©moire React state uniquement)
- [ ] Modifier `GeminiChatInterface.tsx`:
  - Compteur "3/5 messages restants" (invitÃ©s)
  - Blocage Ã  5 messages avec modal signup
  - VÃ©rifier quota DB pour utilisateurs connectÃ©s
- [ ] Modifier `usePolls.ts` :
  - `createPoll()` : vÃ©rifier `if (!user) return { error: "Authentification requise" }`
  - Bloquer crÃ©ation DB si pas authentifiÃ©
  - Mode invitÃ© : sauvegarder uniquement en localStorage (preview)
- [ ] Bloquer publication `PollEditor.tsx` si !user
  - Bouton "Publier" â†’ Modal "CrÃ©er un compte pour publier"
  - Garder mode "Preview" accessible
- [ ] Dashboard : redirection vers `/auth` si !user
  - Message : "Connectez-vous pour voir vos sondages"
- [ ] Modal `AuthIncentiveModal.tsx` avec bÃ©nÃ©fices compte gratuit :
  - "Synchronisez vos sondages sur tous vos appareils"
  - "20 crÃ©dits IA/mois gratuitement"
  - "AccÃ¨s au dashboard et historique"
  - "Partagez et publiez vos sondages"

**Protection anti-abus:**
- [ ] Pas de localStorage pour quotas (Ã©tat React uniquement)
- [ ] Refresh page = reset compteur invitÃ©
- [ ] Rate limiting IP: 10 messages/jour max (Cloudflare/Vercel)
- [ ] DÃ©tection pattern : mÃªme IP crÃ©e > 5 sondages â†’ bloquer temporairement

**Tests E2E:**
- [ ] Workflow invitÃ© : crÃ©er sondage â†’ preview â†’ tentative publication â†’ modal signup
- [ ] Workflow invitÃ© : 5 messages â†’ blocage â†’ modal signup
- [ ] Workflow authentifiÃ© : crÃ©ation â†’ publication â†’ visible dans dashboard
- [ ] Dashboard : redirection si non authentifiÃ©

---

### Phase 3: SystÃ¨me CrÃ©dits UnifiÃ©s (3 jours)

**Objectif:** Remplacer quotas sÃ©parÃ©s par crÃ©dits IA unifiÃ©s en DB

**Backend (Supabase):**
- [ ] Migration SQL: Table `user_quotas`
  ```sql
  - tier (free, premium, pro, beta)
  - plan (monthly, annual)
  - credits_total (20, 100, 1000, 1000)
  - credits_used
  - credits_remaining
  - max_polls (20, 100, unlimited, unlimited)
  - period_start, period_end, reset_date
  ```
- [ ] Function `consume_credits(user_id, amount)` avec transaction
- [ ] Function `reset_monthly_quotas()` + cron job (1er du mois)
- [ ] Function `check_and_expire_beta_keys()` + cron job (quotidien)
- [ ] RLS policies (user voit uniquement ses quotas)
- [ ] Index performance (user_id, tier)

**Migration donnÃ©es:**
- [ ] Script conversion localStorage â†’ Supabase
- [ ] Mapping ancien systÃ¨me:
  ```
  aiMessages + analyticsQueries + (simulations Ã— 5) = crÃ©dits
  ```
- [ ] Bonus 20% goodwill pour utilisateurs existants
- [ ] Grace period 30 jours (ancien systÃ¨me actif en parallÃ¨le)

**Frontend:**
- [ ] Service `QuotaService.ts` (getQuota, consumeCredits, purchasePack)
- [ ] Hook `useCredits()` unifiÃ© (remplace useAiMessageQuota, useAnalyticsQuota)
- [ ] Modifier consommation dans:
  - `GeminiChatInterface.tsx`: 1 crÃ©dit/message
  - `PollAnalyticsPanel.tsx`: 1 crÃ©dit/query + 1 crÃ©dit/insight
  - `SimulationService.ts`: 5 crÃ©dits/simulation
- [ ] Indicateur TopBar: "42/100 crÃ©dits âš¡" avec tooltip dÃ©tails
- [ ] Modal `QuotaReachedModal.tsx`:
  - Tier actuel + usage
  - Recommandation (pack crÃ©dits vs upgrade)
  - Boutons CTA (Acheter pack / Voir plans)
- [ ] Page `/pricing` avec comparaison tiers

**Tests:**
- [ ] Consommation crÃ©dits (chat, analytics, simulation)
- [ ] Blocage Ã  0 crÃ©dits
- [ ] Reset mensuel (simulation date)
- [ ] Rollover annuel (simulation)
- [ ] Performance: 100 users simultanÃ©s consommant crÃ©dits

---

### Phase 4: UI Pricing & Conversion (2 jours)

**Page Pricing (`/pricing`):** âœ… CRÃ‰Ã‰
- [X] Composant `PricingPage.tsx`
- [X] Toggle Monthly/Annual avec badge Ã©conomie
- [X] 3 cards tiers (Gratuit, Premium, Pro)
- [X] Section Beta Testeurs (comment rejoindre)
- [X] Comparaison features (tableau)
- [X] FAQ pricing (6 questions)
- [X] CTA final "Commencer gratuitement"
- [X] Responsive mobile + Dark mode
- [X] Route `/pricing` configurÃ©e

**Modal Upgrade in-app:**
- [ ] Trigger automatique Ã  100% quota
- [ ] Afficher tier actuel + recommandation personnalisÃ©e
- [ ] Boutons:
  - "Voir les plans" â†’ /pricing
  - "Acheter pack crÃ©dits" â†’ Modal achat
  - "Plus tard" â†’ Fermer (re-trigger dans 7 jours)
- [ ] Tracking analytics (ouverture, clics, conversion)

**Packs crÃ©dits (Phase 2 - aprÃ¨s Stripe):**
- [ ] Modal `CreditPackPurchase.tsx`
- [ ] 3 packs (50/3â‚¬, 100/5â‚¬, 500/20â‚¬)
- [ ] Integration Stripe Checkout
- [ ] Confirmation email avec rÃ©cap
- [ ] Ajout crÃ©dits immÃ©diat aprÃ¨s paiement
- [ ] ValiditÃ© 6 mois (tracking expiration)

---

### Phase 5: Programme Beta Testeurs (1 semaine)

**Recrutement (20 testeurs):**
- [ ] Formulaire candidature Google Forms
- [ ] Posts recrutement:
  - [ ] Reddit r/SideProject, r/productivity
  - [ ] LinkedIn (post personnel)
  - [ ] Twitter/X thread
  - [ ] RÃ©seau personnel (10 clÃ©s rÃ©servÃ©es)
- [ ] SÃ©lection profils (diversitÃ© usage, engagement)
- [ ] GÃ©nÃ©ration 20 clÃ©s beta
- [ ] Email bienvenue avec clÃ© + instructions

**Setup infrastructure:**
- [ ] Discord serveur privÃ© beta
- [ ] Canaux: #annonces, #bugs, #feedback, #showcase
- [ ] RÃ´le "Beta Tester" automatique
- [ ] Bot notifications (nouveau bug, feedback)

**Suivi engagement:**
- [ ] Questionnaire Semaine 1 (premiÃ¨re impression)
- [ ] Questionnaire Semaine 4 (mi-parcours)
- [ ] Questionnaire Semaine 8 (feedback dÃ©taillÃ©)
- [ ] Questionnaire Semaine 12 (final + testimonials)
- [ ] Interviews 1-on-1 avec 5 power users
- [ ] Calendrier relances (inactifs > 7 jours)

**MÃ©triques tracking:**
- [ ] Dashboard admin: Usage beta testeurs
- [ ] Sondages crÃ©Ã©s (objectif: 100+ collectif)
- [ ] Bugs reportÃ©s (objectif: 50+)
- [ ] Feedback score moyen (objectif: 4+/5)
- [ ] Testimonials collectÃ©s (objectif: 10+)

**Conversion post-beta:**
- [ ] Email J-7: "Votre bÃªta se termine bientÃ´t"
- [ ] Email J-0: "Offre exclusive: Premium 50% off (4.50â‚¬/mois, 6 mois)"
- [ ] Badge permanent "Early Supporter" si upgrade
- [ ] Conversion auto tier beta â†’ free si pas d'upgrade

---

### Documentation

- [ ] `Docs/USER-DOCUMENTATION/18-QUOTAS-PRICING-FINAL.md` âœ… CRÃ‰Ã‰
- [ ] Update `Docs/USER-DOCUMENTATION/14-FAQ.md` (section quotas)
- [ ] Update `Docs/USER-DOCUMENTATION/06-Analytics-IA.md` (nouveaux quotas)
- [ ] CrÃ©er `Docs/BETA-TESTER-GUIDE.md` (guide complet beta testeurs)
- [ ] Update README.md (mention programme beta)

---

### Checklist Lancement Beta

**Technique:**
- [ ] Tables DB (user_quotas, beta_keys)
- [ ] SystÃ¨me clÃ©s fonctionnel
- [ ] 20 clÃ©s gÃ©nÃ©rÃ©es et testÃ©es
- [ ] Mode invitÃ© (5 crÃ©dits)
- [ ] SystÃ¨me crÃ©dits unifiÃ©s dÃ©ployÃ©
- [ ] Badge Beta visible
- [ ] Page /pricing live
- [ ] Discord beta crÃ©Ã©

**Communication:**
- [ ] Email template bienvenue beta
- [ ] Formulaire candidature
- [ ] Posts recrutement publiÃ©s
- [ ] Page `/beta` expliquant programme
- [ ] Questionnaires prÃ©parÃ©s

**Suivi:**
- [ ] Analytics tracking (activation clÃ©s, usage, conversion)
- [ ] Dashboard admin beta testeurs
- [ ] Alertes (bugs critiques, inactivitÃ©)
- [ ] Scripts support (FAQ beta)

**Total:** ~8 jours + 1 semaine recrutement/suivi  
**PrioritÃ©:** ğŸ”¥ CRITIQUE (permet lancement beta sans limitations)  
**CoÃ»t:** 20 testeurs Ã— $0.50/mois = $10/mois (ROI: testimonials + feedback + conversions)

---

## PRE LANCEMENT

### Technique

#### Timezone (2h)
- **QUESTION** : choix de la timezone ? Comment cela se passe actuellement et dans un contexte internationale, comment faire cela au mieux ?
    - Ajouter choix timezone lors de la crÃ©ation
    - Stocker timezone: "Europe/Paris" dans les polls
    - Afficher indication "Horaires en heure de Paris"
    - Utiliser date-fns-tz pour conversion

#### Authentication & Security
- **Sans Compte Owner Token** (voir @Sans-Compte-OwnerToken.md)
- **AccessibilitÃ©** (Ã©diteur + vote) : Focus management, aria labels
- **Performance** : Rendre uniquement la question active (dÃ©jÃ  fait), virtualisation si > 20 questions

#### Google Services Integration (10-15h)
**Objectif :** IntÃ©gration complÃ¨te Ã©cosystÃ¨me Google

**Composants :**

**1. Google OAuth 2.0 (base) - 4h**
- Flow frontend/backend
- Tokens management (stockage, refresh)
- Scopes permissions

**2. Google Sheets API Export - 8-12h**
- Export direct vers Sheets via API officielle
- CrÃ©ation spreadsheet automatique
- Remplissage donnÃ©es structurÃ©es
- Gestion rate limits (300 req/min)

**3. Calendar Integration (optionnel) - 2-3h**
- Auto-suggestion aprÃ¨s sÃ©lection dates
- Connexion calendrier (Google Calendar API)
- Interface discrÃ¨te et optionnelle

**Architecture :**
- Backend Node.js pour gestion tokens
- googleapis SDK
- Rate limiting + error handling

**Note :** Base OAuth rÃ©utilisable pour tous les services Google

#### Deployment & Operations
- **Production Setup** : Domain, hosting, email service, database
- **CI/CD Pipeline** : Tests automatisÃ©s, branch protection, deployment automation

---

### Business & Marketing

#### StratÃ©gie Tarifaire

**RÃ©fÃ©rence pricing Doodle (03/11/2025) :**
- Free : â‚¬0
- Pro : â‚¬6.95/user/mois (annuel)
- Team : â‚¬8.95/user/mois (annuel)

**DÃ©cision :**
- âœ… **Premium = 6.95â‚¬/mois** (au lieu de 9â‚¬) â†’ AlignÃ© Doodle Pro pour fonctionnalitÃ©s de base (sondages de dates)
- âœ… **IA = bonus inclus** (pas de surcoÃ»t) â†’ DiffÃ©renciateur unique
- âœ… **Pro = 29â‚¬/mois** â†’ Ã‰quivalent Team Doodle (3 users) + IA avancÃ©e

**Positionnement :** MÃªme prix que Doodle pour fonctionnalitÃ©s de base, IA en bonus.

**Avantages vs Doodle :** MÃªme prix base + IA incluse + Analytics IA + Formulaires avancÃ©s + Export illimitÃ©

**Voir aussi :** Section "Avantages CompÃ©titifs vs SurveyMonkey" pour diffÃ©renciateurs complets.


#### Plan d'Acquisition

**Objectif :** Atteindre les 100 premiers utilisateurs

**Canaux :**
- Landing page optimisÃ©e (SEO, conversion)
- Product Hunt launch
- Reddit outreach (r/productivity, r/SideProject)
- Personal network
- Social media (LinkedIn, Twitter)

---

## LAUNCH

### Launch Day (Jour 0)
- [ ] Product Hunt launch
- [ ] Reddit posts (r/productivity, r/SideProject)
- [ ] Personal network outreach
- [ ] Social media annonce

### Post-Launch (Semaine 1-4)
- [ ] Daily monitoring (analytics + Sentry)
- [ ] RÃ©pondre feedback utilisateurs
- [ ] ItÃ©rations rapides (bugs + quick wins)
- [ ] MÃ©triques de succÃ¨s: 50-100 users, 10+ polls created

## APRES LANCEMENT

### Phase 4 (Mois 6-9) : MonÃ©tisation
**DÃ©clencheur :** 500+ utilisateurs actifs

#### Payment System & Monetization (10-15h)
- **SystÃ¨me de paiement intÃ©grÃ©** (Stripe/Paddle)
- **Gestion abonnements Pro/Premium**
- **DÃ©blocage features payantes** (exports avancÃ©s, analytics dÃ©taillÃ©s)
- **Quotas Management** : Limites par option/segment, feedback temps-rÃ©el
   Aligner la doc "6. [Quotas et Limites](#quotas-et-limites)"
- **QUESTION** : Ã‰tats UI quotas (source de vÃ©ritÃ© serveur, Ã©tats Ã  afficher, seuil "presque plein" 90%/95%?)

**Note:** Formats d'export actuellement supportÃ©s: CSV, PDF, JSON, Markdown (pas de Google Sheets/XLSX)

#### ğŸ¨ ThÃ¨mes Premium (10-15h)

**âšªâš« ThÃ¨me MINIMALISTE Light + Dark (Premium)**
- Public : Power users, pros, sessions longues
- Objectif : Conversion payante, diffÃ©renciation tangible
- Status : âœ… Specs complÃ¨tes (Ã  gÃ©nÃ©rer par LÃ©a)
- Fichier : `Docs/Visual-Identity-Specs.md` sections 3A/3B
- Accent Light : Coral `#FF6B6B`
- Accent Dark : Mint `#00FFA3`

**ğŸŒ¿ ThÃ¨me NATURE (Gratuit)**
- Public : Grand public, Ã©vÃ©nements occasionnels
- Objectif : Acquisition, marketing viral
- Status : âœ… Specs complÃ¨tes + mockups gÃ©nÃ©rÃ©s
- Fichier : `Docs/Visual-Identity-Specs.md` section 3

**Objectif Phase 4 :** Valider conversion freemium â†’ payant

---

### Phase 5 (Mois 9-12) : Scale International
**DÃ©clencheur :** 1000+ utilisateurs, demande internationale

#### i18n (Internationalisation) (10-15h)
- Setup i18next
- Traductions (ES, DE, IT)
- Formats locaux (dates, nombres, devises)
- DÃ©tection automatique langue navigateur

**Impact :** Expansion marchÃ© au-delÃ  de FR/EN

#### PWA/Mobile Native (20-40h)
**Option A : PWA Core Features**
- Installable app
- Push notifications
- Offline functionality

**Option B : Mobile Native (Capacitor)**
- Transform web app to Android native
- Native APIs integration
- Push notification system complet

**DÃ©cision :** Selon usage mobile en Phase 4

**Objectif Phase 5 :** Expansion gÃ©ographique

---

### Phase 6 (Mois 12+) : UX Premium
**DÃ©clencheur :** Feedback utilisateurs demandant ces features


#### Smart Suggestions Proactives (6-8h)
- [x] Suggestions contextuelles intelligentes (via Validation Objectifs)
- [x] Boutons "Appliquer" cliquables
- [ ] Suggestions proactives EN TEMPS RÃ‰EL pendant l'Ã©dition
- [ ] "Cette question pourrait Ãªtre une matrice ?" (dÃ©tection patterns)
- [ ] "Trop d'options, veux-tu les grouper ?" (optimisation UX)
- [ ] Undo/Redo
- [ ] Tester formulations naturelles possibles

**Statut :** ğŸŸ¡ PARTIELLEMENT IMPLÃ‰MENTÃ‰
- âœ… Suggestions post-simulatgion avec application 1-clic
- â³ Suggestions proactives temps rÃ©el (Phase 6)

**Objectif Phase 6 :** DiffÃ©renciation UX

**Pour complÃ©ter la feature :**
- DÃ©tection proactive pendant l'Ã©dition :
// Exemple : DÃ©tecter qu'une question a >7 options
useEffect(() => {
  if (question.options.length > 7) {
    showSuggestion("Trop d'options, veux-tu les grouper ?");
  }
}, [question.options]);
- Suggestions contextuelles par question :
      "Cette question texte pourrait Ãªtre un choix multiple ?"
      "Ajouter une option 'Autre' ?"
      "Rendre cette question obligatoire ?"
- Undo/Redo :
      Historique des modifications
      Boutons Ctrl+Z / Ctrl+Y

## BACKLOG WAITING FOR DEMAND

### Nice-to-have
- **Reordering & Duplication** : Focus management, raccourcis clavier, annonces ARIA, ID stability


