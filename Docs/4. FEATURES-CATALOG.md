# üìÖ DooDates - Catalogue des Fonctionnalit√©s & Audit Technique

Ce document est la source de v√©rit√© d√©finitive pour toutes les fonctionnalit√©s de DooDates. Il fait le pont entre la valeur utilisateur de haut niveau et la logique d'impl√©mentation technique, en fournissant des liens directs vers le code source et les suites de v√©rification.

---

## 1. üè¢ Espace de Travail Intelligent & Organisation

### 1.1 Organisation & Taxonomie
- **Dossiers Hi√©rarchiques** : Cr√©ez des dossiers imbriqu√©s pour regrouper les sondages par projet ou par client.
  - *Logique* : `FolderStorage.ts` g√®re la hi√©rarchie synchronis√©e localement et sur le cloud.
  - *V√©rification* : `tags-folders.spec.ts` (E2E).
- **√âtiquettes Intelligentes (Tags)** : Appliquez plusieurs tags s√©mantiques color√©s pour un filtrage horizontal.
  - *Logique* : `TagStorage.ts` g√®re les m√©tadonn√©es et la persistance des tags.
- **Favoris & √âpinglage** : "Starisez" les √©l√©ments critiques pour un acc√®s instantan√© via la barre lat√©rale.
- **Op√©rations group√©es** : Interface multi-s√©lection pour les mises √† jour de statut (Archiver/Supprimer/D√©placer) et l'exportation par lot.
  - *V√©rification* : `Dashboard.test.tsx` (Unitaire).

### 1.2 Recherche Puissante (Omni-Search)
- **Recherche Contextuelle** : Recherche "fuzzy" en temps r√©el sur les titres, les extraits de contenu et les √©tiquettes.
  - *Logique* : `ConversationSearchService.ts` avec correspondance de pr√©fixes et scoring.
  - *Cache* : `SearchCache.ts` optimise les requ√™tes r√©p√©t√©es pour des r√©sultats < 100ms.
  - *V√©rification* : `useConversationSearch.test.ts`.

### 1.3 Transparence d'Utilisation
- **Journal de Consommation** : Journal granulaire de toutes les actions consommant des cr√©dits (Messages IA, cr√©ation de sondages, scans vision).
  - *Logique* : `ConsumptionJournal.tsx` int√©gr√© √† `AiQuotaService.ts`.
- **Tableaux de Bord Administratifs** : Vues sp√©cifiques √† l'utilisateur et au niveau Admin pour la sant√© du syst√®me et l'utilisation des quotas.
  - *Impl√©mentation* : `AdminQuotaDashboard.tsx`, `AdminUserActivity.tsx`.

---

## 2. ü§ñ C≈ìur IA Gemini : "L'Interface Agente"
*Int√©gration avanc√©e des LLM pour la cr√©ation et le raisonnement automatis√©s.*

### 2.1 Extraction d'Intention & Besoins
- **Cr√©ation en un clic (Zero-Click)** : D√©crivez une situation ("R√©union d'√©quipe la semaine prochaine") et Gemini construit la structure du sondage.
  - *Logique* : `GeminiIntentService.ts` classifie l'intention en `CREATE_POLL`, `REQUEST_FEEDBACK` ou `UPDATE_SETTINGS`.
  - *Validation* : `useIntentDetection.test.ts`.
- **Entr√©es "Vision" Multimodales** :
  - **Photo-vers-Sondage** : Extrait les dates et options √† partir de photos de plannings manuscrits ou imprim√©s.
  - **Fichier-vers-Formulaire** : Analyse les fichiers PDF et Docx pour extraire des structures de questionnaires complexes.
  - *Impl√©mentation* : `QuizzVisionService.ts`, `DirectGeminiService.ts`.
  - *V√©rification* : `ultra-simple-quizz.spec.ts`.

### 2.2 Post-traitement Intelligent
*DooDates applique des r√®gles m√©tier sur les suggestions de l'IA pour √©viter les hallucinations.*
- **Respect Contextuel des Dur√©es** :
  - "Stand-up" / "Express" ‚Üí Fix√© automatiquement √† 30 min.
  - "R√©union d'√©quipe" ‚Üí Minimum 60 min.
- **Optimisation des Cr√©neaux** :
  - "D√©jeuner lundi" ‚Üí Force un seul cr√©neau pertinent (12:00-13:30) plut√¥t qu'une liste.
  - "Session de travail semaine prochaine" ‚Üí Sugg√®re 3 cr√©neaux diversifi√©s (matin/apr√®s-midi/soir√©e).
  - *Logique* : `GeminiSuggestionPostProcessor.ts`.

### 2.3 Interaction Vocale & Naturelle
- **Cr√©ation Mains-Libres** : STT (Speech-to-Text) en temps r√©el pour dicter les besoins des sondages.
  - *Logique* : `useVoiceRecognition.ts` avec fallback natif navigateur et cloud.

---

## 3. üìÖ Moteur de Dates & Disponibilit√©s
*Planification professionnelle avec algorithme de "Matchmaking".*

### 3.1 Logique de Matchmaking Avanc√©e
*Le syst√®me calcule un "Success Score" (0-100) pour chaque cr√©neau propos√©.*
- **Remplissage de Gaps (+30 pts)** : Priorise les cr√©neaux qui comblent les petits vides entre les r√©unions existantes.
- **Bonus de Proximit√© (+20 pts)** : Priorise les cr√©neaux dans les prochaines 48-72 heures.
- **Concentration par Demi-journ√©e (+25 pts)** : Favorise le regroupement de sessions intensives (ex: 3 r√©unions le m√™me apr√®s-midi).
- **Fen√™tres Pr√©f√©r√©es (+10 pts)** : S'aligne sur les "Heures Pr√©f√©r√©es" d√©finies par l'utilisateur.
  - *Logique* : `schedulingOptimizer.ts`.

### 3.2 Interactions Professionnelles
- **D√©tection de Conflits Calendrier** : Vue en temps r√©el de vos √©v√©nements **Google Calendar** pendant la cr√©ation.
  - *Impl√©mentation* : `calendarConflictDetection.ts`, `google-calendar.ts`.
- **S√©lection "Oui/Non/Si besoin"** : Vote de disponibilit√© nuanc√© pour les participants.
- **Vues Verticale vs Grille** : Toggle de calendrier responsive optimis√© pour mobile.

---

## 4. üìù Moteur de Formulaires & Recherche
*Moteurs √† haute conversion pour la collecte de donn√©es et le feedback.*

### 4.1 Polyvalence des Champs
- **Questions Matricielles** : structures ligne-colonne pour les pr√©f√©rences complexes.
- **√âvaluations & NPS** : √âchelles 1-10 int√©gr√©es avec feedback visuel.
- **Validation Email & T√©l√©phone** : V√©rification en temps r√©el pour garantir la qualit√© des donn√©es.
  - *Logique* : `form-polls-service.ts`, `validation.ts`.

### 4.2 Logique Conditionnelle Dynamique
- **Questions √† branchement** : Affiche ou masque des questions en fonction des r√©ponses pr√©c√©dentes.
  - **Op√©rateurs support√©s** : `equals`, `contains`, `notEquals`, `isEmpty`, `isNotEmpty`.
  - *Logique* : `conditionalEvaluator.ts`, `conditionalValidator.ts`.
  - *V√©rification* : `conditional-logic.spec.ts`.

### 4.3 Confirmation Participant
- **"Copie de votre vote"** : Confirmation automatique par email avec un r√©sum√© de leurs donn√©es.
  - *Logique* : `EmailService.ts` utilisant les Edge Functions Supabase.

---

## 5. üéì Aide aux Devoirs (IA Quiz)
*Parcours d'apprentissage pilot√©s par les mod√®les √©ducatifs de Gemini.*

### 5.1 G√©n√©ration de Contenu & Cycle de Vie
- **Logique par Niveau** : Gemini ajuste le vocabulaire des questions selon le niveau scolaire (CE1, 6√®me, Terminale).
- **Moteur de Gamification** :
  - **Badges bas√©s sur le score** : "Expert", "Apprenti", etc.
  - **Feedback Visuel** : Confettis sur les scores 100%, sons de succ√®s.
  - *Logique* : `quizz-service.ts`.

### 5.2 Syst√®me de Notation IA
- **R√©ponses Ouvertes Intelligentes** : Gemini √©value les r√©ponses textuelles bas√©es sur la "correspondance conceptuelle" plut√¥t que sur une simple cha√Æne de caract√®res.
  - *Logique* : `QuizzVisionService.ts` (type text-ai).
  - *V√©rification* : `quizz.feature.spec.ts`.

---

## 6. üîí S√©curit√©, Conformit√© & RGPD
*Infrastructure "Privacy-by-Design" pour une confiance professionnelle.*

### 6.1 Gouvernance des Donn√©es
- **Politiques de R√©tention Granulaires** :
  - **Persistance Chat** : 30 jours (Privacy-First) √† Ind√©fini.
  - **Donn√©es Sondages** : 1 an (Standard) √† 6 ans (Archive).
  - *Logique* : `DataRetentionService.ts`.
- **Droit √† l'Oubli (Art. 17)** : Suppression de compte automatis√©e avec purge imm√©diate des donn√©es.
  - *V√©rification* : `account-deletion.spec.ts`.
- **Portabilit√© des Donn√©es (Art. 20)** : Exportation en un clic de toutes les donn√©es utilisateur au format JSON.
  - *V√©rification* : `data-export.spec.ts`.

### 6.2 Protection de l'Infrastructure
- **Limitation de D√©bit Hybride (Rate Limiting)** : Combinaison de `AiQuotaService.ts` c√¥t√© client et de fonctions PostgreSQL c√¥t√© serveur.
  - *Validation* : `rate-limiter.test.ts`.
- **Anonymisation d'IP** : Hachage s√©curis√© SHA-256 des IPs des participants dans les logs de consentement.
  - *Logique* : `consent-logger.ts`.

---

## 7. üåç Capacit√©s Globales & R√©gionales
- **Tarification Multi-R√©gions** : Ajustements dynamiques de prix et de devise bas√©s sur la d√©tection du `countryCode`.
  - *Logique* : `pricing-service.ts`.
- **Interface Multilingue** : Support natif pour le **Fran√ßais**, **Anglais**, **Allemand** et **Hindi**.
- **Syst√®me d'Acc√®s Beta** : Syst√®me de cl√©s d'invitation avec mapping des tiers de cr√©dits.
  - *Logique* : `BetaKeyService.ts`.

---

## 8. üõ°Ô∏è M√©thodologie d'Audit & Assurance Qualit√©
Pour maintenir une parit√© de 100% entre le catalogue et le code :
1. **Analyse de Source R√©cursive** : Scan profond de `src/` pour identifier les types et services.
2. **Extraction de Logique** : Distillation des scores algorithmiques et du post-traitement des fichiers d'impl√©mentation.
3. **Mapping E2E** : Mapping manuel des fichiers `spec.ts` de Playwright aux exigences fonctionnelles.
4. **Benchmarking de Performance** : Suivi via `PerformanceMonitor.ts` sur 100% du trafic de production.

---
*Derni√®re mise √† jour : 22 d√©cembre 2025*
*G√©n√©r√© par Gemini Conductor - Track : exhaustive-deep-audit*

## 9. üß≠ Structure Publique & Navigation (D√©couverte IA)
*Cartographie de la surface publique d√©tect√©e par l'agent de d√©couverte autonome.*

### 9.1 Point d'Entr√©e & Landing
- **Produits Principaux** : Liens directs d√©tect√©s vers les modules cl√©s.
  - *Sondages de Dates* : Planification d'√©v√©nements.
  - *Formulaires* : Collecte de donn√©es structur√©es.
  - *Disponibilit√©s* : Partage de cr√©neaux.
  - *Quizz* : Outils √©ducatifs gamifi√©s.

### 9.2 Conformit√© & Support (Footer)
- **Liens L√©gaux** :
  - *CGU / Confidentialit√© / S√©curit√©* : Pages statiques de conformit√© accessibles globalement.
- **Support Utilisateur** :
  - *Contact / √Ä propos / Support* : Points de contact identifi√©s.
  - *Source* : `feature-catalog-2025-12-22T22-14-14.json` (D√©couverte Automatique).
