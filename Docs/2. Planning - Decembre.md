# üöÄ DOODATES - PLANNING LANCEMENT D√âTAILL√â
***

## NOUVELLES IDEES
  ### HIGH
  ### MEDIUM
  ### LOW

## üìã OBJECTIF STRAT√âGIQUE

**üéØ Deadline Lancement :** Janvier 2026  
**üë• Objectif :** Lancer 4 produits   
**üåè Vision :** Architecture internationale "privacy-by-design" et "security-by-design"

---

## PLAN D'EX√âCUTION - 3H/JOUR (2H + 1H TRAVAIL DE FOND)

### üìå MERCREDI 10 D√âCEMBRE - JOUR 8

  - [ ] **Tester √† la main les favories**
          - [ ] Verification
            - [ ] Verify database changes
            - [ ] Verify API endpoints
            - [ ] Verify UI interactions

      - [ ] Jouer tous les tests e2e

  ### ‚úÖ BLOC PRODUIT ‚Äì Tests finaux 4 workflows (avant lancement)

    - **Objectif :** v√©rifier que les 4 produits sont utilisables de bout en bout sur desktop + mobile.

    - **Tests manuels communs**
      - [ ] Pour chaque produit, tester : Cr√©ation (IA + manuel) ‚Üí partage (lien) ‚Üí vote/remplissage ‚Üí r√©sultats/exports
      - [ ] V√©rifier navigation depuis le Dashboard (ouvrir, reprendre, supprimer) sans incoh√©rences
      - [ ] Contr√¥ler l‚Äôabsence d‚Äôerreurs console critiques sur les pages essentielles

    - **Produit 1 ‚Äì Sondages de dates**
      - [ ] Cr√©er un sondage simple + un sondage avec beaucoup de dates (desktop + mobile)
      - [ ] V√©rifier la navigation calendrier vers le pass√© (en lien avec le bug d√©j√† not√©)

    - **Produit 2 ‚Äì Form Polls**
      - [ ] Cr√©er un formulaire simple + un formulaire long, tester le vote complet
      - [ ] V√©rifier acc√®s aux r√©sultats + exports basiques

    - **Produit 3 ‚Äì Availability**
      - [ ] Cr√©er un sondage de dispo, partager et remplir sur mobile
      - [ ] V√©rifier que l‚Äôexp√©rience reste lisible (th√®me / layout) malgr√© les diff√©rences actuelles

    - **Produit 4 ‚Äì Quizz**
      - [ ] Cr√©er un quizz texte + un quizz √† partir d‚Äôune image
      - [ ] Tester un vote complet (score, confettis, partage du lien)

  #### üîú √Ä planifier sur d‚Äôautres cr√©neaux

    **Id√©e d‚Äôautomatisation (plus tard)**
        - [ ] Lister pr√©cis√©ment les concurrents √† suivre (Google Forms Enterprise, Asana, Calendly, + autres si besoin) dans un fichier unique (`Docs/monitoring/produits-suivis.md`).
        - [ ] Mettre en place une veille automatis√©e simple (RSS / newsletters / changelogs officiels) et centraliser les liens.
        - [ ] Cr√©er un petit script ou agent (ex. script Node + IA) qui, une fois par mois, r√©cup√®re les notes de version et g√©n√®re un r√©sum√© structur√© :
              - Nouveaut√©s par produit.
              - Impacts possibles pour DooDates (id√©es √† copier / diff√©renciateurs).
        - [ ] Ajouter dans le planning mensuel un cr√©neau r√©current ¬´¬†Revue concurrents auto-g√©n√©r√©e¬†¬ª pour lire le r√©sum√© et d√©cider des actions (copier/am√©liorer/ignorer).

    - [x] **BLOC RGPD - 4 PRODUITS**
    - **Produit 4 ‚Äì Chat IA (Gemini / cr√©ation-modification via IA)**
    - [x] Ajouter dans l'interface du chat un encart expliquant que les messages peuvent contenir des donn√©es personnelles et passent par un fournisseur IA tiers
    - [x] V√©rifier la configuration du provider IA (d√©sactiver l'usage des donn√©es pour l'entra√Ænement si possible)
    - [ ] Documenter dans la Politique de confidentialit√© le r√¥le du fournisseur IA (sous-traitant, transferts hors UE, dur√©e de conservation)
    - [ ] D√©finir si les logs de conversations sont utilis√©s pour am√©liorer le produit et, le cas √©ch√©ant, anonymiser + pr√©voir opt‚Äëout

    - [x] **Test anonymisation Form Polls**
          - [x] Cr√©er un Form Poll avec plusieurs r√©ponses (nom + email visibles dans les r√©sultats)
          - [x] Depuis la page "R√©sultats" du formulaire, cliquer sur "Anonymiser les r√©ponses"
          - [x] V√©rifier que les noms/emails disparaissent (affich√©s comme "Anonyme") tout en conservant les statistiques et exports
    - [ ] Finir avec un audit total pour etre sur que tout est fait pour respecter les RGPD et documenter pour moi comment cela va marcher et si je devrais quoi que ce soit ou si tout est bien automatis√©.
      

    - [ ] **HARMONISATION DESIGN - Incoh√©rences visuelles entre produits** (12h) üé®
      
      **üìã Analyses compl√®tes (d√©tails des 10 incoh√©rences) :**
      - [Docs/ARCHITECTURE/2025-12-08-ANALYSE-DIFFERENCES-VISUELLES-PRODUITS.md](cci:7://file:///c:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-testing/Docs/ARCHITECTURE/2025-12-08-ANALYSE-DIFFERENCES-VISUELLES-PRODUITS.md:0:0-0:0)
      - [Docs/ARCHITECTURE/2025-12-08-ANALYSE-COMPLETE-INCOHERENCES.md](cci:7://file:///c:/Users/Julien%20Fritsch/Documents/GitHub/DooDates-testing/Docs/ARCHITECTURE/2025-12-08-ANALYSE-COMPLETE-INCOHERENCES.md:0:0-0:0)

    - [ ] **Security headers & rate limiting UI**
      - [ ] Indicateur visuel rate limiting atteint
      - [ ] Messages erreur s√©curit√© clairs
      - [ ] Tests UX limites quotas d√©pass√©s

    **Analytics IA DatePolls**
    - [ ] Adapter PollAnalyticsService pour dates (2h)
      - [ ] Adapter algorithmes consensus pour dates
      - [ ] Calculer conflits horaires automatiquement
      - [ ] G√©n√©rer insights "Meilleure date ?"
      - Insights consensus/conflits automatiques (1h)
        - [ ] D√©tection automatique des conflits
        - [ ] Suggestions de dates alternatives
        - [ ] Visualisation heatmap disponibilit√©
      - UI panneau analytics (1h)
        - [ ] Composant `DateAnalyticsPanel.tsx`
        - [ ] Graphiques consensus/conflits
        - [ ] Export suggestions PDF

  ## üí∞ QUOTAS & PRICING 

  ### üéØ Mod√®le √©conomique & plans (√† finaliser pour lancement)

  **R√©f√©rences :**
  - `Docs/OLD/2025-First-Idea-DooDates.md` (plan historique GRATUIT / PRO / PREMIUM, paiement unique)
  - `Docs/INTERNATIONAL/2025-International-Pricing-Architecture.md` (price lists, g√©ographie, Lemon Squeezy)
  - `Docs/INTERNATIONAL/2025-International-Launch-Strategy.md` (freemium global, Free / Starter / Premium / Pro)
  - `src/pages/Pricing.tsx` (page tarifs actuelle, plans Free / Premium / Pro, TODO checkout)

  **Positionnement initial (id√©e 2025) :**
  - Interface ultra-moderne avec micro-animations et UX fluide
  - Paiement unique au lieu d'abonnements r√©currents (diff√©renciateur cl√©)
  - IA conversationnelle pour cr√©ation automatique de sondages
  - Ciblage individus/freelances plut√¥t qu'entreprises

  **Plan √©conomique historique (MVP) :**
  - GRATUIT : 3 sondages, fonctionnalit√©s basiques, 30 jours
  - PRO (15‚Ç¨) : ~100 sondages, calendrier, personnalisation
  - PREMIUM (25‚Ç¨) : ~500 sondages, tout PRO + Assistant IA

  **√âvolution actuelle (docs internationales) :**
  - Freemium permanent g√©n√©reux (Free) pour maximiser l'adoption
  - Starter (achat unique) pour lever la barri√®re psychologique des abonnements
  - Premium / Pro en abonnement mensuel ou annuel pour les usages r√©guliers / pros
  - Gestion des prix par r√©gion via `price_lists` + d√©tection g√©ographique (d√©j√† impl√©ment√©)

  **D√©cisions √† trancher pour Janvier (Go Live 4 produits) :**
  - [ ] Valider le mod√®le final :
  - [ ] Free (permanent, quotas IA limit√©s, export gratuit)
  - [ ] Starter one-shot (cr√©dits IA lifetime ou gros pack limit√©)
  - [ ] Premium / Pro (abonnements) align√©s avec `Pricing.tsx` et la strat√©gie internationale
  - [ ] D√©cider d√©finitivement du Merchant of Record (Lemon Squeezy vs alternatives) en suivant `INTERNATIONAL-PRICING-ARCHITECTURE.md`
  - [ ] Cartographier pr√©cis√©ment chaque plan ‚Üî quotas (`POLL_TYPE_QUOTAS`, cr√©dits IA, limites par produit)
  - [ ] Mettre √† jour `Pricing.tsx` pour remplacer le TODO `handleUpgrade()` par un vrai checkout (Lemon Squeezy / MoR choisi)
  - [ ] Documenter le mod√®le √©conomique final dans une section d√©di√©e (site + docs), en gardant trace du diff√©renciateur "paiement simple / transparent"

  #### üß≠ Plan d‚Äôimpl√©mentation paiements (MoR + Pricing)

  **√âtape 1 ‚Äì D√©cision Merchant of Record (1/2 journ√©e)**
  - [ ] Relire la comparaison d√©taill√©e dans `INTERNATIONAL-Launch-Strategy.md` (Lemon Squeezy / Paddle / Nexway)
  - [ ] Trancher : choisir officiellement un MoR (par d√©faut Lemon Squeezy tant qu‚Äôaucun blocage identifi√©)
  - [ ] Cr√©er le compte + r√©cup√©rer les identifiants (store id, variants, webhook secret)

  **√âtape 2 ‚Äì Mapping plans ‚Üî produits/prix (1/2 journ√©e)**
  - [ ] D√©finir la table finale des plans : Free / Starter one-shot / Premium / Pro (mensuel/annuel)
  - [ ] Aligner chaque plan avec : `product.code` Supabase, `price_list`, `lemonsqueezy_variant_id`
  - [ ] V√©rifier coh√©rence avec la page `Pricing.tsx` (noms, descriptions, quotas IA, sondages)

  **√âtape 3 ‚Äì Int√©gration checkout (1 journ√©e)**
  - [ ] Impl√©menter `lib/payments/lemonsqueezy.ts` (ou √©quivalent) en suivant `INTERNATIONAL-PRICING-ARCHITECTURE.md`
  - [ ] Brancher `handleUpgrade()` dans `Pricing.tsx` sur ce service (plus de `alert()` demo)
  - [ ] G√©rer le retour apr√®s paiement (succ√®s / √©chec) avec redirection vers Dashboard + message clair

  **√âtape 4 ‚Äì Webhook & activation des plans (1 journ√©e)**
  - [ ] Cr√©er l‚ÄôEdge Function webhook (ex. `lemonsqueezy-webhook`) qui re√ßoit les √©v√©nements paiement
  - [ ] Mapper les `variant_id` vers `plan_type` + cr√©dits IA initiaux
  - [ ] Mettre √† jour la ligne utilisateur (plan, cr√©dits, dates) de fa√ßon idempotente
  - [ ] Logger les transactions dans une table d√©di√©e (`transactions`)

  **√âtape 5 ‚Äì Tests & garde-fous (1/2 journ√©e)**
  - [ ] Tester tout le flow : clic Pricing ‚Üí MoR ‚Üí retour app ‚Üí plan activ√©
  - [ ] V√©rifier que les quotas IA / sondages refl√®tent bien le plan actif
  - [ ] Ajouter un feature flag pour pouvoir d√©sactiver temporairement le checkout si besoin

  **R√©sultat attendu :** en Janvier, m√™me si l‚Äôactivation publique des paiements est progressive, toute la cha√Æne technique (mod√®le √©conomique, plans, MoR, Pricing, quotas) est pr√™te et test√©e.

  #### üß™ Exp√©rimentation fin d√©cembre ‚Äì Interrogation orale Quizz

  **R√©f√©rence d√©taill√©e :** `Docs/PRODUCT-Quizz-Interrogation-Orale.md`

  **Objectif :** Valider en interne le mode d‚Äôinterrogation orale sur un quizz existant, et connecter l‚Äôexp√©rience aux cr√©dits IA sans ouvrir encore au public.

  **Scope MVP (fin d√©cembre, si temps disponible) :**

  - [ ] POC technique dans une page interne :
    - [ ] Lecture des questions par TTS navigateur (Web Speech API)
    - [ ] R√©ponse orale transcrite (STT navigateur ou √©quivalent simple)
    - [ ] √âvaluation de la r√©ponse via Gemini (correct / partiel / faux + explication courte)

  - [ ] Branchement sur un quizz existant (QuizzCreate/QuizzApp) avec un bouton "Interrogation orale" cach√©/exp√©rimental

  - [ ] Premier branchement logique avec les cr√©dits IA :
    - [ ] D√©cr√©menter un compteur de test (table interne) par question ou par session
    - [ ] V√©rifier que le co√ªt r√©el API reste coh√©rent avec l‚Äôexemple marge dans le doc produit

  - [ ] Rep√©r√© dans le code : Des outils quelle Factorisation et simplification de la maintenance du code

  - [ ] V√©rifier: Quand on reprend depuis le dashboard, on ne voit pas les discussions pass√©es et on ne voit pas le sondage non plus.
  
  -------------------------------------------------------------
  ### üîí S√©curisation Quotas & Protection Anti-Abus

  **Mini‚Äëplanning rate limiting restant :**
  - [x] Cr√©er fonction SQL `can_consume_rate_limit(p_user_id, p_ip, p_action, p_limit_per_hour)`
  - [x] Int√©grer l‚Äôappel √† cette fonction dans l‚ÄôEdge Function `quota-tracking` avant `consume_quota_credits`
  - [x] Renvoyer `HTTP 429` + message clair si limite horaire d√©pass√©e
  - [x] Adapter `SecureGeminiService` pour afficher un message explicite de limite horaire atteinte
  - [x] Ajouter tests **unitaires** SecureGeminiService pour le mapping RATE_LIMIT ‚Üí message UI
  - [ ] Ajouter tests **E2E / load** (Playwright) pour v√©rifier blocage apr√®s X requ√™tes / heure (Edge `quota-tracking`)

  **Phase 4 : Monitoring (2h)** üîÑ PARTIEL
  - [x] Logs audit complets dans l‚ÄôEdge Function (requestId, timestamps, actions, erreurs)
  - [x] Scripts SQL / Edge Function `send-quota-report` pour reporting
  - [ ] Cr√©er un mini dashboard interne (page admin) listant les usages/quotas les plus √©lev√©s
  - [ ] Ajouter alertes anomalies (email / webhook) si un seuil est d√©pass√© (ex. > 50 cr√©dits/heure)

  **Tests :**
  - [x] Tentative bypass localStorage (doit √©chouer) - ‚úÖ V√©rifi√© c√¥t√© serveur
  - [x] Tentative extraction cl√© API (doit √™tre impossible) - ‚úÖ Cl√© c√¥t√© serveur uniquement (mode Edge)
  - [x] Tests unitaires rate limiting (SecureGeminiService, mapping RATE_LIMIT ‚Üí `RATE_LIMIT_EXCEEDED`)
  - [ ] Tests E2E rate limiting temporel (Playwright, blocage apr√®s limite horaire c√¥t√© UI)
  - [x] Test consommation atomique (pas de race condition) - ‚úÖ FOR UPDATE / RPC en DB

  **Tests E2E restants (2h) - **STABILIT√â** üõ°Ô∏è
    - [ ] R√©parer `end-to-end-with-backend.spec.ts`
    - [ ] R√©activer `ultra-simple-form.spec.ts`
    - [ ] Diagnostic h1 page vote

  **Corrections**
      - [ ] Tests manuels corrections UX
      - [ ] Validation UX post-publication
      - [ ] Tests parsing Gemini
      - [ ] En case de regroupement, cacher et interdire de d√©finir des horaires et griser le bouton
      - [ ] Regroupement visuel des dates ne fonctionne pas sur mobile (fond bleu continu)

  - [ ] **Sondage disponibilit√©** : Exiger un compte utilisateur (s√©curit√© + tra√ßabilit√©)
  
  #### Sections de questions (1-2h) ‚è≥ EN DISCUSSION

  **Concept :** Permettre de grouper les questions par th√®mes/sections pour am√©liorer la lisibilit√©.

  **Approche propos√©e : Sections int√©gr√©es dans la liste**
  - Au lieu de Q1, Q2, Q3... ‚Üí S1 (Section 1), Q1, Q2, S2 (Section 2), Q3...
  - Type `FormItem = FormQuestion | FormSection`
  - Boutons "Ajouter question" et "Ajouter section" dans la m√™me liste
  - Sections = cards visuelles avec fond diff√©rent + ic√¥ne

  **Exemple visuel :**
  ```
  üìã S1. Informations personnelles
      Vos coordonn√©es de base

  Q1. Nom
  Q2. Email

  üí≠ S2. Feedback
      Votre avis sur notre service

  Q3. Satisfaction (1-5)
  Q4. Commentaires
  ```

  **Impl√©mentation (1-2h) :**
  - [ ] Ajouter type `FormSection` dans `pollStorage.ts`
  - [ ] Modifier `FormEditor` pour supporter sections + questions
  - [ ] UI : Boutons "Ajouter question" / "Ajouter section"
  - [ ] Rendu visuel : Cards sections avec style distinct
  - [ ] Mode classique : Sections = s√©parateurs visuels
  - [ ] Mode multi-step : Afficher titre section au-dessus de la question

  **Avantages :**
  - ‚úÖ Simple et flexible
  - ‚úÖ Am√©liore lisibilit√© formulaires longs
  - ‚úÖ Pas de refonte majeure
  - ‚úÖ Compatible avec modes classique ET multi-step

  **Statut :** ‚è≥ EN DISCUSSION - Attente d√©cision utilisateur

  #### Acc√®s aux r√©sultats FormPoll + Email confirmation (6h30)

  **Probl√®me actuel :**
  - ‚ùå Bouton "Voir les r√©sultats" affich√© mais acc√®s refus√© (frustrant)
  - ‚ùå Pas de contr√¥le pour le cr√©ateur sur qui peut voir les r√©sultats
  - ‚ùå Pas de copie des r√©ponses par email pour le votant

  **Solution :** Voir documentation utilisateur `USER-DOCUMENTATION/04-Formulaires-Questionnaires.md` et `USER-DOCUMENTATION/06-Gestion-Resultats.md`.

  **1. Visibilit√© des r√©sultats (2h30)**
  - [ ] Ajouter champ `resultsVisibility` dans interface `Poll` (3 modes : creator-only, voters, public)
  - [ ] Cr√©er UI radio buttons dans `FormPollCreator.tsx` pour choisir la visibilit√©
  - [ ] Impl√©menter helpers `getCurrentUserId()` et `checkIfUserHasVoted()`
  - [ ] Ajouter contr√¥le d'acc√®s dans `FormPollResults.tsx` (v√©rifier permissions)
  - [ ] Modifier √©cran post-vote pour afficher bouton conditionnel "Voir les r√©sultats"
  - [ ] Afficher message explicatif si acc√®s refus√©

  **2. Email de confirmation (3h)**
  - [ ] Ajouter champ `respondentEmail` dans interface `FormResponse`
  - [ ] Cr√©er checkbox "Recevoir une copie par email" dans `FormPollVote.tsx`
  - [ ] Ajouter input email conditionnel (visible si checkbox coch√©e)
  - [ ] Modifier `addFormResponse()` pour stocker l'email
  - [ ] Cr√©er service `EmailService.ts` avec fonction `sendVoteConfirmationEmail()`
  - [ ] Cr√©er template HTML email avec r√©capitulatif des r√©ponses
  - [ ] Int√©grer appel service apr√®s soumission (console.log MVP, Resend API en Phase 2)

  **3. Tests manuels (1h)**
  - [ ] Tester mode "creator-only" : V√©rifier acc√®s refus√© pour non-cr√©ateur
  - [ ] Tester mode "voters" : Voter puis v√©rifier acc√®s autoris√© aux r√©sultats
  - [ ] Tester mode "public" : V√©rifier acc√®s sans voter
  - [ ] Tester email : Voter avec email et v√©rifier console.log
  - [ ] V√©rifier UX compl√®te : Vote ‚Üí Email ‚Üí R√©sultats

  **Fichiers modifi√©s :**
  - `src/lib/pollStorage.ts` - Types + helpers
  - `src/components/polls/FormPollCreator.tsx` - UI visibilit√©
  - `src/components/polls/FormPollResults.tsx` - Contr√¥le d'acc√®s
  - `src/components/polls/FormPollVote.tsx` - Email + bouton conditionnel
  - `src/services/EmailService.ts` - Service email (nouveau fichier)

  **Impact utilisateur :**
  - ‚úÖ Transparence : Le cr√©ateur contr√¥le la visibilit√©
  - ‚úÖ Confiance : Le votant re√ßoit ses r√©ponses par email
  - ‚úÖ Pas de frustration : Bouton "Voir r√©sultats" fonctionne correctement

### üìå JEUDI 11 D√âCEMBRE - JOUR 9

#### üéØ Focus 3h (aujourd'hui)


  - [ ] **UX Am√©liorations - Session 1 : Feedback visuel & Animations** (2h) üîÑ EN COURS
        - [ ] Animation ajout question (fade-in + slide-down + highlight vert 2s)
        - [ ] Animation suppression question (slide-up + fade-out + toast undo 5s)
        - [ ] Animation modification (pulse effect + badge "Modifi√©" 3s)
        - [ ] Toast am√©lior√©s (icons selon action, couleurs, position bottom-right)

  **Refactor PollCreator Hook** (2h) - **REFACTOR** ‚≠ê
  - [ ] Extraire usePollCreatorState (500 lignes)
  - [ ] R√©duire PollCreator de 1650 ‚Üí 1150 lignes
  - [ ] Tests validation refactor imm√©diate
  - [ ] Branch Git isol√©e pour rollback facile

  **Google Calendar - Documentation**
  - [ ] Documenter comportements attendus vs observ√©s
  - [ ] Am√©liorer affichage conflits utilisateur
  - [ ] Cas d'usage avanc√©s

  **Fingerprinting - Tests approfondis**
  - [ ] Tests multiples fingerprints diff√©rents
  - [ ] Validation acc√®s non-admin ("Access Denied")
  - [ ] Tests formatage dates et badges confidence

  #### Param√®tres Avanc√©s des Formulaires (POST BETA) (8-10h)

  **Fonctionnalit√©s pr√©vues mais non impl√©ment√©es :**

  **Param√®tres de Base :**
  - [ ] Personnalisation titre et description
  - [ ] Option afficher/masquer logo DooDates
  - [ ] Option afficher temps estim√© de compl√©tion
  - [ ] Option afficher nombre de questions

  **Param√®tres Avanc√©s :**
  - [ ] Autoriser r√©ponses anonymes (toggle)
  - [ ] Connexion requise (compte Google) pour voter
  - [ ] Une seule r√©ponse par personne (cookie)
  - [ ] Autoriser modification apr√®s soumission
  - [ ] Deadline configurable (date/heure)
  - [ ] Limite nombre de r√©ponses (illimit√© ou max)

  **Email confirmation :**
  - [ ] Checkbox "Recevoir une copie par email"
  - [ ] Input email conditionnel (visible si checkbox)
  - [ ] Envoi email avec r√©capitulatif des r√©ponses

  **Visibilit√© des R√©sultats :**
  - [ ] Mode "Cr√©ateur uniquement"
  - [ ] Mode "Participants apr√®s vote"
  - [ ] Mode "Public (tout le monde)"
  - [ ] UI radio buttons pour choisir la visibilit√©
  - [ ] Contr√¥le d'acc√®s dans page r√©sultats

### üìå VENDREDI 12 D√âCEMBRE - JOUR 10

#### üéØ Focus 3h (aujourd'hui)

  - [ ] **UX Am√©liorations - Session 2 : Suggestions intelligentes** (3h) üîÑ PR√âVU
        - [ ] D√©tection contexte (poll vide ‚Üí "üí° Commence par ajouter une question")
        - [ ] Affichage suggestions (bulles cliquables, style diff√©rent des messages)
        - [ ] Suggestions dynamiques (apr√®s ajout question ‚Üí "Veux-tu ajouter des options ?")

  **D√âPLOIEMENT EN PRODUCTION**
  - [ ] D√©ploiement progressif
  - [ ] Monitoring des erreurs
  - [ ] Support utilisateur

### SEMAINE 3 : STABILIT√â + REFACTOR CIBL√âS

### üìå LUNDI 15 D√âCEMBRE - JOUR 11

#### üéØ Focus 3h (aujourd'hui)

  - [ ] **UX Am√©liorations - Session 3 : Undo/Redo** (3h) üîÑ PR√âVU
        - [ ] Historique des √©tats (stack des 20 derniers √©tats du poll)
        - [ ] Actions Undo/Redo (boutons + raccourcis Ctrl+Z / Ctrl+Y)
        - [ ] Feedback utilisateur (toast "Action annul√©e" + compteur actions)

  - [ ] Documentation utilisateur
  - [ ] Page "Transparence & Impact"
  - [ ] Configuration Supabase production
  - [ ] Documentation S√©curit√© & RGPD

  **Consolidation Tests E2E**
    - [ ] Pr√©paration lancement
    - [ ] Checklist lancement
    - [ ] Tests finaux

  ### Tests Performance Automatis√©s (8-12h)

  **D√©clencheur:** Apr√®s mise √† jour pre-prod

  **Objectif:** Impl√©menter des tests de performance automatis√©s avec m√©triques pr√©cises pour d√©tecter les r√©gressions et garantir la scalabilit√©.

  **Contexte:** 
  - Les tests actuels (60-65) v√©rifient la stabilit√© mais pas les m√©triques pr√©cises. 
  - Phase d'impl√©mentation de tests automatis√©s avec seuils mesurables.

  #### 1. Lighthouse CI Integration (4-6h)

  - [ ] Setup Lighthouse CI dans GitHub Actions
  - [ ] Configuration thresholds (Performance > 90, LCP < 2.5s, FID < 100ms)
  - [ ] **Workflow :** `.github/workflows/lighthouse.yml` (nouveau)
    - [ ] Ex√©cution sur schedule (quotidien, ex: 3h du matin UTC)
    - [ ] Ex√©cution manuelle possible via `workflow_dispatch`
    - [ ] Pas d'ex√©cution sur PR (√©vite ralentir les validations)
    - [ ] Cr√©ation issue GitHub si r√©gression > 10%
  - [ ] Dashboard avec historique des m√©triques
  - [ ] Alertes Slack/Email en cas de r√©gression

  #### 2. Tests Performance E2E avec M√©triques (4-6h)

  - [ ] **Workflow :** `6-nightly-regression.yml` (job d√©di√© `e2e-performance`)
    - [ ] Ex√©cution nocturne (2h du matin UTC, m√™me schedule que regression)
    - [ ] Tests tr√®s longs (10-15 min) ‚Üí mieux dans workflow nightly
    - [ ] Ex√©cution manuelle possible via `workflow_dispatch`
    - [ ] Cr√©ation issue GitHub si r√©gression > 20%
  - [ ] Utiliser `performance-measurement.ts` existant dans les tests E2E
  - [ ] Test 61 am√©lior√© : Mesurer temps chargement dashboard avec 50+ conversations
    - Seuil : < 2s pour 50 conversations, < 5s pour 200 conversations
    - Mesurer LCP (Largest Contentful Paint), FCP (First Contentful Paint)
  - [ ] Test 62 am√©lior√© : Mesurer temps ouverture menu tags avec 20+ tags
    - Seuil : < 500ms pour ouverture menu
    - Mesurer temps de scroll et frame rate
  - [ ] Test 63 am√©lior√© : Mesurer temps ouverture menu dossiers avec 20+ dossiers
    - Seuil : < 500ms pour ouverture menu
    - Mesurer temps de scroll et frame rate
  - [ ] Tests de charge progressifs : 10, 50, 100, 200 conversations
  - [ ] G√©n√©ration de rapports de performance (JSON/HTML)

  #### 3. Web Vitals Monitoring (2-3h)

  - [ ] Int√©gration Web Vitals API dans l'app
  - [ ] Envoi m√©triques vers Supabase/Analytics
  - [ ] Dashboard monitoring temps r√©el (p50, p75, p95)
  - [ ] Alertes si d√©gradation > 20% sur 7 jours
  - [ ] **Note :** Monitoring en production uniquement (pas de workflow CI)

  **Fichiers √† cr√©er/modifier :**
  - [ ] `tests/e2e/dashboard-performance.spec.ts` - Tests avec m√©triques pr√©cises
  - [ ] `.github/workflows/lighthouse.yml` - **Nouveau workflow Lighthouse CI (schedule quotidien)**
  - [ ] Modifier `.github/workflows/6-nightly-regression.yml` - Ajouter job `e2e-performance` (tests longs)
  - [ ] `src/lib/web-vitals-tracker.ts` - Tracking Web Vitals (production)
  - [ ] `src/lib/performance-benchmarks.ts` - Seuils et comparaisons

  **M√©triques cibles :**
  - **Dashboard chargement :** < 2s (50 conversations), < 5s (200 conversations)
  - **Lighthouse Performance :** > 90
  - **LCP (Largest Contentful Paint) :** < 2.5s
  - **FID (First Input Delay) :** < 100ms
  - **CLS (Cumulative Layout Shift) :** < 0.1
  - **Menu tags/dossiers :** < 500ms ouverture
  - **Scroll 60fps** : Frame rate stable lors du scroll

  **Outils recommand√©s :**
  - Lighthouse CI (GitHub Actions)
  - Playwright Performance API (`page.metrics()`)
  - Web Vitals library (Google)
  - Performance Observer API

  **Priorit√© :** üü° MOYENNE - Important pour scalabilit√© mais pas bloquant b√™ta  
  **Note :** Les tests de stabilit√© actuels (60-65) sont suffisants pour la b√™ta. Cette phase ajoute des m√©triques pr√©cises pour garantir performance √† l'√©chelle.

### üìå MARDI 16 D√âCEMBRE - JOUR 12

  **Tests Transverses** (2h + 1h)
  - [ ] Tests E2E cross-produits
  - [ ] Tests s√©curit√© multi-r√©gions
  - [ ] Tests conformit√© RGPD

### üìå MERCREDI 17 D√âCEMBRE - JOUR 13

  ### 5. D√©finir limites exactes des quotas
  **Fichier concern√© :**`src/constants/quotas.ts`

  **Valeurs actuelles (temporaires) :**
  ```typescript
  export const POLL_TYPE_QUOTAS = {
    ANONYMOUS: {
      DATE_POLLS: 5,           // ‚ö†Ô∏è √Ä d√©finir dans planning d√©cembre
      FORM_POLLS: 5,           // ‚ö†Ô∏è √Ä d√©finir dans planning d√©cembre
      QUIZZ: 5,                // ‚ö†Ô∏è √Ä d√©finir dans planning d√©cembre
      AVAILABILITY_POLLS: 5,   // ‚ö†Ô∏è √Ä d√©finir dans planning d√©cembre
    },
    AUTHENTICATED: {
      DATE_POLLS: 50,          // ‚ö†Ô∏è √Ä d√©finir dans planning d√©cembre
      FORM_POLLS: 50,          // ‚ö†Ô∏è √Ä d√©finir dans planning d√©cembre
      QUIZZ: 50,               // ‚ö†Ô∏è √Ä d√©finir dans planning d√©cembre
      AVAILABILITY_POLLS: 50,  // ‚ö†Ô∏è √Ä d√©finir dans planning d√©cembre
    },
  } as const;
  ```

  **√Ä faire dans le planning de janvier :**
  - [ ] D√©cider des limites exactes selon la strat√©gie produit
  - [ ] Mettre √† jour les constantes dans `src/constants/quotas.ts`
  - [ ] Mettre √† jour les limites dans `GUEST_LIMITS` (`src/lib/guestQuotaService.ts`)
  - [ ] Mettre √† jour les limites dans la fonction SQL `consume_quota_credits` (`sql-scripts/create-quota-tracking-table.sql`)

### üìå JEUDI 19 D√âCEMBRE - JOUR 14

  ### UI Pricing & Conversion (2 jours)

    **Page Pricing (`/pricing`):** ‚úÖ CR√â√â
    - [X] Composant `PricingPage.tsx`
    - [X] Toggle Monthly/Annual avec badge √©conomie
    - [X] 3 cards tiers (Gratuit, Premium, Pro)
    - [X] Section Beta Testeurs (comment rejoindre)
    - [X] Comparaison features (tableau)
    - [X] FAQ pricing (6 questions)
    - [X] CTA final "Commencer gratuitement"
    - [X] Responsive mobile + Dark mode
    - [X] Route `/pricing` configur√©e

    **Modal Upgrade in-app:**
    - [ ] Trigger automatique √† 100% quota
    - [ ] Afficher tier actuel + recommandation personnalis√©e
    - [ ] Boutons:
      - "Voir les plans" ‚Üí /pricing
      - "Acheter pack cr√©dits" ‚Üí Modal achat
      - "Plus tard" ‚Üí Fermer (re-trigger dans 7 jours)
    - [ ] Tracking analytics (ouverture, clics, conversion)

    **Packs cr√©dits (Phase 2 - apr√®s Stripe):**
    - [ ] Modal `CreditPackPurchase.tsx`
    - [ ] 3 packs (50/3‚Ç¨, 100/5‚Ç¨, 500/20‚Ç¨)
    - [ ] Integration Stripe Checkout
    - [ ] Confirmation email avec r√©cap
    - [ ] Ajout cr√©dits imm√©diat apr√®s paiement
    - [ ] Validit√© 6 mois (tracking expiration)

    **Int√©grations Avanc√©es (Options C & D):**

    **Option C: Conversion optimis√©e (30 min)** ‚≠ê RECOMMAND√â
    - [X] Sidebar: Bouton "Tarifs" apr√®s "Tableau de bord" ‚úÖ FAIT
    - [ ] Modal quota: Trigger automatique √† 80% et 100% des cr√©dits
    - [ ] Indicateur cr√©dits: Badge cliquable dans TopBar "42/100 ‚ö°"
      - Tooltip: D√©tails consommation (messages: 20, analytics: 15, simulations: 7)
      - Click ‚Üí Redirect `/pricing` avec anchor #upgrade
    - Fichiers: `QuotaIndicator.tsx`, `QuotaReachedModal.tsx`, `useCredits.ts`
    - Triggers: 80% cr√©dits (dismissible 7j), 100% cr√©dits (force), apr√®s 3 blocages

    **Option D: Compl√®te (1h)** - Nice to have
    - [ ] Dashboard card "Votre plan" (tier, usage, upgrade CTA)
    - [ ] Menu Settings: Section "Abonnement & Facturation"
    - [ ] Floating button: "Upgrade" si cr√©dits < 20%
    - [ ] Banner temporaire: Promotions (ex: "-50% beta testeurs")
    - Fichiers: `PlanCard.tsx`, `SubscriptionSettings.tsx`, `FloatingUpgradeButton.tsx`

  ---

  - [ ] SEO agent AgentSEO.jpg
    **THE PROMPT I USED TO BUILD AN SEO AGENT**
        Build an agent that performs a complete technical SEO audit for any provides prioritized, actionable optimization website and recommendations.
        When a user provides a URL, act as a Senior Technical SEO Specialist with 12+ years of experience. Analyze systematically:
        Site speed & Core Web Vitals (LCP, FID, CLS)
        Crawlability (robots.txt, XML sitemaps, indexation)
        Mobile responsiveness & optimization
        HTTPS and security setup
        Structured data & schema markup
        Internal linking architecture
        Duplicate content & canonical tags
        Meta tags & heading hierarchy
        Ask one natural question to identify their main goal (e.g., traffic growth, technical fixes, migration prep). Then present findings in this structure:
        1. **Critical Issues** fix immediately (high impact)
        2. **Important Optimizations** fix soon (medium impact)
        3. **Recommended Enhancements** nice to have
        For each issue, provide:
        What's wrong and why it matters
        Step-by-step fix instructions
        Expected outcome or improvement
        How to validate the fix
        Use clear, concise, and actionable language.
        Every recommendation should include implementation steps, prioritized by SEO impact and difficulty.

### üìå VENDREDI 20 D√âCEMBRE - JOUR 15


---

## üîÑ EOL (END OF LIFE) - ANCIENNE EXP√âRIENCE QUOTAS UNIFI√âS

### Contexte
Avec la s√©paration compl√®te des quotas par produit (date-polls, form-polls, quizz, availability), l'ancienne exp√©rience o√π les 3 produits partageaient un quota global `polls_created` est obsol√®te.

### √âtat actuel
- ‚úÖ **S√©paration technique compl√®te** : Compteurs s√©par√©s dans la base de donn√©es
- ‚úÖ **Limites par type** : Chaque produit a sa propre limite ind√©pendante
- ‚ö†Ô∏è **R√©trocompatibilit√© maintenue** : `polls_created` existe encore pour affichage uniquement (via trigger SQL)
- ‚ö†Ô∏è **V√©rifications globales supprim√©es** : Plus de limite globale `polls_created >= LIMIT`

### Actions EOL √† planifier

#### Phase 1 : Nettoyage code (Janvier 2025)
- [ ] Supprimer colonne `polls_created` de `quota_tracking` et `guest_quotas`
- [ ] Supprimer trigger SQL `sync_polls_created_trigger`
- [ ] Supprimer fonction SQL `sync_polls_created_from_separated_counters`
- [ ] Retirer `pollsCreated` de toutes les interfaces TypeScript
- [ ] Mettre √† jour tous les scripts de monitoring pour ne plus utiliser `polls_created`
- [ ] Mettre √† jour documentation pour refl√©ter la s√©paration compl√®te

#### Phase 2 : Migration donn√©es (Janvier 2025)
- [ ] Script de migration pour supprimer `polls_created` (colonne calculable √† la vol√©e si besoin)
- [ ] V√©rifier que tous les clients utilisent les compteurs s√©par√©s
- [ ] Tests de r√©gression complets

#### Phase 3 : Documentation (F√©vrier 2025)
- [ ] Documenter la d√©cision d'EOL dans `Docs/ARCHITECTURE/`
- [ ] Mettre √† jour guides d√©veloppeur
- [ ] Communiquer le changement aux utilisateurs (si impact visible)

### Notes importantes
- `polls_created` est actuellement maintenu uniquement pour l'affichage dans l'UI
- Les limites sont maintenant **uniquement** v√©rifi√©es par type de poll
- Le trigger SQL maintient `polls_created = somme des 4 compteurs` automatiquement
- **Aucune action imm√©diate requise** : L'EOL peut √™tre planifi√© apr√®s la b√™ta







